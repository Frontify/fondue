import{j as E}from"./jsx-runtime-Nms4Y4qS.js";import{r as t}from"./index-BwDkhjyp.js";import{u as S}from"./usePopper-189yIbFE.js";import{u as A}from"./useClickOutside-CKV3CrvD.js";import{I as k}from"./borderStyle-D9jrV09G.js";import{m as h}from"./merge-DI-veSMP.js";const I=(i,m,u="li > button:not(:disabled)")=>{const[a,o]=t.useState(0),[s,r]=t.useState(),[f,n]=t.useState(""),l=t.useCallback(e=>{if(!s||!["Tab","ArrowDown","ArrowUp","Escape"].includes(e.key))return;const d=e.key==="Tab"&&!e.shiftKey,p=e.key==="Tab"&&e.shiftKey,y=e.key==="Escape",b=d||e.key==="ArrowDown",c=p||e.key==="ArrowUp";if(p&&a<=0||d&&a>=s.length-1||y){n("CLOSE_MENU");return}b?o(Math.min(a+1,s.length-1)):c&&o(Math.max(a-1,0)),e.preventDefault()},[s,a]);return t.useEffect(()=>{if(!i||!m)return;const e=m.querySelectorAll(u);for(const d of e)d.onkeydown=l;!s&&e.length>0&&r(e)},[i,m,s,l,u]),t.useEffect(()=>{s&&s[a]&&s[a].focus()},[a,s]),t.useEffect(()=>{i||(r(void 0),n("")),o(0)},[i]),f},T="tw-relative tw-bg-base tw-rounded tw-py-2 tw-shadow-mid tw-z-[120000]",g=h([T,k]),N=({triggerRef:i,children:m,open:u=!0,offset:a=[0,8],onClose:o,"data-test-id":s="menu"})=>{const[r,f]=t.useState(u),[n,l]=t.useState(null),[e,d]=t.useState(null),p=t.useCallback(()=>{n&&r&&(f(!1),o&&o())},[n,r,o]),{dismissibleElementRef:y}=A(p,[n]),b=I(r,e,"li > a, li > button:not(:disabled)"),c=S(n,e,{placement:"bottom-start",strategy:"fixed",modifiers:[{name:"flip",enabled:!0},{name:"offset",options:{offset:a}}]});return t.useEffect(()=>{const w=i==null?void 0:i.current;w&&l(w)},[i]),t.useEffect(()=>{f(u)},[u]),t.useEffect(()=>{r&&c.update&&c.update()},[r]),t.useEffect(()=>{b==="CLOSE_MENU"&&n&&(f(!1),o&&o())},[b,o,n]),E.jsx("nav",{className:h([g,r?"tw-block":"tw-hidden"]),ref:d,style:n?c.styles.popper:{},...n?c.attributes.popper:{},"data-test-id":s,role:r?"navigation":"",children:E.jsx("ol",{ref:y,className:"tw-list-none",children:m})})};N.displayName="FondueMenu";N.__docgenInfo={description:"@deprecated Use `Dropdown` from `@frontify/fondue/components` instead. Also check {@link https://github.com/Frontify/fondue/blob/main/packages/components/MIGRATING.md#dropdown-replaces-dropdown-and-menu the migration guide}.",methods:[],displayName:"FondueMenu",props:{triggerRef:{required:!1,tsType:{name:"RefObject",elements:[{name:"Element"}],raw:"RefObject<Element>"},description:""},open:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},children:{required:!1,tsType:{name:"union",raw:"ReactNode | ReactNode[]",elements:[{name:"ReactNode"},{name:"Array",elements:[{name:"ReactNode"}],raw:"ReactNode[]"}]},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},offset:{required:!1,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:"",defaultValue:{value:"[0, 8]",computed:!1}},"data-test-id":{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'menu'",computed:!1}}}};export{N as M};
