import{a as i,$ as s}from"./useEffectEvent-23OTMzEQ.js";import{r as o,R as l}from"./index-ClcD9ViR.js";function p(r){let[e,a]=o.useState(r),t=o.useRef(null),n=i(()=>{if(!t.current)return;let u=t.current.next();if(u.done){t.current=null;return}e===u.value?n():a(u.value)});s(()=>{t.current&&n()});let c=i(u=>{t.current=u(e),n()});return[e,c]}const $={prefix:String(Math.round(Math.random()*1e10)),current:0},b=l.createContext($),x=l.createContext(!1);let v=!!(typeof window<"u"&&window.document&&window.document.createElement),d=new WeakMap;function m(r=!1){let e=o.useContext(b),a=o.useRef(null);if(a.current===null&&!r){var t,n;let c=(n=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||n===void 0||(t=n.ReactCurrentOwner)===null||t===void 0?void 0:t.current;if(c){let u=d.get(c);u==null?d.set(c,{id:e.current,state:c.memoizedState}):c.memoizedState!==u.state&&(e.current=u.id,d.delete(c))}a.current=++e.current}return a.current}function w(r){let e=o.useContext(b);e===$&&!v&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let a=m(!!r),t=`react-aria${e.prefix}`;return r||`${t}-${a}`}function S(r){let e=l.useId(),[a]=o.useState(M()),t=a?"react-aria":`react-aria${$.prefix}`;return r||`${t}-${e}`}const g=typeof l.useId=="function"?S:w;function y(){return!1}function h(){return!0}function C(r){return()=>{}}function M(){return typeof l.useSyncExternalStore=="function"?l.useSyncExternalStore(C,y,h):o.useContext(x)}let V=!!(typeof window<"u"&&window.document&&window.document.createElement),f=new Map;function k(r){let[e,a]=o.useState(r),t=o.useRef(null),n=g(e),c=o.useCallback(u=>{t.current=u},[]);return V&&(f.has(n)&&!f.get(n).includes(c)?f.set(n,[...f.get(n),c]):f.set(n,[c])),s(()=>{let u=n;return()=>{f.delete(u)}},[n]),o.useEffect(()=>{let u=t.current;u&&(t.current=null,a(u))}),n}function q(r,e){if(r===e)return r;let a=f.get(r);if(a)return a.forEach(n=>n(e)),e;let t=f.get(e);return t?(t.forEach(n=>n(r)),r):e}function P(r=[]){let e=k(),[a,t]=p(e),n=o.useCallback(()=>{t(function*(){yield e,yield document.getElementById(e)?e:void 0})},[e,t]);return s(n,[e,n,...r]),a}function j(...r){return(...e)=>{for(let a of r)typeof a=="function"&&a(...e)}}export{k as $,j as a,P as b,M as c,q as d};
