import{r as v,j as p}from"./iframe-DFjLVhbc.js";import{d as W,g as U,$ as K,c as z}from"./useFocusRing-Dpj3h8BM.js";import{c as q,h as H,$ as D,a as L}from"./useFocusable-BrJEXGTh.js";import{$ as Y,a as J,b as Q}from"./useFormValidationState-DsKunYOH.js";import{$ as X}from"./chain-COto9jE3.js";import{a as Z}from"./FocusScope-BEGBtqZ6.js";import{$ as ee}from"./useField-C9Mcpbbk.js";import{$ as te}from"./context-CYlUqLPi.js";import{a as E}from"./VisuallyHidden-BGnK_Vkg.js";import{$ as ae}from"./useControlledState-RilCKxQA.js";import{u as ie}from"./useMemoizedId-DJOVjcIP.js";import{a as le}from"./focusStyle-Ch_WJ4aJ.js";import{m as M}from"./merge-DI-veSMP.js";import{m as re}from"./proxy-BffGJnjp.js";const B=new WeakMap;function ne(e,t,s){let{value:a,children:f,"aria-label":c,"aria-labelledby":g,onPressStart:o,onPressEnd:m,onPressChange:b,onPress:u,onPressUp:r,onClick:x}=e;const $=e.isDisabled||t.isDisabled;let h=f!=null,y=c!=null||g!=null,P=t.selectedValue===a,S=I=>{I.stopPropagation(),t.setSelectedValue(a)},{pressProps:C,isPressed:V}=q({onPressStart:o,onPressEnd:m,onPressChange:b,onPress:u,onPressUp:r,onClick:x,isDisabled:$}),{pressProps:R,isPressed:l}=q({onPressStart:o,onPressEnd:m,onPressChange:b,onPressUp:r,onClick:x,isDisabled:$,onPress(I){var N;u==null||u(I),t.setSelectedValue(a),(N=s.current)===null||N===void 0||N.focus()}}),{focusableProps:i}=H(D(e,{onFocus:()=>t.setLastFocusedValue(a)}),s),d=D(C,i),n=L(e,{labelable:!0}),w=-1;t.selectedValue!=null?t.selectedValue===a&&(w=0):(t.lastFocusedValue===a||t.lastFocusedValue==null)&&(w=0),$&&(w=void 0);let{name:k,form:F,descriptionId:O,errorMessageId:G,validationBehavior:T}=B.get(t);return Y(s,t.defaultSelectedValue,t.setSelectedValue),J({validationBehavior:T},t,s),{labelProps:D(R,v.useMemo(()=>({onClick:I=>I.preventDefault(),onMouseDown:I=>I.preventDefault()}),[])),inputProps:D(n,{...d,type:"radio",name:k,form:F,tabIndex:w,disabled:$,required:t.isRequired&&T==="native",checked:P,value:a,onChange:S,"aria-describedby":[e["aria-describedby"],t.isInvalid?G:null,O].filter(Boolean).join(" ")||void 0}),isDisabled:$,isSelected:P,isPressed:V||l}}function se(e,t){let{name:s,form:a,isReadOnly:f,isRequired:c,isDisabled:g,orientation:o="vertical",validationBehavior:m="aria"}=e,{direction:b}=te(),{isInvalid:u,validationErrors:r,validationDetails:x}=t.displayValidation,{labelProps:$,fieldProps:h,descriptionProps:y,errorMessageProps:P}=ee({...e,labelElementType:"span",isInvalid:t.isInvalid,errorMessage:e.errorMessage||r}),S=L(e,{labelable:!0}),{focusWithinProps:C}=W({onBlurWithin(l){var i;(i=e.onBlur)===null||i===void 0||i.call(e,l),t.selectedValue||t.setLastFocusedValue(null)},onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange}),V=l=>{let i;switch(l.key){case"ArrowRight":b==="rtl"&&o!=="vertical"?i="prev":i="next";break;case"ArrowLeft":b==="rtl"&&o!=="vertical"?i="next":i="prev";break;case"ArrowDown":i="next";break;case"ArrowUp":i="prev";break;default:return}l.preventDefault();let d=Z(l.currentTarget,{from:l.target,accept:w=>w instanceof U(w).HTMLInputElement&&w.type==="radio"}),n;i==="next"?(n=d.nextNode(),n||(d.currentNode=l.currentTarget,n=d.firstChild())):(n=d.previousNode(),n||(d.currentNode=l.currentTarget,n=d.lastChild())),n&&(n.focus(),t.setSelectedValue(n.value))},R=X(s);return B.set(t,{name:R,form:a,descriptionId:y.id,errorMessageId:P.id,validationBehavior:m}),{radioGroupProps:D(S,{role:"radiogroup",onKeyDown:V,"aria-invalid":t.isInvalid||void 0,"aria-errormessage":e["aria-errormessage"],"aria-readonly":f||void 0,"aria-required":c||void 0,"aria-disabled":g||void 0,"aria-orientation":o,...h,...C}),labelProps:$,descriptionProps:y,errorMessageProps:P,isInvalid:u,validationErrors:r,validationDetails:x}}let oe=Math.round(Math.random()*1e10),de=0;function ce(e){let t=v.useMemo(()=>e.name||`radio-group-${oe}-${++de}`,[e.name]);var s;let[a,f]=ae(e.value,(s=e.defaultValue)!==null&&s!==void 0?s:null,e.onChange),[c]=v.useState(a),[g,o]=v.useState(null),m=Q({...e,value:a}),b=x=>{!e.isReadOnly&&!e.isDisabled&&(f(x),m.commitValidation())},u=m.displayValidation.isInvalid;var r;return{...m,name:t,selectedValue:a,defaultSelectedValue:e.value!==void 0?c:(r=e.defaultValue)!==null&&r!==void 0?r:null,setSelectedValue:b,lastFocusedValue:g,setLastFocusedValue:o,isDisabled:e.isDisabled||!1,isReadOnly:e.isReadOnly||!1,isRequired:e.isRequired||!1,validationState:e.validationState||(u?"invalid":null),isInvalid:u}}const j=e=>e.icon!==void 0,A=v.forwardRef((e,t)=>{const{id:s,item:a,disabled:f,radioGroupState:c,size:g}=e,o=v.useRef(null),m=a.id===c.selectedValue,{inputProps:b}=ne({value:a.id,"aria-label":j(a)?a.ariaLabel:a.value.toString(),isDisabled:f,id:m?s:void 0},c,o),{isFocusVisible:u,focusProps:r}=K(),x=()=>{var h;f||(c.setSelectedValue(a.id),(h=o.current)==null||h.focus(),z("pointer"))},$=()=>{switch(!0){case j(a):return"fondue-segmented-controls-item-icon";case typeof a.value=="string":return"fondue-segmented-controls-item-text";default:return"fondue-segmented-controls-item-number"}};return p.jsxs("div",{ref:t,className:M(["tw-relative",u&&le]),children:[p.jsx(E,{children:p.jsx("input",{...b,...r,"data-test-id":"fondue-segmented-controls-input",ref:o})}),p.jsx("div",{onClick:x,role:"none","data-test-id":$(),className:M(["tw-relative tw-w-full tw-py-1.5 tw-inline-flex tw-justify-center tw-items-center tw-font-sans tw-font-normal tw-h-full tw-text-center",g==="small"?"tw-px-2":"tw-px-4",m&&!f?"tw-transition tw-ease-in-out tw-delay-300 tw-text-text tw-bg-base":"tw-text-text-weak",f?"tw-text-box-disabled-inverse tw-bg-box-disabled tw-h-[2.15rem] tw-rounded hover:tw-cursor-not-allowed tw-border-line-x-strong":"hover:tw-text-text hover:tw-cursor-pointer"]),children:p.jsxs("span",{className:"tw-overflow-hidden tw-text-ellipsis tw-whitespace-nowrap tw-flex tw-items-center",children:[j(a)?p.jsx("span",{className:"tw-leading-3",children:a.icon}):null,a.value?p.jsx("span",{className:j(a)?"tw-ml-2":"",children:a.value.toString()}):null]})})]},a.id)});A.displayName="SegmentedControlsItem";const _=({id:e,items:t,activeItemId:s,onChange:a,ariaLabel:f="SegmentedControls",disabled:c=!1,hugWidth:g=!1,size:o})=>{const m=v.useMemo(()=>t.some(l=>!l.disabled),[t]),b=ie(e),u={onChange:a,value:s,label:f,isDisabled:c},r=ce(u),{radioGroupProps:x,labelProps:$}=se(u,r),h=v.useRef([]),y=v.useRef(null),[P,S]=v.useState(null),C=v.useMemo(()=>t.map((l,i)=>p.jsx(A,{id:b,item:l,disabled:l.disabled??c,radioGroupState:r,ref:d=>h.current[i]=d,size:o},`fondue-segmented-controls-${b}-item-${l.id}`)),[t,b,c,r,o]),V=m?t.findIndex((l,i)=>{const d=l.id===r.selectedValue;if(l.disabled&&d)if(i>0){const n=i-1;r.setSelectedValue(t[n].id)}else{const n=i+1;r.setSelectedValue(t[n].id)}return d}):-1,R=g?"tw-flex":"tw-grid tw-grid-flow-col tw-auto-cols-fr tw-justify-evenly";return v.useLayoutEffect(()=>{const l=h.current[V];if(l&&y.current){const i=y.current.getBoundingClientRect(),d=l.getBoundingClientRect();let n=d.left-i.left,w=d.width;V===0?(n-=1,w+=2):w+=1;const k=w/i.width*100,F=n/i.width*100;S({width:`${k}%`,left:`${F}%`})}},[s,V,o]),p.jsxs("div",{className:M([g?"tw-inline-flex":"tw-flex","tw-relative"]),children:[p.jsx("fieldset",{...x,"data-test-id":"fondue-segmented-controls",className:M(["tw-relative tw-divide-x tw-divide-line-strong tw-w-full tw-h-9 tw-p-0 tw-border tw-border-solid tw-border-line-strong tw-m-0 tw-bg-base-alt tw-rounded tw-font-sans tw-text-sm tw-select-none",R]),ref:y,children:C}),p.jsx(E,{children:p.jsx("span",{...$,children:f})}),s&&P&&p.jsx(re.div,{"aria-hidden":"true",animate:P,initial:!1,transition:{type:"tween",duration:.3},className:M(["tw-absolute tw-h-9 tw-box-border tw-border tw-rounded tw-pointer-events-none tw-top-0",c?"tw-border-line-x-strong hover:tw-cursor-not-allowed":"tw-border-line-xx-strong tw-bg-transparent"])})]})};_.displayName="FondueSegmentedControls";_.__docgenInfo={description:"@deprecated Use `SegmentedControl` from `@frontify/fondue/components` instead. Also check {@link https://github.com/Frontify/fondue/blob/main/packages/components/MIGRATING.md#segmented-control the migration guide}.",methods:[],displayName:"FondueSegmentedControls",props:{id:{required:!1,tsType:{name:"string"},description:""},items:{required:!0,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(TextOrNumberItem | IconItem)[]"},description:""},activeItemId:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},ariaLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'SegmentedControls'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hugWidth:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},size:{required:!1,tsType:{name:"union",raw:"'small' | 'medium'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'medium'"}]},description:""}}};export{_ as S};
