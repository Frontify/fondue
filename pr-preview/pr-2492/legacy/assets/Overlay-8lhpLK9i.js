import{r,j as f}from"./iframe-DxbHyf0A.js";import{u as U}from"./usePopper-BYXidn80.js";import{E as K,u as X}from"./EnablePortalWrapper-DmsPcojN.js";import{m as S,a as Y}from"./merge-DI-veSMP.js";import{P as Z}from"./Portal-BH21EDLr.js";import{u as $}from"./useClickOutside-DO6IOAgt.js";import{T as J}from"./elements-BOYmskOL.js";import{u as Q}from"./useMemoizedId-BscBt7xQ.js";const ee=200,te=400,ae="100px",ne=12,F=7,re=({dimension:t,isVerticalAlignedToTop:e})=>({left:`${(window.innerWidth-t.width)/2}px`,top:e?ae:`${(window.innerHeight-t.height)/2}px`,transform:"none"}),oe=t=>{switch(!0){case t.includes("top"):return"before:tw-border-t-0 before:tw-border-l-0 tw-bottom-[-6px]";case t.includes("right"):return"before:tw-border-t-0 before:tw-border-r-0 tw-left-[-6px]";case t.includes("bottom"):return"before:tw-border-b-0 before:tw-border-r-0 tw-top-[-6px]";case t.includes("left"):return"before:tw-border-b-0 before:tw-border-l-0 tw-right-[-6px]";default:return"before:tw-border-b-0 before:tw-border-r-0 tw-top-[-6px]"}},le=(t,e)=>{switch(!0){case t.includes("end"):return[e[0]+F,e[1]];case t.includes("start"):return[e[0]-F,e[1]];default:return e}},H=({children:t,open:e,placement:a="bottom-start",offset:o=[0,8],flip:l=!0,enablePortal:n=!0,zIndex:d="auto",isDetached:u=!1,verticalAlignment:y,strategy:g="absolute",anchor:p,withArrow:v=!1,arrowCustomColors:_})=>{const[O,E]=r.useState(null),[m,A]=r.useState(null),[N,L]=r.useState(null),[M,V]=r.useState(o),[T,D]=r.useState({width:ee,height:te});r.useEffect(()=>{const i=p==null?void 0:p.current;E(i)},[p]);const P=u?document.body:O,s=U(P,m,{placement:a,modifiers:[{name:"offset",options:{offset:M}},{name:"flip",enabled:l},{name:"arrow",options:{element:N,padding:ne}}],strategy:g}),h=s.state?s.state.placement:a,k=r.useMemo(()=>oe(h),[h]);r.useEffect(()=>{const i=v?le(h,o):o;V(b=>i[0]!==b[0]||i[1]!==b[1]?i:b)},[h,o,v]),r.useLayoutEffect(()=>{const i=()=>{var b,q,c,R;u&&s.state&&e&&D({width:(q=(b=s.state.rects)==null?void 0:b.popper)==null?void 0:q.width,height:(R=(c=s.state.rects)==null?void 0:c.popper)==null?void 0:R.height})};return i(),window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}},[u,e,s.state]);const x=u?re({dimension:T,isVerticalAlignedToTop:y==="top"}):{};return e&&f.jsx(K,{enablePortal:n,children:f.jsxs("div",{ref:A,style:{zIndex:d,...s.styles.popper,...x},...s.attributes.popper,children:[t,v&&f.jsx("div",{"data-test-id":"popper-arrow","data-popper-arrow":v,"aria-hidden":"true",ref:L,style:s.styles.arrow,className:S(["tw-absolute tw-w-3 tw-h-3 tw-pointer-events-none before:tw-absolute before:tw-w-3 before:tw-h-3 before:tw-rotate-45",_,k])})]})})};H.displayName="FonduePopper";H.__docgenInfo={description:"@deprecated Please use updated flyout component from `@frontify/fondue/components` instead. Also check {@link https://github.com/Frontify/fondue/blob/main/packages/components/MIGRATING.md#flyout-old-inlinedialog the migration guide}.",methods:[],displayName:"FonduePopper",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},anchor:{required:!0,tsType:{name:"RefObject",elements:[{name:"Element"}],raw:"RefObject<Element>"},description:""},open:{required:!1,tsType:{name:"boolean"},description:""},placement:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'bottom'
| 'top-start'
| 'bottom-start'
| 'top-end'
| 'bottom-end'
| 'right'
| 'left'
| 'right-start'
| 'right-end'
| 'left-start'
| 'left-end'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'top-start'"},{name:"literal",value:"'bottom-start'"},{name:"literal",value:"'top-end'"},{name:"literal",value:"'bottom-end'"},{name:"literal",value:"'right'"},{name:"literal",value:"'left'"},{name:"literal",value:"'right-start'"},{name:"literal",value:"'right-end'"},{name:"literal",value:"'left-start'"},{name:"literal",value:"'left-end'"}]},description:"",defaultValue:{value:"'bottom-start'",computed:!1}},offset:{required:!1,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:"",defaultValue:{value:"[0, 8]",computed:!1}},flip:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},enablePortal:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},zIndex:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"",defaultValue:{value:"'auto'",computed:!1}},isDetached:{required:!1,tsType:{name:"boolean"},description:"@description This property will detach the overlay from its trigger and will be relatively position to the body. example: Dialog compoennt.",defaultValue:{value:"false",computed:!1}},verticalAlignment:{required:!1,tsType:{name:"union",raw:"'top' | 'centered'",elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'centered'"}]},description:"@description This property will take effect only if isDetached is enabled."},strategy:{required:!1,tsType:{name:"PositioningStrategy"},description:"@description The property sets the way the modal is positioned on the view",defaultValue:{value:"'absolute'",computed:!1}},withArrow:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},arrowCustomColors:{required:!1,tsType:{name:"string"},description:""}}};const se=(t,e=!1,a=null)=>{const o=r.useRef(null),l=r.useCallback(n=>{var p;const d=[...((p=o.current)==null?void 0:p.querySelectorAll(J))??[]],u=d[0],y=d[d.length-1],g=n.key==="Tab";d.length===0||!g||(a===n.target&&(u.focus(),n.preventDefault()),!n.shiftKey&&n.target===y&&(u.focus(),n.preventDefault()),n.shiftKey&&n.target===u&&(y.focus(),n.preventDefault()))},[a]);return r.useEffect(()=>{if(e)return;const n=o.current,d=document.activeElement??document.body;return t&&(a==null||a.addEventListener("keydown",l),n==null||n.addEventListener("keydown",l)),()=>{a==null||a.removeEventListener("keydown",l),n==null||n.removeEventListener("keydown",l),d.focus()}},[l,e,t,a]),{elementRef:o}},ie=(t,{isBlockingModal:e,callback:a}={isBlockingModal:!1})=>{const o=r.useCallback(l=>{const n=typeof a=="function"?a:()=>({});t&&l.stopPropagation(),t&&!e&&l.key==="Escape"&&n()},[a,e,t]);r.useEffect(()=>(window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}),[o,e])},de=()=>{const[t,e]=r.useState(!1);return r.useEffect(()=>{const a=()=>{const o=window.matchMedia("only screen and (max-width: 640px)").matches;e(o)};return a(),window.addEventListener("resize",a),window.addEventListener("load",a),()=>{window.removeEventListener("resize",a),window.removeEventListener("load",a)}},[]),t},qe=1400,Re=1200,ue=1100,me="tw-bg-base tw-border tw-border-line",pe="tw-bg-box-neutral-mighty tw-text-box-neutral-mighty-inverse tw-border tw-border-line-mighty",_e="before:tw-border before:tw-border-line-mighty before:tw-bg-box-neutral-mighty",Oe={none:"tw-p-0",compact:"tw-p-4",comfortable:"tw-p-6",spacious:"tw-p-10"},ce={none:"tw-shadow-none",small:"tw-shadow",medium:"tw-shadow-mid",large:"tw-shadow-big"},fe={small:"tw-rounded",large:"tw-rounded-lg"};var w=(t=>(t.Modal="modal",t.NonModal="non-modal",t.BlockingModal="blocking-modal",t))(w||{});const be=({id:t,open:e,anchor:a,placement:o="bottom-start",offset:l=[0,8],flip:n=!0,enablePortal:d,children:u,role:y="region","data-test-id":g="fondue-overlay",maxWidth:p="auto",maxHeight:v="auto",minWidth:_=0,minHeight:O=0,handleClose:E,modality:m=w.NonModal,darkUnderlay:A,autoHeight:N,zIndex:L,isDetached:M,verticalAlignment:V,strategy:T,theme:D="light",withArrow:P,arrowCustomColors:s,roundedCorners:h=!0,shadow:k="large",isDialog:x=!0,width:i,borderRadius:b="small"})=>{const q=Q(t),[c,R]=r.useState(null);r.useEffect(()=>{const j=a==null?void 0:a.current;j&&R(j)},[a]);const{maxHeight:B}=X({current:c},{isOpen:e,autoResize:!0}),z=N?B:v,C=r.useCallback(()=>{e&&m!==w.BlockingModal&&E&&(E(),c==null||c.focus())},[E,m,e,c]),{elementRef:W}=se(e,m===w.NonModal,c),{dismissibleElementRef:G}=$(C);ie(e,{isBlockingModal:m===w.BlockingModal,callback:C}),r.useEffect(()=>(m!==w.NonModal&&(e&&(document.body.style.pointerEvents="none",T==="fixed"&&(document.body.style.overflow="hidden")),e||(document.body.style.pointerEvents="auto",document.body.style.overflow="auto")),()=>{m!==w.NonModal&&(document.body.style.pointerEvents="auto")}),[e,m,T]);const I=de();return f.jsxs(f.Fragment,{children:[f.jsx(H,{anchor:a,"data-test-id":g,open:e,placement:o,offset:l,flip:n,enablePortal:d,zIndex:L,isDetached:M,verticalAlignment:V,strategy:T,withArrow:P,arrowCustomColors:s,children:f.jsx("div",{ref:Y(G,W),"data-test-id":`${g}-content`,className:S(["tw-flex tw-flex-col tw-pointer-events-auto",D==="light"?me:pe,h&&fe[b],ce[k]]),role:y,id:q,"aria-hidden":!e,"aria-labelledby":q,style:{width:i,minWidth:I&&x?"90vw":_,minHeight:O,maxWidth:I&&x?"90vw":p,maxHeight:z},children:u})}),x&&m!==w.NonModal&&e&&f.jsx(Z,{children:f.jsx("div",{"data-test-id":`${g}-underlay`,className:S(["tw-fixed tw-top-0 tw-left-0 tw-bottom-0 tw-right-0",(A||I)&&"tw-transition-opacity tw-bg-box-neutral-mighty tw-opacity-50"]),style:{zIndex:ue}})})]})};be.__docgenInfo={description:"@deprecated Use `Dialog` from `@frontify/fondue/components` instead.",methods:[],displayName:"Overlay",props:{children:{required:!1,tsType:{name:"ReactNode"},description:""},anchor:{required:!0,tsType:{name:"RefObject",elements:[{name:"Element"}],raw:"RefObject<Element>"},description:""},open:{required:!0,tsType:{name:"boolean"},description:""},placement:{required:!1,tsType:{name:"union",raw:`| 'top'
| 'bottom'
| 'top-start'
| 'bottom-start'
| 'top-end'
| 'bottom-end'
| 'right'
| 'left'
| 'right-start'
| 'right-end'
| 'left-start'
| 'left-end'`,elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'bottom'"},{name:"literal",value:"'top-start'"},{name:"literal",value:"'bottom-start'"},{name:"literal",value:"'top-end'"},{name:"literal",value:"'bottom-end'"},{name:"literal",value:"'right'"},{name:"literal",value:"'left'"},{name:"literal",value:"'right-start'"},{name:"literal",value:"'right-end'"},{name:"literal",value:"'left-start'"},{name:"literal",value:"'left-end'"}]},description:"",defaultValue:{value:"'bottom-start'",computed:!1}},offset:{required:!1,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:"",defaultValue:{value:"[0, 8]",computed:!1}},flip:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},enablePortal:{required:!1,tsType:{name:"boolean"},description:""},zIndex:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""},isDetached:{required:!1,tsType:{name:"boolean"},description:"@description This property will detach the overlay from its trigger and will be relatively position to the body. example: Dialog compoennt."},verticalAlignment:{required:!1,tsType:{name:"union",raw:"'top' | 'centered'",elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'centered'"}]},description:"@description This property will take effect only if isDetached is enabled."},strategy:{required:!1,tsType:{name:"PositioningStrategy"},description:"@description The property sets the way the modal is positioned on the view"},withArrow:{required:!1,tsType:{name:"boolean"},description:""},arrowCustomColors:{required:!1,tsType:{name:"string"},description:""},id:{required:!1,tsType:{name:"string"},description:""},"data-test-id":{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'fondue-overlay'",computed:!1}},role:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'region'",computed:!1}},theme:{required:!1,tsType:{name:"union",raw:"'light' | 'dark'",elements:[{name:"literal",value:"'light'"},{name:"literal",value:"'dark'"}]},description:"",defaultValue:{value:"'light'",computed:!1}},shadow:{required:!1,tsType:{name:"union",raw:"'none' | 'small' | 'medium' | 'large'",elements:[{name:"literal",value:"'none'"},{name:"literal",value:"'small'"},{name:"literal",value:"'medium'"},{name:"literal",value:"'large'"}]},description:"",defaultValue:{value:"'large'",computed:!1}},isDialog:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},handleClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},modality:{required:!1,tsType:{name:"Modality"},description:"",defaultValue:{value:"Modality.NonModal",computed:!0}},maxWidth:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:"'auto'",computed:!1}},maxHeight:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:"'auto'",computed:!1}},minWidth:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:"0",computed:!1}},minHeight:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:"0",computed:!1}},darkUnderlay:{required:!1,tsType:{name:"boolean"},description:"@description This property enable a full screen gray underlay only for modal and blocking-modal options."},autoHeight:{required:!1,tsType:{name:"boolean"},description:`@description If enabled, any value assigned to the maxHeight property won't have any effect.
autoHeight will set the maxHeight of the dialog Component automatically calculating the available space in the viewport.`},roundedCorners:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},width:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:""},borderRadius:{required:!1,tsType:{name:"union",raw:"'small' | 'large'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'large'"}]},description:"",defaultValue:{value:"'small'",computed:!1}}}};export{_e as A,w as M,be as O,qe as Z,Re as a,Oe as d};
