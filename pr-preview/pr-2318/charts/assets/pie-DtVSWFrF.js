var un=Math.PI,rn=2*un,Z=1e-6,gn=rn-Z;function sn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function an(){return new sn}sn.prototype=an.prototype={constructor:sn,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,s,f){this._+="Q"+ +t+","+ +i+","+(this._x1=+s)+","+(this._y1=+f)},bezierCurveTo:function(t,i,s,f,h,c){this._+="C"+ +t+","+ +i+","+ +s+","+ +f+","+(this._x1=+h)+","+(this._y1=+c)},arcTo:function(t,i,s,f,h){t=+t,i=+i,s=+s,f=+f,h=+h;var c=this._x1,l=this._y1,n=s-t,u=f-i,e=c-t,g=l-i,r=e*e+g*g;if(h<0)throw new Error("negative radius: "+h);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=i);else if(r>Z)if(!(Math.abs(g*n-u*e)>Z)||!h)this._+="L"+(this._x1=t)+","+(this._y1=i);else{var a=s-c,m=f-l,d=n*n+u*u,T=a*a+m*m,y=Math.sqrt(d),R=Math.sqrt(r),M=h*Math.tan((un-Math.acos((d+r-T)/(2*y*R)))/2),x=M/R,v=M/y;Math.abs(x-1)>Z&&(this._+="L"+(t+x*e)+","+(i+x*g)),this._+="A"+h+","+h+",0,0,"+ +(g*a>e*m)+","+(this._x1=t+v*n)+","+(this._y1=i+v*u)}},arc:function(t,i,s,f,h,c){t=+t,i=+i,s=+s,c=!!c;var l=s*Math.cos(f),n=s*Math.sin(f),u=t+l,e=i+n,g=1^c,r=c?f-h:h-f;if(s<0)throw new Error("negative radius: "+s);this._x1===null?this._+="M"+u+","+e:(Math.abs(this._x1-u)>Z||Math.abs(this._y1-e)>Z)&&(this._+="L"+u+","+e),s&&(r<0&&(r=r%rn+rn),r>gn?this._+="A"+s+","+s+",0,1,"+g+","+(t-l)+","+(i-n)+"A"+s+","+s+",0,1,"+g+","+(this._x1=u)+","+(this._y1=e):r>Z&&(this._+="A"+s+","+s+",0,"+ +(r>=un)+","+g+","+(this._x1=t+s*Math.cos(h))+","+(this._y1=i+s*Math.sin(h))))},rect:function(t,i,s,f){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +s+"v"+ +f+"h"+-s+"Z"},toString:function(){return this._}};function _(t){return function(){return t}}var hn=Math.abs,A=Math.atan2,V=Math.cos,pn=Math.max,en=Math.min,S=Math.sin,D=Math.sqrt,b=1e-12,O=Math.PI,K=O/2,J=2*O;function yn(t){return t>1?0:t<-1?O:Math.acos(t)}function fn(t){return t>=1?K:t<=-1?-K:Math.asin(t)}function dn(t){return t.innerRadius}function mn(t){return t.outerRadius}function vn(t){return t.startAngle}function xn(t){return t.endAngle}function _n(t){return t&&t.padAngle}function Mn(t,i,s,f,h,c,l,n){var u=s-t,e=f-i,g=l-h,r=n-c,a=r*u-g*e;if(!(a*a<b))return a=(g*(i-c)-r*(t-h))/a,[t+a*u,i+a*e]}function H(t,i,s,f,h,c,l){var n=t-s,u=i-f,e=(l?c:-c)/D(n*n+u*u),g=e*u,r=-e*n,a=t+g,m=i+r,d=s+g,T=f+r,y=(a+d)/2,R=(m+T)/2,M=d-a,x=T-m,v=M*M+x*x,w=h-c,P=a*T-d*m,N=(x<0?-1:1)*D(pn(0,w*w*v-P*P)),C=(P*x-M*N)/v,E=(-P*M-x*N)/v,L=(P*x+M*N)/v,q=(-P*M+x*N)/v,o=C-y,p=E-R,I=L-y,k=q-R;return o*o+p*p>I*I+k*k&&(C=L,E=q),{cx:C,cy:E,x01:-g,y01:-r,x11:C*(h/w-1),y11:E*(h/w-1)}}function wn(){var t=dn,i=mn,s=_(0),f=null,h=vn,c=xn,l=_n,n=null;function u(){var e,g,r=+t.apply(this,arguments),a=+i.apply(this,arguments),m=h.apply(this,arguments)-K,d=c.apply(this,arguments)-K,T=hn(d-m),y=d>m;if(n||(n=e=an()),a<r&&(g=a,a=r,r=g),!(a>b))n.moveTo(0,0);else if(T>J-b)n.moveTo(a*V(m),a*S(m)),n.arc(0,0,a,m,d,!y),r>b&&(n.moveTo(r*V(d),r*S(d)),n.arc(0,0,r,d,m,y));else{var R=m,M=d,x=m,v=d,w=T,P=T,N=l.apply(this,arguments)/2,C=N>b&&(f?+f.apply(this,arguments):D(r*r+a*a)),E=en(hn(a-r)/2,+s.apply(this,arguments)),L=E,q=E,o,p;if(C>b){var I=fn(C/r*S(N)),k=fn(C/a*S(N));(w-=I*2)>b?(I*=y?1:-1,x+=I,v-=I):(w=0,x=v=(m+d)/2),(P-=k*2)>b?(k*=y?1:-1,R+=k,M-=k):(P=0,R=M=(m+d)/2)}var j=a*V(R),z=a*S(R),Q=r*V(v),B=r*S(v);if(E>b){var F=a*V(M),G=a*S(M),U=r*V(x),W=r*S(x),$;if(T<O&&($=Mn(j,z,U,W,F,G,Q,B))){var X=j-$[0],Y=z-$[1],nn=F-$[0],tn=G-$[1],on=1/S(yn((X*nn+Y*tn)/(D(X*X+Y*Y)*D(nn*nn+tn*tn)))/2),ln=D($[0]*$[0]+$[1]*$[1]);L=en(E,(r-ln)/(on-1)),q=en(E,(a-ln)/(on+1))}}P>b?q>b?(o=H(U,W,j,z,a,q,y),p=H(F,G,Q,B,a,q,y),n.moveTo(o.cx+o.x01,o.cy+o.y01),q<E?n.arc(o.cx,o.cy,q,A(o.y01,o.x01),A(p.y01,p.x01),!y):(n.arc(o.cx,o.cy,q,A(o.y01,o.x01),A(o.y11,o.x11),!y),n.arc(0,0,a,A(o.cy+o.y11,o.cx+o.x11),A(p.cy+p.y11,p.cx+p.x11),!y),n.arc(p.cx,p.cy,q,A(p.y11,p.x11),A(p.y01,p.x01),!y))):(n.moveTo(j,z),n.arc(0,0,a,R,M,!y)):n.moveTo(j,z),!(r>b)||!(w>b)?n.lineTo(Q,B):L>b?(o=H(Q,B,F,G,r,-L,y),p=H(j,z,U,W,r,-L,y),n.lineTo(o.cx+o.x01,o.cy+o.y01),L<E?n.arc(o.cx,o.cy,L,A(o.y01,o.x01),A(p.y01,p.x01),!y):(n.arc(o.cx,o.cy,L,A(o.y01,o.x01),A(o.y11,o.x11),!y),n.arc(0,0,r,A(o.cy+o.y11,o.cx+o.x11),A(p.cy+p.y11,p.cx+p.x11),y),n.arc(p.cx,p.cy,L,A(p.y11,p.x11),A(p.y01,p.x01),!y))):n.arc(0,0,r,v,x,y)}if(n.closePath(),e)return n=null,e+""||null}return u.centroid=function(){var e=(+t.apply(this,arguments)+ +i.apply(this,arguments))/2,g=(+h.apply(this,arguments)+ +c.apply(this,arguments))/2-O/2;return[V(g)*e,S(g)*e]},u.innerRadius=function(e){return arguments.length?(t=typeof e=="function"?e:_(+e),u):t},u.outerRadius=function(e){return arguments.length?(i=typeof e=="function"?e:_(+e),u):i},u.cornerRadius=function(e){return arguments.length?(s=typeof e=="function"?e:_(+e),u):s},u.padRadius=function(e){return arguments.length?(f=e==null?null:typeof e=="function"?e:_(+e),u):f},u.startAngle=function(e){return arguments.length?(h=typeof e=="function"?e:_(+e),u):h},u.endAngle=function(e){return arguments.length?(c=typeof e=="function"?e:_(+e),u):c},u.padAngle=function(e){return arguments.length?(l=typeof e=="function"?e:_(+e),u):l},u.context=function(e){return arguments.length?(n=e??null,u):n},u}function cn(t){this._context=t}cn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i);break}}};function An(t){return new cn(t)}function Tn(t){return t[0]}function Rn(t){return t[1]}function En(){var t=Tn,i=Rn,s=_(!0),f=null,h=An,c=null;function l(n){var u,e=n.length,g,r=!1,a;for(f==null&&(c=h(a=an())),u=0;u<=e;++u)!(u<e&&s(g=n[u],u,n))===r&&((r=!r)?c.lineStart():c.lineEnd()),r&&c.point(+t(g,u,n),+i(g,u,n));if(a)return c=null,a+""||null}return l.x=function(n){return arguments.length?(t=typeof n=="function"?n:_(+n),l):t},l.y=function(n){return arguments.length?(i=typeof n=="function"?n:_(+n),l):i},l.defined=function(n){return arguments.length?(s=typeof n=="function"?n:_(!!n),l):s},l.curve=function(n){return arguments.length?(h=n,f!=null&&(c=h(f)),l):h},l.context=function(n){return arguments.length?(n==null?f=c=null:c=h(f=n),l):f},l}function Pn(t,i){return i<t?-1:i>t?1:i>=t?0:NaN}function bn(t){return t}function Ln(){var t=bn,i=Pn,s=null,f=_(0),h=_(J),c=_(0);function l(n){var u,e=n.length,g,r,a=0,m=new Array(e),d=new Array(e),T=+f.apply(this,arguments),y=Math.min(J,Math.max(-J,h.apply(this,arguments)-T)),R,M=Math.min(Math.abs(y)/e,c.apply(this,arguments)),x=M*(y<0?-1:1),v;for(u=0;u<e;++u)(v=d[m[u]=u]=+t(n[u],u,n))>0&&(a+=v);for(i!=null?m.sort(function(w,P){return i(d[w],d[P])}):s!=null&&m.sort(function(w,P){return s(n[w],n[P])}),u=0,r=a?(y-e*x)/a:0;u<e;++u,T=R)g=m[u],v=d[g],R=T+(v>0?v*r:0)+x,d[g]={data:n[g],index:u,value:v,startAngle:T,endAngle:R,padAngle:M};return d}return l.value=function(n){return arguments.length?(t=typeof n=="function"?n:_(+n),l):t},l.sortValues=function(n){return arguments.length?(i=n,s=null,l):i},l.sort=function(n){return arguments.length?(s=n,i=null,l):s},l.startAngle=function(n){return arguments.length?(f=typeof n=="function"?n:_(+n),l):f},l.endAngle=function(n){return arguments.length?(h=typeof n=="function"?n:_(+n),l):h},l.padAngle=function(n){return arguments.length?(c=typeof n=="function"?n:_(+n),l):c},l}export{Ln as a,En as b,_ as c,wn as d,An as e,O as f,b as g,an as p,J as t,Tn as x,Rn as y};
