var m=function(t){if(typeof document>"u")return null;var a=Array.isArray(t)?t[0]:t;return a.ownerDocument.body},f=new WeakMap,l=new WeakMap,w={},y=0,g=function(t){return t&&(t.host||g(t.parentNode))},k=function(t,a){return a.map(function(e){if(t.contains(e))return e;var i=g(e);return i&&t.contains(i)?i:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e})},B=function(t,a,e,i){var o=k(a,Array.isArray(t)?t:[t]);w[e]||(w[e]=new WeakMap);var u=w[e],h=[],s=new Set,A=new Set(o),c=function(r){!r||s.has(r)||(s.add(r),c(r.parentNode))};o.forEach(c);var p=function(r){!r||A.has(r)||Array.prototype.forEach.call(r.children,function(n){if(s.has(n))p(n);else try{var v=n.getAttribute(i),b=v!==null&&v!=="false",d=(f.get(n)||0)+1,M=(u.get(n)||0)+1;f.set(n,d),u.set(n,M),h.push(n),d===1&&b&&l.set(n,!0),M===1&&n.setAttribute(e,"true"),b||n.setAttribute(i,"true")}catch(W){console.error("aria-hidden: cannot operate on ",n,W)}})};return p(a),s.clear(),y++,function(){h.forEach(function(r){var n=f.get(r)-1,v=u.get(r)-1;f.set(r,n),u.set(r,v),n||(l.has(r)||r.removeAttribute(i),l.delete(r)),v||r.removeAttribute(e)}),y--,y||(f=new WeakMap,f=new WeakMap,l=new WeakMap,w={})}},S=function(t,a,e){e===void 0&&(e="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),o=a||m(t);return o?(i.push.apply(i,Array.from(o.querySelectorAll("[aria-live], script"))),B(i,o,e,"aria-hidden")):function(){return null}};const C=(t,a,e,i)=>{var r;let o="bottom",u=1/0;if(!t||!a)return{position:o,maxHeight:u};const{top:h,bottom:s}=t.getBoundingClientRect(),c=(((r=window.visualViewport)==null?void 0:r.height)??0)-s-e-i,p=h-e;return c<a&&(o=c<p?"top":"bottom"),u=o==="top"?p:c,{position:o,maxHeight:u}};export{C as g,S as h};
