import{r as d,j as c}from"./iframe-p1vB3hY_.js";import{C as Q,b as ge}from"./Container-CBwBl869.js";import{R as D,a as w,d as S,f as _,c as W,b as R,e as B,g as ye,r as be,j as xe,n as Ie,E as Ce,k as we,T as X}from"./Tree-BKdpQ8BT.js";import{I as Se}from"./IconDocument-D_8LBl9q.js";import{C as j,h as ve,i as Te,j as je}from"./Checkbox-Bfju7Nao.js";import{b as Me}from"./focusStyle-6rwBDk7H.js";import{m as M}from"./merge-DI-veSMP.js";import"./preload-helper-CuVs6mET.js";import"./index-BQHrE4cI.js";import"./index-BiA52lXa.js";import"./IconSize-BcCrF_mi.js";import"./usePopper-Dif1OK3G.js";import"./chain-DgcY8S1R.js";import"./useLayoutEffect-BsQPw5QT.js";import"./useFocusRing-BJTCTP6p.js";import"./useControlledState-Ccmz0v6a.js";import"./InputLabel-HnIia9J9.js";import"./LegacyTooltip-B9Rlgwkw.js";import"./IconExclamationMarkTriangle-DCp86bfQ.js";import"./IconExclamationMarkTriangle24-DDrTwlIZ.js";import"./IconExclamationMarkCircle24-Bav2qT7r.js";const ke=(e,t)=>{let n=j.Unchecked;return e?n=j.Checked:t&&(n=j.Mixed),n},H=(e,t,n=!1)=>e.filter(s=>(n?!1:t.includes(x(s)))||t.includes(v([x(s)])[0])).map(s=>s.id),L=(e,t)=>{var n;for(const s of e){if(s.id===t)return s;if(s.nodes&&((n=s.nodes)==null?void 0:n.length)>0){const o=L(s.nodes,t);if(o)return o}}return null},q=(e,t,n)=>{var s;for(const o of e){if(n!==null&&o.id===t)return n;if(o.nodes&&((s=o.nodes)==null?void 0:s.length)>0){const r=q(o.nodes,t,o);if(r)return r}}return null},Z=(e,t,n)=>{var h,m;const s=q(e,t,null);n=s!=null&&s.id?U(s,n):n;const o=L(e,t);if(!o)return n;const r=x(o),a=H((o==null?void 0:o.nodes)??[],n);if(((h=o==null?void 0:o.nodes)==null?void 0:h.length)??0){const u=((m=o==null?void 0:o.nodes)==null?void 0:m.map(T=>x(T)))??[];n=n.includes(r)?k(n,u,!1):f(n,u,!1),a.length===0&&(n=f(n,[r],!0))}for(const u of(o==null?void 0:o.nodes)??[])n=Z(e,u.id,n);let i=s;const p=[];for(;i!==null;)p.push(i),i=q(e,i.id,null);for(const u of p)n=U(u,n);return n},U=(e,t)=>{var l;const n=x(e),s=t.includes(n),o=H((e==null?void 0:e.nodes)??[],t),r=H((e==null?void 0:e.nodes)??[],t,!0),a=((l=e==null?void 0:e.nodes)==null?void 0:l.length)??0;return o.length===0?(t=s?f(t,[n],!1):t,t=f(t,[n],!0)):o.length===a&&r.length===0?(t=s?t:k(t,[n],!1),t=f(t,[n],!0)):e!=null&&e.id&&(t=k(t,[n],!0),t=f(t,[n],!1)),t},A=e=>{const t=[];let n=e;const s=e.map(o=>o.split("/").pop());for(const o of e){const r=o.split("/").shift();r===D||r===v([D])[0]||!s.includes(r)&&!s.includes(Oe([r??""])[0]??"")&&t.push(o)}return t.length>0&&(n=f(e,t,!1),n=A(n)),n},v=e=>e.map(t=>`*${t}`),Oe=e=>e.map(t=>t.replace(/^\*/,"")),x=e=>e.extendedId??`${e.parentId}/${e.id}`,f=(e,t,n)=>(t=n?v(t):t,[...new Set(t.length>0?e.filter(s=>!t.includes(s)):e)]),k=(e,t,n)=>(t=(n?v(t):t).filter(s=>s!==""),[...new Set(t.length>0?[...e,...t]:e)]),Ee=(e,t,n,s=!1)=>{let o=[];const r=L(n,e);if(!r)return t;const a=x(r);return t.includes(a)&&!s?o=f(t,[a],!1):(o=k(t,[a],!1),o=f(o,[a],!0)),o=Z(n,e,o),A(o)},Ne=(e,t)=>{const n=w[e.activeColorStyle??"neutral"];return M([Me,"tw-box-content tw-relative tw-cursor-default tw-transition-colors tw-outline-none tw-ring-inset tw-group tw-no-underline tw-leading-5",_[e.spacingY??"none"],t?"tw-text-text-disabled":n.textColor])},_e=(e,t,n)=>{const s=w[e.activeColorStyle??"neutral"];return M(["tw-block tw-absolute tw-inset-0 tw-transition-colors -tw-z-10",e.borderWidth!=="none"?S[e.borderRadius??"small"]:"",(!t||e.activeColorStyle!=="neutral")&&s.pressedBackgroundColor,n?w.none.backgroundColor:s.backgroundColor])},We=e=>{const t=e.borderWidth!=="none"?M([W[e.borderWidth??"none"],S[e.borderRadius??"small"],R[e.borderStyle??"none"]]):"";return M(["tw-relative tw-z-0 tw-transition-colors tw-flex tw-items-center tw-content-center tw-leading-5 tw-width-fit tw-justify-start tw-pl-2",B[e.shadow??"none"],t,S[e.borderRadius??"small"],e.contentHight==="single-line"?"tw-h-10":"tw-h-fit"])},Re=e=>{const{treeState:t}=d.useContext(ye),n=t.nodes.find(m=>m.props.id===e),s=n?n.props.parentId:"",o=t.nodes.find(m=>m.props.id===s),r=n?`${s}/${n.props.id}`:null,a=o?`${o.props.parentId}/${o.props.id}`:null,l=r?t.selectedIds.has(r):!1,i=a?t.selectedIds.has(a):!1,p=r?t.selectedIds.has(v([r])[0]):!1,h=t.expandedIds.has(e);return{isSelected:l,isParentSelected:i,isPartialSelected:p,isExpanded:h}},P=d.memo(({id:e,label:t,showCaret:n,children:s,level:o=0,contentComponent:r,parentId:a,onSelect:l,onExpand:i,onShrink:p,registerNodeChildren:h,unregisterNodeChildren:m,isDisabled:u=!1,expandable:T=!0,checkBoxPosition:O="left",itemStyle:Y,"data-test-id":te="fondue-tree-item"})=>{const ne=d.useRef(null),{isSelected:g,isExpanded:y,isPartialSelected:oe,isParentSelected:V}=Re(e),se=d.useCallback(b=>{b==null||b.stopPropagation(),y?p&&p(e):i&&i(e)},[e,y,i,p]);d.useEffect(()=>{V&&!g&&l&&l(e,!0)},[e,l,V,g]);const $=d.Children.count(s)>0,{enrichedChildren:E,childrenIds:re}=d.useMemo(()=>{const b=be(s,{parentId:e,level:o+1});return{enrichedChildren:b,childrenIds:b.map(he=>he.props.id)}},[s,e,o]);xe(()=>{if(d.Children.count(E)===0||!y){m==null||m(e);return}h==null||h({id:e,children:E})},[y,E,e]);const I=d.useMemo(()=>({spacingY:"none",contentHight:"single-line",shadow:"none",borderRadius:"small",borderWidth:"none",borderStyle:"none",activeColorStyle:"neutral",...Y}),[Y]),{liClassName:ae,backgroundClassName:le}=d.useMemo(()=>({liClassName:Ne(I,u),backgroundClassName:_e(I,g,u)}),[I,u,g]),ie="tw-max-w-full	tw-grow",ce=y,de=t!==void 0,N=T&&(n??$),ue=We(I),F=o*we,pe={paddingLeft:F},me=I.borderWidth!=="none"?{}:{marginLeft:-1*F},fe=()=>{!u&&l&&l(e,!1)},z=O!=="none"?c.jsx(Q,{maxWidth:"16px",maxHeight:"16px",children:c.jsx(ve,{id:`checkbox-${e}`,ref:ne,disabled:u,"aria-label":t??"",emphasis:je.Weak,helperText:"",hideLabel:!0,label:"",onChange:fe,size:Te.Default,state:u?j.Unchecked:ke(g,oe),tooltip:[],value:e})}):null;return c.jsx("li",{id:e,tabIndex:0,role:"treeitem",style:pe,onKeyDown:Ie,"aria-label":t,"aria-level":o+1,className:ae,"data-test-id":te,"aria-selected":g,"aria-expanded":y,"data-has-children":$,"aria-owns":re.join(" "),children:c.jsxs("div",{className:ue,children:[c.jsx("span",{className:le,style:me,"aria-hidden":!0}),O==="left"&&z,T&&c.jsx(Ce,{onClick:se,expanded:ce,disabled:!N,"aria-hidden":!N,className:N?"tw-visible":"tw-invisible tw-pointer-events-none"}),de&&c.jsx("span",{className:"first:tw-ml-3.5 tw-h-full tw-flex tw-items-center",children:t}),c.jsx("div",{className:ie,children:r}),O==="right"&&z]})},e)});P.displayName="FondueTreeItemMultiselect";P.__docgenInfo={description:"",methods:[],displayName:"FondueTreeItemMultiselect",props:{parentId:{required:!1,tsType:{name:"string"},description:""},level:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string, ignoreRemoveSelected: boolean) => void",signature:{arguments:[{type:{name:"string"},name:"id"},{type:{name:"boolean"},name:"ignoreRemoveSelected"}],return:{name:"void"}}},description:"onSelect is passed by the Tree component when cloning the TreeItem"},onExpand:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},onShrink:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},unregisterNodeChildren:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: string) => void",signature:{arguments:[{type:{name:"string"},name:"payload"}],return:{name:"void"}}},description:""},registerNodeChildren:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: RegisterNodeChildrenPayload) => void",signature:{arguments:[{type:{name:"RegisterNodeChildrenPayload"},name:"payload"}],return:{name:"void"}}},description:""},isDisabled:{defaultValue:{value:"false",computed:!1},required:!1},expandable:{defaultValue:{value:"true",computed:!1},required:!1},checkBoxPosition:{defaultValue:{value:"'left'",computed:!1},required:!1},"data-test-id":{defaultValue:{value:"'fondue-tree-item'",computed:!1},required:!1}}};const st={title:"Legacy Components/Tree/Multiselect",component:X,tags:["autodocs"],parameters:{controls:{expanded:!0},docs:{description:{component:`### *Legacy component warning*
#### This is a unmaintained legacy component. It will be deprecated and replaced with a new component in an upcoming release.`}}},args:{id:"storybook-tree",multiselect:!0,draggable:!0,selectedIds:["__ROOT__/2"],dragHandlerPosition:"left",spacingY:"none",contentHight:"single-line",shadow:"none",borderRadius:"small",borderWidth:"none",borderStyle:"none",activeColorStyle:"neutral"},argTypes:{multiselect:{control:{type:"boolean"}},draggable:{control:{type:"boolean"}},dragHandlerPosition:{table:{category:"Item Options"},options:["left","right","none"],control:{type:"inline-radio"}},spacingY:{table:{category:"Item Style"},name:"itemStyle.spacingY",options:[...Object.keys(_)],mapping:[...Object.values(_)],control:{type:"inline-radio"}},contentHight:{table:{category:"Item Style"},name:"itemStyle.contentHight",options:["content-fit","single-line"],control:{type:"inline-radio"}},shadow:{table:{category:"Item Style"},name:"itemStyle.shadow",options:[...Object.keys(B)],mapping:[...Object.values(B)],control:{type:"select"}},borderRadius:{table:{category:"Item Style"},name:"itemStyle.borderRadius",options:[...Object.keys(S)],mapping:[...Object.values(S)],control:{type:"select"}},borderWidth:{table:{category:"Item Style"},name:"itemStyle.borderWidth",options:[...Object.keys(W)],mapping:[...Object.values(W)],control:{type:"select"}},borderStyle:{table:{category:"Item Style"},name:"itemStyle.borderStyle",options:[...Object.keys(R)],mapping:[...Object.values(R)],control:{type:"select"}},activeColorStyle:{table:{category:"Item Style"},name:"itemStyle.activeColorStyle",options:[...Object.keys(w)],mapping:[...Object.values(w)],control:{type:"inline-radio"}},selectedIds:{control:{type:"object"},description:"Pre-selected Ids must be in the format `<parent_id>/<selected_id>` (`__ROOT__` is the root id)"},expandedIds:{control:{type:"object"}}}},Be=({title:e})=>c.jsxs("div",{className:"tw-flex tw-space-x-1.5 tw-w-full",children:[c.jsx("span",{className:"tw-flex tw-justify-center tw-items-center tw-w-5",children:c.jsx(Se,{})}),c.jsx("span",{children:e})]}),ee=({nodes:e,label:t,numChildNodes:n,onSelect:s,...o},r)=>{const a=(e==null?void 0:e.length)??0,l=n!==void 0?!!n:a>0;return d.createElement(P,{...o,key:o.id,contentComponent:c.jsx(Be,{title:t||"NO TITLE"}),onSelect:s,showCaret:l},e==null?void 0:e.map(i=>ee(i)))},C=({...e})=>{const[t,n]=d.useState(e.selectedIds??[]),[s,o]=d.useState([]);d.useEffect(()=>{o(ge)},[]);const r=(a,l=!1,i=[])=>{i.length!==0&&n(p=>Ee(a,p,i,l))};return c.jsx(Q,{maxWidth:"400px",children:c.jsx(X,{id:e.id,...He(e),selectedIds:t,onSelect:r,children:s.map(a=>ee(a))})})},He=({...e})=>{const t={spacingY:e.spacingY,contentHight:e.contentHight,shadow:e.shadow,borderRadius:e.borderRadius,borderWidth:e.borderWidth,borderStyle:e.borderStyle,activeColorStyle:e.activeColorStyle,...e.itemStyle};return delete e.spacingY,delete e.contentHight,delete e.shadow,delete e.borderRadius,delete e.borderWidth,delete e.borderStyle,delete e.activeColorStyle,{...e,itemStyle:t}};C.__docgenInfo={description:"",methods:[],displayName:"MultiselectWithBasicItem"};var K,G,J;C.parameters={...C.parameters,docs:{...(K=C.parameters)==null?void 0:K.docs,source:{originalSource:`({
  ...args
}: TreeProps) => {
  const [selectedIds, setSelectedIds] = useState<string[]>(args.selectedIds ?? []);
  const [treeItems, setTreeItems] = useState<TreeItemMockMultiselect[]>([]);
  useEffect(() => {
    // eslint-disable-next-line react-hooks/set-state-in-effect
    setTreeItems(treeItemsMockMultiseclect);
  }, []);
  const handleItemSelected = (id: string, ignoreRemoveSelected = false, nodes: TreeNodeWithoutElements[] = []) => {
    if (nodes.length === 0) {
      return;
    }
    setSelectedIds(currentSelectedIds => getNewSelectedItems(id, currentSelectedIds, nodes, ignoreRemoveSelected));
  };
  return <Container maxWidth="400px">
            <TreeView id={args.id} {...cleanProps(args)} selectedIds={selectedIds} onSelect={handleItemSelected}>
                {treeItems.map(treeItem => renderTreeItemComponent(treeItem, selectedIds))}
            </TreeView>
        </Container>;
}`,...(J=(G=C.parameters)==null?void 0:G.docs)==null?void 0:J.source}}};const rt=["MultiselectWithBasicItem"];export{C as MultiselectWithBasicItem,rt as __namedExportsOrder,st as default};
