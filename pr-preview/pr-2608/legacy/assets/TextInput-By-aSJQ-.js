import{r as i,j as e}from"./iframe-6Whjq5pH.js";import{f as tt,t as et,u as st,v as rt,w as ot,x as at,p as lt}from"./fondue-icons369-CFcSFFIh.js";import{$ as b}from"./useFocusRing-CVkefuS2.js";import{L as it,a as ut}from"./LoadingCircle-DtfPUVdn.js";import{u as ct}from"./useMemoizedId-CGDB5O1i.js";import{F as k}from"./focusStyle-hm6eSJHh.js";import{m as c}from"./merge-DI-veSMP.js";import{V as p,a as nt}from"./validation-DNUG94y-.js";import{L as dt}from"./LegacyTooltip-UlVHa8Pi.js";const wt=(s=2e3)=>{const[r,u]=i.useState("idle"),a=i.useCallback(async n=>{u("idle");try{await navigator.clipboard.writeText(n),u("success")}catch{u("error")}},[]);return i.useEffect(()=>{let n;return s&&(r==="success"||r==="error")&&(n=setTimeout(()=>u("idle"),s)),()=>{s&&(r==="success"||r==="error")&&clearTimeout(n)}},[r,s]),{copy:a,status:r}};var ft=(s=>(s.Text="text",s.Password="password",s.Number="number",s.Search="search",s))(ft||{});const pt=({extraAction:s,disabled:r},u)=>{const{isFocusVisible:a,focusProps:n}=b();if(!s)return null;const x=r||s.disabled;return e.jsx("button",{className:c(["tw-flex tw-items-center tw-justify-center tw-transition-colors tw-rounded tw-p-1",x?"tw-cursor-default tw-text-text-disabled":"tw-text-text-weak hover:tw-bg-box-neutral-hover hover:tw-text-box-neutral-inverse-hover",a&&k]),onClick:s.onClick,"data-test-id":"fondue-extra-action-icon","aria-label":s.title.toLowerCase(),disabled:x,"aria-disabled":x,type:"button",ref:u,...n,children:s.icon})},R=i.forwardRef(pt),C=i.forwardRef(({id:s,type:r="text",decorator:u,validation:a=p.Default,clearable:n=!1,placeholder:x,required:S,obfuscated:m,disabled:o=!1,autocomplete:D=!1,dotted:z=!1,value:g="",copyable:O=!1,onChange:f,onEnterPressed:I,onBlur:v,onClear:y,onFocus:N,size:W,spellcheck:T,readonly:j,focusOnMount:E,selectable:_=!1,extraActions:V,maxLength:G,...U},H)=>{const d=i.useRef(null);i.useImperativeHandle(H,()=>d.current,[]);const{isFocusVisible:K,focusProps:w}=b({isTextInput:!0}),{isFocusVisible:q,focusProps:Y}=b(),{isFocusVisible:$,focusProps:J}=b(),{isFocusVisible:B,focusProps:Q}=b(),{copy:X,status:F}=wt(),[h,L]=i.useState(typeof m=="boolean"?m:r==="password");i.useEffect(()=>{const t=setTimeout(()=>{E&&d.current&&d.current.focus()},0);return()=>{clearTimeout(t)}},[E]),i.useEffect(()=>{typeof m=="boolean"&&L(m)},[m]);const Z=t=>{t.key==="Enter"&&I&&I(t)},M=()=>r==="password"?h?"password":"text":r,A=typeof T=="boolean"?{spellCheck:T}:null;return e.jsxs("div",{...U,className:c(["tw-flex tw-items-center tw-h-9 tw-gap-2 tw-px-3 tw-border tw-transition tw-rounded tw-text-body-small tw-font-sans tw-relative tw-bg-base dark:tw-bg-transparent",z?"tw-border-dashed":"tw-border-solid",o||j?"tw-bg-box-disabled dark:tw-bg-box-disabled hover:tw-cursor-not-allowed tw-border-line-weak dark:tw-border-line-weak":c(["focus-within:tw-border-line-xx-strong focus-within:hover:tw-border-line-xx-strong hover:tw-border-line-x-strong",nt[a],K&&!q&&!$&&!B&&k])]),"data-test-id":"fondue-text-input-component",children:[u?e.jsx("div",{className:c(["tw-flex tw-items-center tw-justify-center tw-pl-1",o?"tw-text-black-60":"tw-text-black-80"]),"data-test-id":"decorator",children:u}):null,e.jsx("input",{...w,id:ct(s),ref:d,className:c(["tw-w-full tw-grow tw-border-none tw-outline-none tw-bg-transparent tw-hide-input-arrows",o||j?"tw-text-text-disabled tw-placeholder-text-disabled dark:tw-text-black-30 dark:tw-placeholder-black-40 hover:tw-cursor-not-allowed":"tw-text-black tw-placeholder-black-60 dark:tw-text-white"]),onClick:()=>{var t;return(t=d.current)==null?void 0:t.focus()},onChange:t=>f==null?void 0:f(t.currentTarget.value),onBlur:t=>{var l;(l=w.onBlur)==null||l.call(w,t),v==null||v(t)},onKeyDown:Z,placeholder:x,value:g,type:M(),required:S,readOnly:j,disabled:o,onFocus:t=>{var l;(l=w.onFocus)==null||l.call(w,t),_&&t.target.select(),N&&N(t)},autoComplete:D?"on":"off",maxLength:G,size:W,"data-test-id":"text-input",...A}),V&&V.length>0&&V.map((t,l)=>{const P=`text-input-extra-action-${l}`;return t.tooltip?e.jsx(dt,{...t.tooltip,triggerElement:e.jsx(R,{extraAction:t,disabled:o})},P):e.jsx(R,{extraAction:t,disabled:o},P)}),`${g}`.length>0&&n&&e.jsx("button",{className:c(["tw-flex tw-items-center tw-justify-center tw-transition-colors tw-rounded",o?"tw-cursor-default tw-text-black-40":"tw-text-black-60  hover:tw-text-black-100",q&&k]),onClick:()=>{var t,l;(t=d.current)==null||t.focus(),(l=d.current)==null||l.setAttribute("value",""),f==null||f(""),y==null||y()},"data-test-id":"clear-icon",title:"Clear text input","aria-label":"clear text input",disabled:o,type:"button",...Y,children:e.jsx(tt,{})}),r==="password"&&e.jsx("button",{className:c(["tw-flex tw-items-center tw-justify-center tw-transition-colors tw-rounded",o?"tw-cursor-default tw-text-black-40":"tw-text-black-60 hover:tw-text-black-100",$&&k]),onClick:()=>L(!h),"data-test-id":"visibility-icon",title:"Toggle text visibility",type:"button","aria-label":`${h?"unveil":"obfuscate"} text input`,disabled:o,...J,children:h?e.jsx(et,{}):e.jsx(st,{})}),a===p.Loading&&e.jsx("span",{className:"tw-absolute tw-top-[-0.55rem] tw-right-[-0.55rem] tw-bg-white tw-rounded-full tw-p-[2px] tw-border tw-border-black-10",children:e.jsx(it,{size:ut.ExtraSmall})}),(a===p.Error||a===p.Warning)&&e.jsx("span",{className:c(["tw-flex tw-items-center tw-justify-center",a===p.Error&&"tw-text-text-negative",a===p.Warning&&"tw-text-text-warning"]),"data-test-id":"error-state-exclamation-mark-icon",children:e.jsx(rt,{})}),O&&e.jsxs("button",{className:c(["tw-flex tw-items-center tw-justify-center tw-transition-colors tw-rounded",o?"tw-cursor-default tw-text-black-40":"tw-text-black-60 hover:tw-text-black-100",B&&k]),onClick:()=>X(g),"data-test-id":"copy-icon",title:"Copy input text",disabled:o,type:"button",...Q,children:[F==="error"&&e.jsx("span",{className:"tw-text-box-negative-strong",children:e.jsx(ot,{})}),F==="idle"&&e.jsx(at,{}),F==="success"&&e.jsx("span",{className:"tw-text-box-positive-strong",children:e.jsx(lt,{})})]})]})});C.displayName="FondueTextInput";C.__docgenInfo={description:"@deprecated Use `TextInput` from `@frontify/fondue/components` instead. Also check {@link https://github.com/Frontify/fondue/blob/main/packages/components/MIGRATING.md#text-input the migration guide}.",methods:[],displayName:"FondueTextInput",props:{type:{defaultValue:{value:"TextInputType.Text",computed:!0},required:!1},validation:{defaultValue:{value:"Validation.Default",computed:!0},required:!1},clearable:{defaultValue:{value:"false",computed:!1},required:!1},disabled:{defaultValue:{value:"false",computed:!1},required:!1},autocomplete:{defaultValue:{value:"false",computed:!1},required:!1},dotted:{defaultValue:{value:"false",computed:!1},required:!1},value:{defaultValue:{value:"''",computed:!1},required:!1},copyable:{defaultValue:{value:"false",computed:!1},required:!1},selectable:{defaultValue:{value:"false",computed:!1},required:!1}}};export{C as T,ft as a};
