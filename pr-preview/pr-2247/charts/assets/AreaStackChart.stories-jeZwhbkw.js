import{j as A}from"./jsx-runtime-Cs3xynsW.js";import{f as Le,h as $e,d as je,i as _e,a as Fe,A as Be,c as Me,g as Ve,b as Ke,M as Ie,e as Re}from"./getAreaFillColors-C5OAuZ0S.js";import{c as Se,_,a as Ge,L as ae,e as Ye}from"./Legend-BB8plRNr.js";import{W as z,D as J,J as We,K as Xe,N as se,h as j,i as G,Y as Ue,u as ze,X as He,Z as Ze,x as Je,y as Qe,k as et,P as ie,_ as tt,c as nt,d as rt,e as at,T as st}from"./useMargin-DoP8rIqw.js";import{c as it}from"./createTheme-DCsEVv8u.js";import{e as x,r as w}from"./index-C3UhPIpD.js";import{g as ot}from"./getChildrenAndGrandchildrenWithProps-cHX0D5rT.js";import{l as ut}from"./D3ShapeFactories-DmOFQoOK.js";import{G as lt}from"./Group-Dg6-OZ10.js";import"./_commonjsHelpers-BosuxZz1.js";import"./pie-DtVSWFrF.js";import"./consts-BJsd9Pp1.js";import"./TooltipContent-H0clLoA2.js";import"./index-I7YMOKkn.js";var ct=["children","data","x","y","fill","className","curve","innerRef","defined"];function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}function dt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function mt(e){var t=e.children,n=e.data,r=n===void 0?[]:n,s=e.x,a=e.y,o=e.fill,i=o===void 0?"transparent":o,c=e.className,u=e.curve,d=e.innerRef,y=e.defined,S=y===void 0?function(){return!0}:y,f=dt(e,ct),h=ut({x:s,y:a,defined:S,curve:u});return t?x.createElement(x.Fragment,null,t({path:h})):x.createElement("path",H({ref:d,className:Se("visx-linepath",c),d:h(r)||"",fill:i,strokeLinecap:"round"},f))}var R=ft,F=pt;function ft(e){return e==null?void 0:e[0]}function pt(e){return e==null?void 0:e[1]}function Y(e){return function(){return e}}function yt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function oe(e,t){if((o=e.length)>1)for(var n=1,r,s,a=e[t[0]],o,i=a.length;n<o;++n)for(s=a,a=e[t[n]],r=0;r<i;++r)a[r][1]+=a[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function ue(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function ht(e,t){return e[t]}function vt(e){const t=[];return t.key=e,t}function gt(){var e=Y([]),t=ue,n=oe,r=ht;function s(a){var o=Array.from(e.apply(this,arguments),vt),i,c=o.length,u=-1,d;for(const y of a)for(i=0,++u;i<c;++i)(o[i][u]=[0,+r(y,o[i].key,u,a)]).data=y;for(i=0,d=yt(t(o));i<c;++i)o[d[i]].index=i;return n(o,d),o}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Y(Array.from(a)),s):e},s.value=function(a){return arguments.length?(r=typeof a=="function"?a:Y(+a),s):r},s.order=function(a){return arguments.length?(t=a==null?ue:typeof a=="function"?a:Y(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(n=a??oe,s):n},s}var le=function(t){var n;return t==null||(n=t.data)==null?void 0:n.stack},ce=function(t){return(R(t)+F(t))/2};function kt(e,t,n){var r=n?[ce,le]:[le,ce],s=r[0],a=r[1];return e.map(function(o,i){var c={key:o.key,data:o,xAccessor:s,yAccessor:a};return t.length>0&&i===0&&(n?c.xScale=function(u){return u.domain(z(u.domain().concat(t)))}:c.yScale=function(u){return u.domain(z(u.domain().concat(t)))}),c}).filter(function(o){return o})}var W=function(t){return t.stack};function St(e,t){var n={};return e.forEach(function(r){var s=r.props,a=s.dataKey,o=s.data,i=s.xAccessor,c=s.yAccessor;if(!(!i||!c)){var u=t?[c,i]:[i,c],d=u[0],y=u[1];o.forEach(function(S){var f=d(S),h=y(S),g=String(f);n[g]||(n[g]={stack:f,positiveSum:0,negativeSum:0}),n[g][a]=h,n[g][h>=0?"positiveSum":"negativeSum"]+=h})}}),Object.values(n)}function xt(e){var t=e.children,n=e.order,r=e.offset,s=w.useContext(J),a=s.horizontal,o=s.registerData,i=s.unregisterData,c=w.useMemo(function(){return ot(t)},[t]),u=w.useMemo(function(){return c.filter(function(f){return f.props.dataKey}).map(function(f){return f.props.dataKey})},[c]),d=w.useMemo(function(){return St(c,a)},[a,c]),y=w.useMemo(function(){var f=r?null:d.some(function(g){return g.negativeSum<0}),h=gt();return h.keys(u),n&&h.order(Le(n)),(r||f)&&h.offset($e(r||"diverging")),h(d)},[d,u,n,r]),S=w.useMemo(function(){return z(y.reduce(function(f,h){return h.forEach(function(g){var C=g[0],b=g[1];f.push(C),f.push(b)}),f},[]))},[y]);return w.useEffect(function(){var f=kt(y,S,a);return o(f),function(){return i(u)}},[u,S,a,y,o,i,c]),{seriesChildren:c,dataKeys:u,stackedData:y}}function bt(e,t,n){var r,s,a,o,i=e.xScale,c=e.yScale,u=e.point,d=(n?We:Xe)(e),y=(d==null?void 0:d.index)==null?null:t[d.index];return d&&y&&u?{index:d.index,datum:y,distanceX:n&&u.x>=((r=i(R(d.datum)))!=null?r:1/0)&&u.x<=((s=i(F(d.datum)))!=null?s:-1/0)?0:d.distanceX,distanceY:n?d.distanceY:u.y<=((a=c(R(d.datum)))!=null?a:-1/0)&&u.y>=((o=c(F(d.datum)))!=null?o:1/0)?0:d.distanceY}:null}var Pt=["data","dataKey","xAccessor","yAccessor","curve","PathComponent","lineProps","renderLine"];function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L.apply(this,arguments)}function At(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var de=function(t){return t};function xe(e){var t=e.PathComponent,n=t===void 0?"path":t,r=e.children,s=e.curve,a=e.enableEvents,o=a===void 0?!0:a,i=e.offset,c=e.onBlur,u=e.onFocus,d=e.onPointerMove,y=e.onPointerOut,S=e.onPointerUp,f=e.onPointerDown,h=e.order,g=e.renderLine,C=g===void 0?!0:g,b=w.useContext(J),P=b.colorScale,X=b.dataRegistry,B=b.horizontal,N=b.xScale,T=b.yScale,E=b.theme,$=xt({children:r,order:h,offset:i}),q=$.dataKeys,D=$.seriesChildren,ee=$.stackedData,te=w.useMemo(function(){var l=se(N)/2,k=se(T)/2;return B?{y:function(p){var v;return((v=j(T(W(p.data))))!=null?v:0)+k},x0:function(p){var v;return((v=j(N(R(p))))!=null?v:0)+l},x1:function(p){var v;return((v=j(N(F(p))))!=null?v:0)+l},defined:function(p){return G(T(W(p.data)))&&G(N(F(p)))}}:{x:function(p){var v;return((v=j(N(W(p.data))))!=null?v:0)+l},y0:function(p){var v;return((v=j(T(R(p))))!=null?v:0)+k},y1:function(p){var v;return((v=j(T(F(p))))!=null?v:0)+k},defined:function(p){return G(N(W(p.data)))&&G(T(F(p)))}}},[N,T,B]),M=w.useMemo(function(){return ee.map(function(l,k){var m,p,v,re=D.find(function(qe){return qe.props.dataKey===l.key}),O=(re==null?void 0:re.props)||{};O.data,O.dataKey,O.xAccessor,O.yAccessor,O.curve,O.PathComponent;var Ee=O.lineProps;O.renderLine;var De=At(O,Pt),Oe=L({fill:(m=(p=P==null?void 0:P(l.key))!=null?p:E==null||(v=E.colors)==null?void 0:v[0])!=null?m:"#222"},De);return{key:k+"-"+l.key,accessors:te,data:l,areaProps:Oe,lineProps:Ee}})},[ee,te,P,D,E]),Ne=w.useCallback(function(l){var k,m,p=(k=D.find(function(v){return v.props.dataKey===l.dataKey}))==null||(m=k.props)==null?void 0:m.data;return p?bt(l,p,B):null},[D,B]),ne=Ue+"-"+q.join("-"),V=ze({dataKey:q,enableEvents:o,findNearestDatum:Ne,onBlur:c,onFocus:u,onPointerMove:d,onPointerOut:y,onPointerUp:S,onPointerDown:f,source:ne,allowedSources:[He,ne]}),U=!!(u||c),Ce=w.useCallback(function(l){var k=l.glyphs;return U?k.map(function(m){return x.createElement(x.Fragment,{key:m.key},je(L({},m,{color:"transparent",onFocus:V.onFocus,onBlur:V.onBlur})))}):null},[U,V.onFocus,V.onBlur]);return q.some(function(l){return X.get(l)==null})||!N||!T||!P?null:x.createElement("g",{className:"visx-area-stack"},M.map(function(l){return x.createElement(_e,L({key:l.key,curve:s},l.accessors),function(k){var m=k.path;return x.createElement(n,L({className:"visx-area",stroke:"transparent",d:m(l.data)||""},l.areaProps,V))})}),C&&M.map(function(l){return x.createElement(mt,L({key:"line-"+l.key,x:l.accessors.x||l.accessors.x1,y:l.accessors.y||l.accessors.y1,defined:l.accessors.defined,curve:s},l.lineProps),function(k){var m=k.path;return x.createElement(n,L({className:"visx-line",fill:"transparent",stroke:l.areaProps.fill,strokeWidth:2,pointerEvents:"none"},l.lineProps,{d:m(l.data)||""}))})}),U&&M.map(function(l,k){var m=M[M.length-k-1];return x.createElement(Fe,{key:"glyphs-"+m.key,dataKey:m.key,data:m.data,xAccessor:m.accessors.x||m.accessors.x1,yAccessor:m.accessors.y||m.accessors.y1,xScale:de,yScale:de,renderGlyphs:Ce})}))}xe.propTypes={children:_.oneOfType([_.element,_.arrayOf(_.element)]).isRequired,renderLine:_.bool};function wt(e){return x.createElement(xe,e)}const Tt=e=>{if(!e[0])return 0;let t=0;const n=e[0].dataPoints.length;for(let r=0;r<n;r++){const s=e.reduce((a,o)=>{var i;return a+(((i=o==null?void 0:o.dataPoints[r])==null?void 0:i.value)||0)},0);t=Math.max(t,s)}return t},Nt=(e,t)=>{const n=Tt(e),r=Ze(Math.max(n,t??0)),s=Math.ceil(Math.max(n,t||0)/r)*r;return s===0?[0,1]:[0,s]},Ct=(e,t)=>{const[n,r]=e,s=(r-n)/(t-1);return Array.from({length:t}).map((o,i)=>Math.ceil(i*s))},me=e=>e<1e3?e:e>1e5?Math.ceil(e/(1024*100))*(1024*100):Math.ceil(e/1024)*1024,Et=e=>[me(e[0]),me(e[1])],be=({series:e})=>{const t=[...e].reverse();return A.jsx(wt,{children:t.map((n,r)=>A.jsx(Be,{dataKey:n.name,data:n.dataPoints,xAccessor:Je,yAccessor:Qe,fillOpacity:.2,lineProps:{strokeWidth:2},fill:Ge(t.length-1-r)},n.name))})};be.__docgenInfo={description:"",methods:[],displayName:"AreaStack",props:{series:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    dataPoints: LineChartDataPoint[];
    name: string;
}`,signature:{properties:[{key:"dataPoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    timestamp: Date;
    value: number | null;
    description?: string;
    valueContext?: string;
}`,signature:{properties:[{key:"timestamp",value:{name:"Date",required:!0}},{key:"value",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"valueContext",value:{name:"string",required:!1}}]}}],raw:"LineChartDataPoint[]",required:!0}},{key:"name",value:{name:"string",required:!0}}]}}],raw:"LineChartSeries[]"},description:""}}};function Dt(e){return"bandwidth"in e?e.bandwidth():0}var Ot=["top","left","scale","width","stroke","strokeWidth","strokeDasharray","className","children","numTicks","lineStyle","offset","tickValues"];function Z(){return Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}function qt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Pe(e){var t=e.top,n=t===void 0?0:t,r=e.left,s=r===void 0?0:r,a=e.scale,o=e.width,i=e.stroke,c=i===void 0?"#eaf0f6":i,u=e.strokeWidth,d=u===void 0?1:u,y=e.strokeDasharray,S=e.className,f=e.children,h=e.numTicks,g=h===void 0?10:h,C=e.lineStyle,b=e.offset,P=e.tickValues,X=qt(e,Ot),B=P??et(a,g),N=(b??0)+Dt(a)/2,T=B.map(function(E,$){var q,D=((q=j(a(E)))!=null?q:0)+N;return{index:$,from:new ie({x:0,y:D}),to:new ie({x:o,y:D})}});return x.createElement(lt,{className:Se("visx-rows",S),top:n,left:s},f?f({lines:T}):T.map(function(E){var $=E.from,q=E.to,D=E.index;return x.createElement(tt,Z({key:"row-line-"+D,from:$,to:q,stroke:c,strokeWidth:d,strokeDasharray:y,style:C},X))}))}Pe.propTypes={tickValues:_.array,width:_.number.isRequired};const Ae=({tickValues:e})=>{const{yScale:t,innerWidth:n,margin:r}=w.useContext(J);return t?A.jsx(Pe,{left:(r==null?void 0:r.left)||0,width:n||0,scale:t,numTicks:5,tickValues:e}):null};Ae.__docgenInfo={description:"",methods:[],displayName:"GridRows",props:{tickValues:{required:!0,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:""}}};const Lt=5,$t="storage",jt="storage",fe="top",Q=({width:e,height:t,series:n,missingValueLabel:r,locale:s,hideLegend:a=!1,legendPosition:o=fe,markLine:i,valueFormatter:c,childSumLabel:u,domain:d=jt})=>{const y=Me(n),S=it(Ve(n.length,y.length)),f=Nt(n,(i==null?void 0:i.value)??0),h=d===$t?Et(f):f,g=nt(h,Lt),C=Ct(h,g.length),b=rt({ticks:C,tickLabelStyle:S.axisStyles.y.left.tickLabel,valueFormatter:c,tickLength:S.axisStyles.y.left.tickLength});return A.jsxs("div",{className:"tw-flex tw-flex-col tw-gap-6",children:[!a&&o===fe&&A.jsx(ae,{names:n.map(P=>P.name),style:"line"}),A.jsxs(at,{theme:S,xScale:{type:"time"},yScale:{type:"linear",domain:h},height:t,width:e,margin:b,children:[A.jsx(Ae,{tickValues:C}),A.jsx(be,{series:n}),A.jsx(Ke,{linearScaleTicks:C,valueFormatter:c,locale:s,series:n}),i&&A.jsx(Ie,{...i}),A.jsx(st,{crossHairStyle:"line",hideGlyphs:!1,colorAccessor:P=>Ye(P,n),missingValueLabel:r,childSumLabel:u,valueFormatter:c,locale:s,stackingGlyphs:!0})]}),!a&&o==="bottom"&&A.jsx(ae,{names:n.map(P=>P.name),style:"line"})]})};Q.__docgenInfo={description:"",methods:[],displayName:"AreaStackChart",props:{series:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    dataPoints: AreaStackChartDataPoint[];
    name: string;
}`,signature:{properties:[{key:"dataPoints",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    timestamp: Date;
    value: number | null;
    description?: string;
}`,signature:{properties:[{key:"timestamp",value:{name:"Date",required:!0}},{key:"value",value:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}],required:!0}},{key:"description",value:{name:"string",required:!1}}]}}],raw:"AreaStackChartDataPoint[]",required:!0}},{key:"name",value:{name:"string",required:!0}}]}}],raw:"AreaStackChartSeries[]"},description:""},height:{required:!0,tsType:{name:"number"},description:""},width:{required:!1,tsType:{name:"number"},description:""},missingValueLabel:{required:!1,tsType:{name:"string"},description:""},childSumLabel:{required:!1,tsType:{name:"string"},description:""},locale:{required:!1,tsType:{name:"string"},description:""},hideLegend:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},legendPosition:{required:!1,tsType:{name:"union",raw:"'top' | 'bottom'",elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'bottom'"}]},description:"",defaultValue:{value:"'top'",computed:!1}},markLine:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    name: string;
    value: number;
}`,signature:{properties:[{key:"name",value:{name:"string",required:!0}},{key:"value",value:{name:"number",required:!0}}]}},description:""},valueFormatter:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => string",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"string"}}},description:""},domain:{required:!1,tsType:{name:"union",raw:"'storage' | 'count'",elements:[{name:"literal",value:"'storage'"},{name:"literal",value:"'count'"}]},description:"",defaultValue:{value:"'storage'",computed:!1}}}};const tn={title:"Charts/Area Stack Chart",component:Q,parameters:{status:{type:"released"}},argTypes:{series:{name:"series",type:{name:"other",value:"AreaStackChartSeries[]",required:!0},description:"An array of up to three series to be displayed in the chart."},height:{name:"height",type:{name:"number",required:!0},description:"The height of the chart in pixels."},width:{name:"width",type:{name:"number",required:!1},description:"The width of the chart in pixels. If not provided, the chart will adjust its width to the container"},missingValueLabel:{name:"missingValueLabel",type:{name:"string",required:!1},description:'The label to be displayed for missing values. E.g. "No data".',defaultValue:"-",table:{type:{summary:"string"},defaultValue:{summary:"-"}}},locale:{name:"locale",type:{name:"string",required:!1},description:"The locale to be used for formatting the date axis labels.",table:{type:{summary:"string"},defaultValue:{summary:"Browser locale"}}},hideLegend:{name:"hideLegend",type:{name:"boolean",required:!1},description:"Hides the legend if set to true.",table:{type:{summary:"boolean"},defaultValue:{summary:"false"}}},legendPosition:{name:"legendPosition",type:{name:"other",value:"top | bottom",required:!1},description:"Controls whether the legend is placed above or below the chart.",table:{type:{summary:"top | bottom"},defaultValue:{summary:"top"}}},markLine:{name:"markLine",type:{name:"other",value:"MarkLineProps",required:!1},description:"Creates a horizontal line on the chart, marking a specific value."},valueFormatter:{name:"valueFormatter",type:{name:"other",value:"(value: number) => string",required:!1},description:"An optional function to format the displayed values (for example for adding units)."}}},_t=1024,Ft=(e,t=0)=>{const n=parseInt((e==null?void 0:e.toString())||"0",10),r=Math.floor((n.toString().length-1)/3),s=["B","KB","MB","GB","TB","PB","EB"][r];return t===0?`${Math.ceil(parseFloat((n/1024**r).toFixed()))} ${s}`:`${(n/_t**r).toFixed(t)} ${s}`},Bt=1024*1024,Mt=e=>Ft(e*Bt,1),we=e=>A.jsx(Q,{...e}),Vt=e=>`${e.toFixed(2)}°F`,Te=(()=>{const e=[],t=[],n=[];for(const r of Re)e.push({value:parseInt(r.Austin,10),timestamp:new Date(r.date)}),t.push({value:parseInt(r["New York"],10),timestamp:new Date(r.date)}),n.push({value:parseInt(r["San Francisco"],10),timestamp:new Date(r.date)});return[{name:"Austin",dataPoints:e},{name:"New York",dataPoints:t},{name:"San Francisco",dataPoints:n}]})(),K=we.bind({});K.args={series:Te,width:1e3,height:500,valueFormatter:Mt,childSumLabel:"Total",markLine:{name:"Freezing",value:1500},domain:"storage"};const I=we.bind({});I.args={series:Te,width:1e3,height:500,valueFormatter:Vt,childSumLabel:"Total"};var pe,ye,he;K.parameters={...K.parameters,docs:{...(pe=K.parameters)==null?void 0:pe.docs,source:{originalSource:"args => <AreaStackChart {...args} />",...(he=(ye=K.parameters)==null?void 0:ye.docs)==null?void 0:he.source}}};var ve,ge,ke;I.parameters={...I.parameters,docs:{...(ve=I.parameters)==null?void 0:ve.docs,source:{originalSource:"args => <AreaStackChart {...args} />",...(ke=(ge=I.parameters)==null?void 0:ge.docs)==null?void 0:ke.source}}};const nn=["AreaStackedChartStorage","AreaStackedChart"];export{I as AreaStackedChart,K as AreaStackedChartStorage,nn as __namedExportsOrder,tn as default};
