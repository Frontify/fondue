import{r as g,R as oe}from"./index-v7USjxUg.js";import{i as Ee,$ as Ke,b as se,d as Pe,g as ee,j as ce,k as Fe}from"./useFocusable-BRFkliNn.js";import{$ as Ce}from"./chain-C8AhrK0W.js";import{$ as te,a as ne}from"./useEffectEvent-BaECT7_f.js";import{l as Re,m as Le,f as de}from"./useFocusRing-CP9UJNUw.js";import{$ as le}from"./isScrollable-BSEN4xi5.js";import{r as ke}from"./index-voQlCD4e.js";import{b as Ie}from"./FocusScope-Drcq722v.js";import{$ as xe}from"./context-BFA77VTM.js";import{c as Ne}from"./SelectionManager-BD4p7d3N.js";import{j as fe}from"./jsx-runtime-DH9XN8A8.js";function he(i,e){const t=g.useRef(!0),n=g.useRef(null);te(()=>(t.current=!0,()=>{t.current=!1}),[]),te(()=>{t.current?t.current=!1:(!n.current||e.some((l,r)=>!Object.is(l,n[r])))&&i(),n.current=e},e)}function Me(i,e){const t=[];for(;i&&i!==document.documentElement;)le(i,e)&&t.push(i),i=i.parentElement;return t}let Ae=0;const J=new Map;function Be(i){let[e,t]=g.useState();return te(()=>{if(!i)return;let n=J.get(i);if(n)t(n.element.id);else{let l=`react-aria-description-${Ae++}`;t(l);let r=document.createElement("div");r.id=l,r.style.display="none",r.textContent=i,document.body.appendChild(r),n={refCount:0,element:r},J.set(i,n)}return n.refCount++,()=>{n&&--n.refCount===0&&(n.element.remove(),J.delete(i))}},[i]),{"aria-describedby":i?e:void 0}}function z(i,e,t,n){let l=ne(t),r=t==null;g.useEffect(()=>{if(r||!i.current)return;let c=i.current;return c.addEventListener(e,l,n),()=>{c.removeEventListener(e,l,n)}},[i,e,n,r,l])}function De(i,e){let t=pe(i,e,"left"),n=pe(i,e,"top"),l=e.offsetWidth,r=e.offsetHeight,c=i.scrollLeft,d=i.scrollTop,{borderTopWidth:f,borderLeftWidth:m,scrollPaddingTop:v,scrollPaddingRight:K,scrollPaddingBottom:p,scrollPaddingLeft:a}=getComputedStyle(i),P=c+parseInt(m,10),S=d+parseInt(f,10),N=P+i.clientWidth,x=S+i.clientHeight,E=parseInt(v,10)||0,w=parseInt(p,10)||0,R=parseInt(K,10)||0,T=parseInt(a,10)||0;t<=c+T?c=t-parseInt(m,10)-T:t+l>N-R&&(c+=t+l-N+R),n<=S+E?d=n-parseInt(f,10)-E:n+r>x-w&&(d+=n+r-x+w),i.scrollLeft=c,i.scrollTop=d}function pe(i,e,t){const n=t==="left"?"offsetLeft":"offsetTop";let l=0;for(;e.offsetParent&&(l+=e[n],e.offsetParent!==i);){if(e.offsetParent.contains(i)){l-=i[n];break}e=e.offsetParent}return l}function ye(i,e){if(i&&document.contains(i)){let c=document.scrollingElement||document.documentElement;if(window.getComputedStyle(c).overflow==="hidden"){let f=Me(i);for(let m of f)De(m,i)}else{var t;let{left:f,top:m}=i.getBoundingClientRect();i==null||(t=i.scrollIntoView)===null||t===void 0||t.call(i,{block:"nearest"});let{left:v,top:K}=i.getBoundingClientRect();if(Math.abs(f-v)>1||Math.abs(m-K)>1){var n,l,r;e==null||(l=e.containingElement)===null||l===void 0||(n=l.scrollIntoView)===null||n===void 0||n.call(l,{block:"center",inline:"center"}),(r=i.scrollIntoView)===null||r===void 0||r.call(i,{block:"nearest"})}}}}const Oe="react-aria-clear-focus",He="react-aria-focus",Se="react-aria-update-activedescendant";function H(i){return Re()?i.metaKey:i.ctrlKey}let U=!1,Q=0;function ie(){U=!0,setTimeout(()=>{U=!1},50)}function ge(i){i.pointerType==="touch"&&ie()}function We(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",ge):document.addEventListener("touchend",ie),Q++,()=>{Q--,!(Q>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",ge):document.removeEventListener("touchend",ie))}}function ct(i){let{onHoverStart:e,onHoverChange:t,onHoverEnd:n,isDisabled:l}=i,[r,c]=g.useState(!1),d=g.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;g.useEffect(We,[]);let{hoverProps:f,triggerHoverEnd:m}=g.useMemo(()=>{let v=(a,P)=>{if(d.pointerType=P,l||P==="touch"||d.isHovered||!a.currentTarget.contains(a.target))return;d.isHovered=!0;let S=a.currentTarget;d.target=S,e&&e({type:"hoverstart",target:S,pointerType:P}),t&&t(!0),c(!0)},K=(a,P)=>{if(d.pointerType="",d.target=null,P==="touch"||!d.isHovered)return;d.isHovered=!1;let S=a.currentTarget;n&&n({type:"hoverend",target:S,pointerType:P}),t&&t(!1),c(!1)},p={};return typeof PointerEvent<"u"?(p.onPointerEnter=a=>{U&&a.pointerType==="mouse"||v(a,a.pointerType)},p.onPointerLeave=a=>{!l&&a.currentTarget.contains(a.target)&&K(a,a.pointerType)}):(p.onTouchStart=()=>{d.ignoreEmulatedMouseEvents=!0},p.onMouseEnter=a=>{!d.ignoreEmulatedMouseEvents&&!U&&v(a,"mouse"),d.ignoreEmulatedMouseEvents=!1},p.onMouseLeave=a=>{!l&&a.currentTarget.contains(a.target)&&K(a,"mouse")}),{hoverProps:p,triggerHoverEnd:K}},[e,t,n,l,d]);return g.useEffect(()=>{l&&m({currentTarget:d.target},d.pointerType)},[l]),{hoverProps:f,isHovered:r}}const ze=500;function Ue(i){let{isDisabled:e,onLongPressStart:t,onLongPressEnd:n,onLongPress:l,threshold:r=ze,accessibilityDescription:c}=i;const d=g.useRef(void 0);let{addGlobalListener:f,removeGlobalListener:m}=Ee(),{pressProps:v}=Ke({isDisabled:e,onPressStart(p){if(p.continuePropagation(),(p.pointerType==="mouse"||p.pointerType==="touch")&&(t&&t({...p,type:"longpressstart"}),d.current=setTimeout(()=>{p.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),l&&l({...p,type:"longpress"}),d.current=void 0},r),p.pointerType==="touch")){let a=P=>{P.preventDefault()};f(p.target,"contextmenu",a,{once:!0}),f(window,"pointerup",()=>{setTimeout(()=>{m(p.target,"contextmenu",a)},30)},{once:!0})}},onPressEnd(p){d.current&&clearTimeout(d.current),n&&(p.pointerType==="mouse"||p.pointerType==="touch")&&n({...p,type:"longpressend"})}}),K=Be(l&&!e?c:void 0);return{longPressProps:se(v,K)}}let _=new Map;function je(i){let{locale:e}=xe(),t=e+(i?Object.entries(i).sort((l,r)=>l[0]<r[0]?-1:1).join():"");if(_.has(t))return _.get(t);let n=new Intl.Collator(e,i);return _.set(t,n),n}function re(i){return Le()?i.altKey:i.ctrlKey}const Ge=1e3;function Ve(i){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:n}=i,l=g.useRef({search:"",timeout:void 0}).current,r=c=>{let d=Ye(c.key);if(!(!d||c.ctrlKey||c.metaKey||!c.currentTarget.contains(c.target))){if(d===" "&&l.search.trim().length>0&&(c.preventDefault(),"continuePropagation"in c||c.stopPropagation()),l.search+=d,e.getKeyForSearch!=null){let f=e.getKeyForSearch(l.search,t.focusedKey);f==null&&(f=e.getKeyForSearch(l.search)),f!=null&&(t.setFocusedKey(f),n&&n(f))}clearTimeout(l.timeout),l.timeout=setTimeout(()=>{l.search=""},Ge)}};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?r:void 0}}}function Ye(i){return i.length===1||!/^[A-Z]/i.test(i)?i:""}function Xe(i){let{selectionManager:e,keyboardDelegate:t,ref:n,autoFocus:l=!1,shouldFocusWrap:r=!1,disallowEmptySelection:c=!1,disallowSelectAll:d=!1,selectOnFocus:f=e.selectionBehavior==="replace",disallowTypeAhead:m=!1,shouldUseVirtualFocus:v,allowsTabNavigation:K=!1,isVirtualized:p,scrollRef:a=n,linkBehavior:P="action"}=i,{direction:S}=xe(),N=Pe(),x=s=>{var h;if(s.altKey&&s.key==="Tab"&&s.preventDefault(),!(!((h=n.current)===null||h===void 0)&&h.contains(s.target)))return;const y=(u,B)=>{if(u!=null){if(e.isLink(u)&&P==="selection"&&f&&!re(s)){var I;ke.flushSync(()=>{e.setFocusedKey(u,B)});let ue=(I=a.current)===null||I===void 0?void 0:I.querySelector(`[data-key="${CSS.escape(u.toString())}"]`),ae=e.getItemProps(u);ue&&N.open(ue,s,ae.href,ae.routerOptions);return}if(e.setFocusedKey(u,B),e.isLink(u)&&P==="override")return;s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(u):f&&!re(s)&&e.replaceSelection(u)}};switch(s.key){case"ArrowDown":if(t.getKeyBelow){var b,D,o;let u=e.focusedKey!=null?(b=t.getKeyBelow)===null||b===void 0?void 0:b.call(t,e.focusedKey):(D=t.getFirstKey)===null||D===void 0?void 0:D.call(t);u==null&&r&&(u=(o=t.getFirstKey)===null||o===void 0?void 0:o.call(t,e.focusedKey)),u!=null&&(s.preventDefault(),y(u))}break;case"ArrowUp":if(t.getKeyAbove){var $,C,j;let u=e.focusedKey!=null?($=t.getKeyAbove)===null||$===void 0?void 0:$.call(t,e.focusedKey):(C=t.getLastKey)===null||C===void 0?void 0:C.call(t);u==null&&r&&(u=(j=t.getLastKey)===null||j===void 0?void 0:j.call(t,e.focusedKey)),u!=null&&(s.preventDefault(),y(u))}break;case"ArrowLeft":if(t.getKeyLeftOf){var G,V,Y;let u=e.focusedKey!=null?(G=t.getKeyLeftOf)===null||G===void 0?void 0:G.call(t,e.focusedKey):null;u==null&&r&&(u=S==="rtl"?(V=t.getFirstKey)===null||V===void 0?void 0:V.call(t,e.focusedKey):(Y=t.getLastKey)===null||Y===void 0?void 0:Y.call(t,e.focusedKey)),u!=null&&(s.preventDefault(),y(u,S==="rtl"?"first":"last"))}break;case"ArrowRight":if(t.getKeyRightOf){var X,q,Z;let u=e.focusedKey!=null?(X=t.getKeyRightOf)===null||X===void 0?void 0:X.call(t,e.focusedKey):null;u==null&&r&&(u=S==="rtl"?(q=t.getLastKey)===null||q===void 0?void 0:q.call(t,e.focusedKey):(Z=t.getFirstKey)===null||Z===void 0?void 0:Z.call(t,e.focusedKey)),u!=null&&(s.preventDefault(),y(u,S==="rtl"?"last":"first"))}break;case"Home":if(t.getFirstKey){if(e.focusedKey===null&&s.shiftKey)return;s.preventDefault();let u=t.getFirstKey(e.focusedKey,H(s));e.setFocusedKey(u),u!=null&&(H(s)&&s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(u):f&&e.replaceSelection(u))}break;case"End":if(t.getLastKey){if(e.focusedKey===null&&s.shiftKey)return;s.preventDefault();let u=t.getLastKey(e.focusedKey,H(s));e.setFocusedKey(u),u!=null&&(H(s)&&s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(u):f&&e.replaceSelection(u))}break;case"PageDown":if(t.getKeyPageBelow&&e.focusedKey!=null){let u=t.getKeyPageBelow(e.focusedKey);u!=null&&(s.preventDefault(),y(u))}break;case"PageUp":if(t.getKeyPageAbove&&e.focusedKey!=null){let u=t.getKeyPageAbove(e.focusedKey);u!=null&&(s.preventDefault(),y(u))}break;case"a":H(s)&&e.selectionMode==="multiple"&&d!==!0&&(s.preventDefault(),e.selectAll());break;case"Escape":!c&&e.selectedKeys.size!==0&&(s.stopPropagation(),s.preventDefault(),e.clearSelection());break;case"Tab":if(!K){if(s.shiftKey)n.current.focus();else{let u=Ie(n.current,{tabbable:!0}),B,I;do I=u.lastChild(),I&&(B=I);while(I);B&&!B.contains(document.activeElement)&&ce(B)}break}}},E=g.useRef({top:0,left:0});z(a,"scroll",p?void 0:()=>{var s,h,y,b;E.current={top:(y=(s=a.current)===null||s===void 0?void 0:s.scrollTop)!==null&&y!==void 0?y:0,left:(b=(h=a.current)===null||h===void 0?void 0:h.scrollLeft)!==null&&b!==void 0?b:0}});let w=s=>{if(e.isFocused){s.currentTarget.contains(s.target)||e.setFocused(!1);return}if(s.currentTarget.contains(s.target)){if(e.setFocused(!0),e.focusedKey==null){var h,y;let o=C=>{C!=null&&(e.setFocusedKey(C),f&&e.replaceSelection(C))},$=s.relatedTarget;var b,D;$&&s.currentTarget.compareDocumentPosition($)&Node.DOCUMENT_POSITION_FOLLOWING?o((b=e.lastSelectedKey)!==null&&b!==void 0?b:(h=t.getLastKey)===null||h===void 0?void 0:h.call(t)):o((D=e.firstSelectedKey)!==null&&D!==void 0?D:(y=t.getFirstKey)===null||y===void 0?void 0:y.call(t))}else!p&&a.current&&(a.current.scrollTop=E.current.top,a.current.scrollLeft=E.current.left);if(e.focusedKey!=null&&a.current){let o=a.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);o&&(o.contains(document.activeElement)||ce(o),de()==="keyboard"&&ye(o,{containingElement:n.current}))}}},R=s=>{s.currentTarget.contains(s.relatedTarget)||e.setFocused(!1)},T=g.useRef(!1);z(n,He,v?s=>{let{detail:h}=s;s.stopPropagation(),e.setFocused(!0),(h==null?void 0:h.focusStrategy)==="first"&&(T.current=!0)}:void 0);let M=ne(()=>{var s,h;let y=(h=(s=t.getFirstKey)===null||s===void 0?void 0:s.call(t))!==null&&h!==void 0?h:null;if(y==null){var b;(b=n.current)===null||b===void 0||b.dispatchEvent(new CustomEvent(Se,{cancelable:!0,bubbles:!0})),e.collection.size>0&&(T.current=!1)}else e.setFocusedKey(y),T.current=!1});he(()=>{T.current&&M()},[e.collection,M]);let A=ne(()=>{e.collection.size>0&&(T.current=!1)});he(()=>{A()},[e.focusedKey,A]),z(n,Oe,v?s=>{s.stopPropagation(),e.setFocused(!1),e.setFocusedKey(null)}:void 0);const L=g.useRef(l);g.useEffect(()=>{if(L.current){var s,h;let D=null;var y;l==="first"&&(D=(y=(s=t.getFirstKey)===null||s===void 0?void 0:s.call(t))!==null&&y!==void 0?y:null);var b;l==="last"&&(D=(b=(h=t.getLastKey)===null||h===void 0?void 0:h.call(t))!==null&&b!==void 0?b:null);let o=e.selectedKeys;if(o.size){for(let $ of o)if(e.canSelectItem($)){D=$;break}}e.setFocused(!0),e.setFocusedKey(D),D==null&&!v&&n.current&&ee(n.current)}},[]);let O=g.useRef(e.focusedKey);g.useEffect(()=>{if(e.isFocused&&e.focusedKey!=null&&(e.focusedKey!==O.current||L.current)&&a.current&&n.current){let s=de(),h=n.current.querySelector(`[data-key="${CSS.escape(e.focusedKey.toString())}"]`);if(!h)return;(s==="keyboard"||L.current)&&(De(a.current,h),s!=="virtual"&&ye(h,{containingElement:n.current}))}!v&&e.isFocused&&e.focusedKey==null&&O.current!=null&&n.current&&ee(n.current),O.current=e.focusedKey,L.current=!1}),z(n,"react-aria-focus-scope-restore",s=>{s.preventDefault(),e.setFocused(!0)});let k={onKeyDown:x,onFocus:w,onBlur:R,onMouseDown(s){a.current===s.target&&s.preventDefault()}},{typeSelectProps:F}=Ve({keyboardDelegate:t,selectionManager:e});m||(k=se(F,k));let W;return v?W=-1:W=e.focusedKey==null?0:-1,{collectionProps:{...k,tabIndex:W}}}function dt(i){let{id:e,selectionManager:t,key:n,ref:l,shouldSelectOnPressUp:r,shouldUseVirtualFocus:c,focus:d,isDisabled:f,onAction:m,allowsDifferentPressOrigin:v,linkBehavior:K="action"}=i,p=Pe();e=Ce(e);let a=o=>{if(o.pointerType==="keyboard"&&re(o))t.toggleSelection(n);else{if(t.selectionMode==="none")return;if(t.isLink(n)){if(K==="selection"&&l.current){let $=t.getItemProps(n);p.open(l.current,o,$.href,$.routerOptions),t.setSelectedKeys(t.selectedKeys);return}else if(K==="override"||K==="none")return}t.selectionMode==="single"?t.isSelected(n)&&!t.disallowEmptySelection?t.toggleSelection(n):t.replaceSelection(n):o&&o.shiftKey?t.extendSelection(n):t.selectionBehavior==="toggle"||o&&(H(o)||o.pointerType==="touch"||o.pointerType==="virtual")?t.toggleSelection(n):t.replaceSelection(n)}};g.useEffect(()=>{if(n===t.focusedKey&&t.isFocused)if(!c)d?d():document.activeElement!==l.current&&l.current&&ee(l.current);else{var $;let C=new CustomEvent(Se,{cancelable:!0,bubbles:!0});($=l.current)===null||$===void 0||$.dispatchEvent(C)}},[l,n,t.focusedKey,t.childFocusStrategy,t.isFocused,c]),f=f||t.isDisabled(n);let P={};!c&&!f?P={tabIndex:n===t.focusedKey?0:-1,onFocus(o){o.target===l.current&&t.setFocusedKey(n)}}:f&&(P.onMouseDown=o=>{o.preventDefault()});let S=t.isLink(n)&&K==="override",N=t.isLink(n)&&K!=="selection"&&K!=="none",x=!f&&t.canSelectItem(n)&&!S,E=(m||N)&&!f,w=E&&(t.selectionBehavior==="replace"?!x:!x||t.isEmpty),R=E&&x&&t.selectionBehavior==="replace",T=w||R,M=g.useRef(null),A=T&&x,L=g.useRef(!1),O=g.useRef(!1),k=o=>{if(m&&m(),N&&l.current){let $=t.getItemProps(n);p.open(l.current,o,$.href,$.routerOptions)}},F={};r?(F.onPressStart=o=>{M.current=o.pointerType,L.current=A,o.pointerType==="keyboard"&&(!T||me())&&a(o)},v?(F.onPressUp=w?void 0:o=>{o.pointerType==="mouse"&&x&&a(o)},F.onPress=w?k:o=>{o.pointerType!=="keyboard"&&o.pointerType!=="mouse"&&x&&a(o)}):F.onPress=o=>{if(w||R&&o.pointerType!=="mouse"){if(o.pointerType==="keyboard"&&!be())return;k(o)}else o.pointerType!=="keyboard"&&x&&a(o)}):(F.onPressStart=o=>{M.current=o.pointerType,L.current=A,O.current=w,x&&(o.pointerType==="mouse"&&!w||o.pointerType==="keyboard"&&(!E||me()))&&a(o)},F.onPress=o=>{(o.pointerType==="touch"||o.pointerType==="pen"||o.pointerType==="virtual"||o.pointerType==="keyboard"&&T&&be()||o.pointerType==="mouse"&&O.current)&&(T?k(o):x&&a(o))}),P["data-key"]=n,F.preventFocusOnPress=c;let{pressProps:W,isPressed:s}=Ke(F),h=R?o=>{M.current==="mouse"&&(o.stopPropagation(),o.preventDefault(),k(o))}:void 0,{longPressProps:y}=Ue({isDisabled:!A,onLongPress(o){o.pointerType==="touch"&&(a(o),t.setSelectionBehavior("toggle"))}}),b=o=>{M.current==="touch"&&L.current&&o.preventDefault()},D=t.isLink(n)?o=>{Fe.isOpening||o.preventDefault()}:void 0;return{itemProps:se(P,x||w?W:{},A?y:{},{onDoubleClick:h,onDragStartCapture:b,onClick:D,id:e}),isPressed:s,isSelected:t.isSelected(n),isFocused:t.isFocused&&t.focusedKey===n,isDisabled:f,allowsSelection:x,hasAction:T}}function be(){let i=window.event;return(i==null?void 0:i.key)==="Enter"}function me(){let i=window.event;return(i==null?void 0:i.key)===" "||(i==null?void 0:i.code)==="Space"}class $e{getItemRect(e){let t=this.ref.current;if(!t)return null;let n=e!=null?t.querySelector(`[data-key="${CSS.escape(e.toString())}"]`):null;if(!n)return null;let l=t.getBoundingClientRect(),r=n.getBoundingClientRect();return{x:r.left-l.left+t.scrollLeft,y:r.top-l.top+t.scrollTop,width:r.width,height:r.height}}getContentSize(){let e=this.ref.current;var t,n;return{width:(t=e==null?void 0:e.scrollWidth)!==null&&t!==void 0?t:0,height:(n=e==null?void 0:e.scrollHeight)!==null&&n!==void 0?n:0}}getVisibleRect(){let e=this.ref.current;var t,n,l,r;return{x:(t=e==null?void 0:e.scrollLeft)!==null&&t!==void 0?t:0,y:(n=e==null?void 0:e.scrollTop)!==null&&n!==void 0?n:0,width:(l=e==null?void 0:e.offsetWidth)!==null&&l!==void 0?l:0,height:(r=e==null?void 0:e.offsetHeight)!==null&&r!==void 0?r:0}}constructor(e){this.ref=e}}class qe{isDisabled(e){var t;return this.disabledBehavior==="all"&&(((t=e.props)===null||t===void 0?void 0:t.isDisabled)||this.disabledKeys.has(e.key))}findNextNonDisabled(e,t){let n=e;for(;n!=null;){let l=this.collection.getItem(n);if((l==null?void 0:l.type)==="item"&&!this.isDisabled(l))return n;n=t(n)}return null}getNextKey(e){let t=e;return t=this.collection.getKeyAfter(t),this.findNextNonDisabled(t,n=>this.collection.getKeyAfter(n))}getPreviousKey(e){let t=e;return t=this.collection.getKeyBefore(t),this.findNextNonDisabled(t,n=>this.collection.getKeyBefore(n))}findKey(e,t,n){let l=e,r=this.layoutDelegate.getItemRect(l);if(!r||l==null)return null;let c=r;do{if(l=t(l),l==null)break;r=this.layoutDelegate.getItemRect(l)}while(r&&n(c,r)&&l!=null);return l}isSameRow(e,t){return e.y===t.y||e.x!==t.x}isSameColumn(e,t){return e.x===t.x||e.y!==t.y}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getNextKey(t),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getPreviousKey(t),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){let t=this.direction==="ltr"?"getKeyRightOf":"getKeyLeftOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,n=>this.layoutDelegate[t](n))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,n=>this.getNextColumn(n,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){let t=this.direction==="ltr"?"getKeyLeftOf":"getKeyRightOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,n=>this.layoutDelegate[t](n))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,n=>this.getNextColumn(n,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyAfter(t))}getLastKey(){let e=this.collection.getLastKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyBefore(t))}getKeyPageAbove(e){let t=this.ref.current,n=this.layoutDelegate.getItemRect(e);if(!n)return null;if(t&&!le(t))return this.getFirstKey();let l=e;if(this.orientation==="horizontal"){let r=Math.max(0,n.x+n.width-this.layoutDelegate.getVisibleRect().width);for(;n&&n.x>r&&l!=null;)l=this.getKeyAbove(l),n=l==null?null:this.layoutDelegate.getItemRect(l)}else{let r=Math.max(0,n.y+n.height-this.layoutDelegate.getVisibleRect().height);for(;n&&n.y>r&&l!=null;)l=this.getKeyAbove(l),n=l==null?null:this.layoutDelegate.getItemRect(l)}return l??this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,n=this.layoutDelegate.getItemRect(e);if(!n)return null;if(t&&!le(t))return this.getLastKey();let l=e;if(this.orientation==="horizontal"){let r=Math.min(this.layoutDelegate.getContentSize().width,n.y-n.width+this.layoutDelegate.getVisibleRect().width);for(;n&&n.x<r&&l!=null;)l=this.getKeyBelow(l),n=l==null?null:this.layoutDelegate.getItemRect(l)}else{let r=Math.min(this.layoutDelegate.getContentSize().height,n.y-n.height+this.layoutDelegate.getVisibleRect().height);for(;n&&n.y<r&&l!=null;)l=this.getKeyBelow(l),n=l==null?null:this.layoutDelegate.getItemRect(l)}return l??this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let n=this.collection,l=t||this.getFirstKey();for(;l!=null;){let r=n.getItem(l);if(!r)return null;let c=r.textValue.slice(0,e.length);if(r.textValue&&this.collator.compare(c,e)===0)return l;l=this.getNextKey(l)}return null}constructor(...e){if(e.length===1){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.disabledBehavior=t.disabledBehavior||"all",this.orientation=t.orientation||"vertical",this.direction=t.direction,this.layout=t.layout||"stack",this.layoutDelegate=t.layoutDelegate||new $e(t.ref)}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all",this.layoutDelegate=new $e(this.ref);this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function ft(i){let{selectionManager:e,collection:t,disabledKeys:n,ref:l,keyboardDelegate:r,layoutDelegate:c}=i,d=je({usage:"search",sensitivity:"base"}),f=e.disabledBehavior,m=g.useMemo(()=>r||new qe({collection:t,disabledKeys:n,disabledBehavior:f,ref:l,collator:d,layoutDelegate:c}),[r,c,t,n,l,d,f]),{collectionProps:v}=Xe({...i,ref:l,selectionManager:e,keyboardDelegate:m});return{listProps:v}}function Te(i){return null}Te.getCollectionNode=function*(e,t){let{childItems:n,title:l,children:r}=e,c=e.title||e.children,d=e.textValue||(typeof c=="string"?c:"")||e["aria-label"]||"";!d&&!(t!=null&&t.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:c,textValue:d,"aria-label":e["aria-label"],hasChildNodes:Ze(e),*childNodes(){if(n)for(let f of n)yield{type:"item",value:f};else if(l){let f=[];oe.Children.forEach(r,m=>{f.push({type:"item",element:m})}),yield*f}}}};function Ze(i){return i.hasChildItems!=null?i.hasChildItems:!!(i.childItems||i.title&&oe.Children.count(i.children)>0)}let Je=Te;function we(i){return null}we.getCollectionNode=function*(e){let{children:t,title:n,items:l}=e;yield{type:"section",props:e,hasChildNodes:!0,rendered:n,"aria-label":e["aria-label"],*childNodes(){if(typeof t=="function"){if(!l)throw new Error("props.children was a function but props.items is missing");for(let r of l)yield{type:"item",value:r,renderer:t}}else{let r=[];oe.Children.forEach(t,c=>{r.push({type:"item",element:c})}),yield*r}}}};let Qe=we;const ve=new WeakMap;function ht(i){let e=ve.get(i);if(e!=null)return e;let t=0,n=l=>{for(let r of l)r.type==="section"?n(Ne(r,i)):t++};return n(i),ve.set(i,t),t}const pt=(i,e)=>({"aria-label":i,children:e.map(({id:t,menuItems:n,ariaLabel:l})=>fe.jsx(Qe,{title:t,"aria-label":l,children:n.map(r=>fe.jsx(Je,{children:r.title},r.id))},t))}),yt=i=>i.flatMap(({menuItems:e})=>e),gt=i=>i.reduce((e,t)=>({...e,[t.id]:t}),{}),bt=i=>new Set(i.reduce((e,t)=>[...e,t.disabled?t.id:""],[]).filter(e=>e!=="").map(e=>e.toString()));export{ft as $,dt as a,Je as b,ht as c,ct as d,gt as e,bt as f,yt as g,je as h,qe as i,Ve as j,Ue as k,pt as m};
