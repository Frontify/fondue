import{j as c}from"./jsx-runtime-DH9XN8A8.js";import{a as A,$ as E,g as O}from"./useFocusRing-CP9UJNUw.js";import{$ as j,a as _,b as C,c as k}from"./useFocusable-BRFkliNn.js";import{$ as G,b as W,a as U}from"./useFormValidationState-BKAFCnHb.js";import{$ as K}from"./chain-C8AhrK0W.js";import{b as z}from"./FocusScope-Drcq722v.js";import{$ as Y}from"./useField-Cf7VimOC.js";import{$ as H}from"./context-BFA77VTM.js";import{$ as N}from"./VisuallyHidden-CBFC6H_6.js";import{$ as J}from"./useControlledState-BSgwHaZM.js";import{r as x}from"./index-v7USjxUg.js";import{u as Q}from"./useMemoizedId-Cl5PI4eu.js";import{F as X}from"./focusStyle-CBFElZiz.js";import{m as D}from"./merge-DI-veSMP.js";import{m as Z}from"./motion-EixWmitH.js";const M=new WeakMap;function ee(t,e,l){let{value:a,children:d,"aria-label":o,"aria-labelledby":u}=t;const r=t.isDisabled||e.isDisabled;let w=d!=null,f=o!=null||u!=null;!w&&!f&&console.warn("If you do not provide children, you must specify an aria-label for accessibility");let m=e.selectedValue===a,b=$=>{$.stopPropagation(),e.setSelectedValue(a)},{pressProps:y,isPressed:I}=j({isDisabled:r}),{pressProps:v,isPressed:h}=j({isDisabled:r,onPress(){e.setSelectedValue(a)}}),{focusableProps:P}=_(C(t,{onFocus:()=>e.setLastFocusedValue(a)}),l),V=C(y,P),S=k(t,{labelable:!0}),g=-1;e.selectedValue!=null?e.selectedValue===a&&(g=0):(e.lastFocusedValue===a||e.lastFocusedValue==null)&&(g=0),r&&(g=void 0);let{name:p,descriptionId:i,errorMessageId:s,validationBehavior:n}=M.get(e);return G(l,e.selectedValue,e.setSelectedValue),W({validationBehavior:n},e,l),{labelProps:C(v,{onClick:$=>$.preventDefault()}),inputProps:C(S,{...V,type:"radio",name:p,tabIndex:g,disabled:r,required:e.isRequired&&n==="native",checked:m,value:a,onChange:b,"aria-describedby":[t["aria-describedby"],e.isInvalid?s:null,i].filter(Boolean).join(" ")||void 0}),isDisabled:r,isSelected:m,isPressed:I||h}}function te(t,e){let{name:l,isReadOnly:a,isRequired:d,isDisabled:o,orientation:u="vertical",validationBehavior:r="aria"}=t,{direction:w}=H(),{isInvalid:f,validationErrors:m,validationDetails:b}=e.displayValidation,{labelProps:y,fieldProps:I,descriptionProps:v,errorMessageProps:h}=Y({...t,labelElementType:"span",isInvalid:e.isInvalid,errorMessage:t.errorMessage||m}),P=k(t,{labelable:!0}),{focusWithinProps:V}=A({onBlurWithin(p){var i;(i=t.onBlur)===null||i===void 0||i.call(t,p),e.selectedValue||e.setLastFocusedValue(null)},onFocusWithin:t.onFocus,onFocusWithinChange:t.onFocusChange}),S=p=>{let i;switch(p.key){case"ArrowRight":w==="rtl"&&u!=="vertical"?i="prev":i="next";break;case"ArrowLeft":w==="rtl"&&u!=="vertical"?i="next":i="prev";break;case"ArrowDown":i="next";break;case"ArrowUp":i="prev";break;default:return}p.preventDefault();let s=z(p.currentTarget,{from:p.target}),n;i==="next"?(n=s.nextNode(),n||(s.currentNode=p.currentTarget,n=s.firstChild())):(n=s.previousNode(),n||(s.currentNode=p.currentTarget,n=s.lastChild())),n&&(n.focus(),e.setSelectedValue(n.value))},g=K(l);return M.set(e,{name:g,descriptionId:v.id,errorMessageId:h.id,validationBehavior:r}),{radioGroupProps:C(P,{role:"radiogroup",onKeyDown:S,"aria-invalid":e.isInvalid||void 0,"aria-errormessage":t["aria-errormessage"],"aria-readonly":a||void 0,"aria-required":d||void 0,"aria-disabled":o||void 0,"aria-orientation":u,...I,...V}),labelProps:y,descriptionProps:v,errorMessageProps:h,isInvalid:f,validationErrors:m,validationDetails:b}}let ae=Math.round(Math.random()*1e10),ie=0;function ne(t){let e=x.useMemo(()=>t.name||`radio-group-${ae}-${++ie}`,[t.name]);var l;let[a,d]=J(t.value,(l=t.defaultValue)!==null&&l!==void 0?l:null,t.onChange),[o,u]=x.useState(null),r=U({...t,value:a}),w=m=>{!t.isReadOnly&&!t.isDisabled&&(d(m),r.commitValidation())},f=r.displayValidation.isInvalid;return{...r,name:e,selectedValue:a,setSelectedValue:w,lastFocusedValue:o,setLastFocusedValue:u,isDisabled:t.isDisabled||!1,isReadOnly:t.isReadOnly||!1,isRequired:t.isRequired||!1,validationState:t.validationState||(f?"invalid":null),isInvalid:f}}const R=t=>t.icon!==void 0,T=x.forwardRef((t,e)=>{const{id:l,item:a,disabled:d,radioGroupState:o,size:u}=t,r=x.useRef(null),w=a.id===o.selectedValue,{inputProps:f}=ee({value:a.id,"aria-label":R(a)?a.ariaLabel:a.value.toString(),isDisabled:d,id:w?l:void 0},o,r),{isFocusVisible:m,focusProps:b}=E(),y=()=>{var v;d||(o.setSelectedValue(a.id),(v=r.current)==null||v.focus(),O("pointer"))},I=()=>{switch(!0){case R(a):return"fondue-segmented-controls-item-icon";case typeof a.value=="string":return"fondue-segmented-controls-item-text";default:return"fondue-segmented-controls-item-number"}};return c.jsxs("div",{ref:e,className:D(["tw-relative",m&&X]),children:[c.jsx(N,{children:c.jsx("input",{...f,...b,"data-test-id":"fondue-segmented-controls-input",ref:r})}),c.jsx("div",{onClick:y,role:"none","data-test-id":I(),className:D(["tw-relative tw-w-full tw-py-1.5 tw-inline-flex tw-justify-center tw-items-center tw-font-sans tw-font-normal tw-h-full tw-text-center",u==="small"?"tw-px-2":"tw-px-4",w&&!d?"tw-transition tw-ease-in-out tw-delay-300 tw-text-text tw-bg-base":"tw-text-text-weak",d?"tw-text-box-disabled-inverse tw-bg-box-disabled tw-h-[2.15rem] tw-rounded hover:tw-cursor-not-allowed tw-border-line-x-strong":"hover:tw-text-text hover:tw-cursor-pointer"]),children:c.jsxs("span",{className:"tw-overflow-hidden tw-text-ellipsis tw-whitespace-nowrap tw-flex tw-items-center",children:[R(a)&&c.jsx("span",{className:"tw-leading-3",children:a.icon}),a.value&&c.jsx("span",{className:R(a)?"tw-ml-2":"",children:a.value.toString()})]})})]},a.id)});T.displayName="SegmentedControlsItem";const q=({id:t,items:e,activeItemId:l,onChange:a,ariaLabel:d="SegmentedControls",disabled:o=!1,hugWidth:u=!1,size:r})=>{const w=x.useMemo(()=>e.some(i=>!i.disabled),[e]),f=Q(t),m={onChange:a,value:l,label:d,isDisabled:o},b=ne(m),{radioGroupProps:y,labelProps:I}=te(m,b),v=x.useRef([]),h=x.useRef(null),[P,V]=x.useState(null),S=x.useMemo(()=>e.map((i,s)=>c.jsx(T,{id:f,item:i,disabled:i.disabled??o,radioGroupState:b,ref:n=>v.current[s]=n,size:r},`fondue-segmented-controls-${f}-item-${i.id}`)),[e,f,o,b,r]),g=w?e.findIndex((i,s)=>{const n=i.id===b.selectedValue;if(i.disabled&&n)if(s>0){const $=s-1;b.setSelectedValue(e[$].id)}else{const $=s+1;b.setSelectedValue(e[$].id)}return n}):-1,p=u?"tw-flex":"tw-grid tw-grid-flow-col tw-auto-cols-fr tw-justify-evenly";return x.useLayoutEffect(()=>{const i=v.current[g];if(i&&h.current){const s=h.current.getBoundingClientRect(),n=i.getBoundingClientRect();let $=n.left-s.left,F=n.width;g===0?($-=1,F+=2):F+=1;const B=F/s.width*100,L=$/s.width*100;V({width:`${B}%`,left:`${L}%`})}},[l,g,r]),c.jsxs("div",{className:D([u?"tw-inline-flex":"tw-flex","tw-relative"]),children:[c.jsx("fieldset",{...y,"data-test-id":"fondue-segmented-controls",className:D(["tw-relative tw-divide-x tw-divide-line-strong tw-w-full tw-h-9 tw-p-0 tw-border tw-border-solid tw-border-line-strong tw-m-0 tw-bg-base-alt tw-rounded tw-font-sans tw-text-sm tw-select-none",p]),ref:h,children:S}),c.jsx(N,{children:c.jsx("span",{...I,children:d})}),l&&P&&c.jsx(Z.div,{"aria-hidden":"true",animate:P,initial:!1,transition:{type:"tween",duration:.3},className:D(["tw-absolute tw-h-9 tw-box-border tw-border tw-rounded tw-pointer-events-none tw-top-0",o?"tw-border-line-x-strong hover:tw-cursor-not-allowed":"tw-border-line-xx-strong tw-bg-transparent"])})]})};q.displayName="FondueSegmentedControls";q.__docgenInfo={description:"@deprecated Use `SegmentedControl` from `@frontify/fondue/components` instead. Also check {@link https://github.com/Frontify/fondue/blob/main/packages/components/MIGRATING.md#segmented-control the migration guide}.",methods:[],displayName:"FondueSegmentedControls",props:{id:{required:!1,tsType:{name:"string"},description:""},items:{required:!0,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(TextOrNumberItem | IconItem)[]"},description:""},activeItemId:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},ariaLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'SegmentedControls'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hugWidth:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},size:{required:!1,tsType:{name:"union",raw:"'small' | 'medium'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'medium'"}]},description:""}}};export{q as S};
