import{j as m}from"./jsx-runtime-BYYWji4R.js";import{r as u}from"./index-ClcD9ViR.js";import{c as Y}from"./index-BdQq_4o_.js";import{c as C}from"./index-BIU06K05.js";import{u as j}from"./index-BUNfiIdP.js";import{c as ce}from"./index-CWz5EflU.js";import{u as ue,a as de}from"./index-6uuHhnjI.js";import{u as me}from"./index-CZKF78Oq.js";import{u as fe}from"./index-sY83p_TZ.js";import{P as I}from"./index-Cr2iZZCw.js";import{c as pe}from"./index-BPwneg5l.js";var $=["PageUp","PageDown"],X=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],G={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},E="Slider",[q,he,ge]=pe(E),[W,We]=ce(E,[ge]),[Se,K]=W(E),J=u.forwardRef((e,t)=>{const{name:r,min:n=0,max:s=100,step:l=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:c=0,defaultValue:f=[n],value:h,onValueChange:i=()=>{},onValueCommit:d=()=>{},inverted:b=!1,form:y,...v}=e,g=u.useRef(new Set),p=u.useRef(0),w=o==="horizontal"?ve:be,[S=[],M]=ue({prop:h,defaultProp:f,onChange:x=>{var D;(D=[...g.current][p.current])==null||D.focus(),i(x)}}),B=u.useRef(S);function N(x){const R=Pe(S,x);A(x,R)}function ie(x){A(x,p.current)}function le(){const x=B.current[p.current];S[p.current]!==x&&d(S)}function A(x,R,{commit:D}={commit:!1}){const L=Ce(l),H=Ee(Math.round((x-n)/l)*l+n,L),V=Y(H,[n,s]);M((T=[])=>{const P=ye(T,V,R);if(Te(P,c*l)){p.current=P.indexOf(V);const U=String(P)!==String(T);return U&&D&&d(P),U?P:T}else return T})}return m.jsx(Se,{scope:e.__scopeSlider,name:r,disabled:a,min:n,max:s,valueIndexToChangeRef:p,thumbs:g.current,values:S,orientation:o,form:y,children:m.jsx(q.Provider,{scope:e.__scopeSlider,children:m.jsx(q.Slot,{scope:e.__scopeSlider,children:m.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,...v,ref:t,onPointerDown:C(v.onPointerDown,()=>{a||(B.current=S)}),min:n,max:s,inverted:b,onSlideStart:a?void 0:N,onSlideMove:a?void 0:ie,onSlideEnd:a?void 0:le,onHomeKeyDown:()=>!a&&A(n,0,{commit:!0}),onEndKeyDown:()=>!a&&A(s,S.length-1,{commit:!0}),onStepKeyDown:({event:x,direction:R})=>{if(!a){const H=$.includes(x.key)||x.shiftKey&&X.includes(x.key)?10:1,V=p.current,T=S[V],P=l*H*R;A(T+P,V,{commit:!0})}}})})})})});J.displayName=E;var[Q,Z]=W(E,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ve=u.forwardRef((e,t)=>{const{min:r,max:n,dir:s,inverted:l,onSlideStart:o,onSlideMove:a,onSlideEnd:c,onStepKeyDown:f,...h}=e,[i,d]=u.useState(null),b=j(t,w=>d(w)),y=u.useRef(void 0),v=me(s),g=v==="ltr",p=g&&!l||!g&&l;function _(w){const S=y.current||i.getBoundingClientRect(),M=[0,S.width],N=O(M,p?[r,n]:[n,r]);return y.current=S,N(w-S.left)}return m.jsx(Q,{scope:e.__scopeSlider,startEdge:p?"left":"right",endEdge:p?"right":"left",direction:p?1:-1,size:"width",children:m.jsx(ee,{dir:v,"data-orientation":"horizontal",...h,ref:b,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const S=_(w.clientX);o==null||o(S)},onSlideMove:w=>{const S=_(w.clientX);a==null||a(S)},onSlideEnd:()=>{y.current=void 0,c==null||c()},onStepKeyDown:w=>{const M=G[p?"from-left":"from-right"].includes(w.key);f==null||f({event:w,direction:M?-1:1})}})})}),be=u.forwardRef((e,t)=>{const{min:r,max:n,inverted:s,onSlideStart:l,onSlideMove:o,onSlideEnd:a,onStepKeyDown:c,...f}=e,h=u.useRef(null),i=j(t,h),d=u.useRef(void 0),b=!s;function y(v){const g=d.current||h.current.getBoundingClientRect(),p=[0,g.height],w=O(p,b?[n,r]:[r,n]);return d.current=g,w(v-g.top)}return m.jsx(Q,{scope:e.__scopeSlider,startEdge:b?"bottom":"top",endEdge:b?"top":"bottom",size:"height",direction:b?1:-1,children:m.jsx(ee,{"data-orientation":"vertical",...f,ref:i,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const g=y(v.clientY);l==null||l(g)},onSlideMove:v=>{const g=y(v.clientY);o==null||o(g)},onSlideEnd:()=>{d.current=void 0,a==null||a()},onStepKeyDown:v=>{const p=G[b?"from-bottom":"from-top"].includes(v.key);c==null||c({event:v,direction:p?-1:1})}})})}),ee=u.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:s,onSlideEnd:l,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:c,...f}=e,h=K(E,r);return m.jsx(I.span,{...f,ref:t,onKeyDown:C(e.onKeyDown,i=>{i.key==="Home"?(o(i),i.preventDefault()):i.key==="End"?(a(i),i.preventDefault()):$.concat(X).includes(i.key)&&(c(i),i.preventDefault())}),onPointerDown:C(e.onPointerDown,i=>{const d=i.target;d.setPointerCapture(i.pointerId),i.preventDefault(),h.thumbs.has(d)?d.focus():n(i)}),onPointerMove:C(e.onPointerMove,i=>{i.target.hasPointerCapture(i.pointerId)&&s(i)}),onPointerUp:C(e.onPointerUp,i=>{const d=i.target;d.hasPointerCapture(i.pointerId)&&(d.releasePointerCapture(i.pointerId),l(i))})})}),te="SliderTrack",ne=u.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,s=K(te,r);return m.jsx(I.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...n,ref:t})});ne.displayName=te;var z="SliderRange",re=u.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,s=K(z,r),l=Z(z,r),o=u.useRef(null),a=j(t,o),c=s.values.length,f=s.values.map(d=>se(d,s.min,s.max)),h=c>1?Math.min(...f):0,i=100-Math.max(...f);return m.jsx(I.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...n,ref:a,style:{...e.style,[l.startEdge]:h+"%",[l.endEdge]:i+"%"}})});re.displayName=z;var F="SliderThumb",oe=u.forwardRef((e,t)=>{const r=he(e.__scopeSlider),[n,s]=u.useState(null),l=j(t,a=>s(a)),o=u.useMemo(()=>n?r().findIndex(a=>a.ref.current===n):-1,[r,n]);return m.jsx(we,{...e,ref:l,index:o})}),we=u.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:s,...l}=e,o=K(F,r),a=Z(F,r),[c,f]=u.useState(null),h=j(t,_=>f(_)),i=c?o.form||!!c.closest("form"):!0,d=de(c),b=o.values[n],y=b===void 0?0:se(b,o.min,o.max),v=Re(n,o.values.length),g=d==null?void 0:d[a.size],p=g?_e(g,y,a.direction):0;return u.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),m.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${y}% + ${p}px)`},children:[m.jsx(q.ItemSlot,{scope:e.__scopeSlider,children:m.jsx(I.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":b,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...l,ref:h,style:b===void 0?{display:"none"}:e.style,onFocus:C(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),i&&m.jsx(xe,{name:s??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:b},n)]})});oe.displayName=F;var xe=e=>{const{value:t,...r}=e,n=u.useRef(null),s=fe(t);return u.useEffect(()=>{const l=n.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(s!==t&&c){const f=new Event("input",{bubbles:!0});c.call(l,t),l.dispatchEvent(f)}},[s,t]),m.jsx("input",{style:{display:"none"},...r,ref:n,defaultValue:t})};function ye(e=[],t,r){const n=[...e];return n[r]=t,n.sort((s,l)=>s-l)}function se(e,t,r){const l=100/(r-t)*(e-t);return Y(l,[0,100])}function Re(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Pe(e,t){if(e.length===1)return 0;const r=e.map(s=>Math.abs(s-t)),n=Math.min(...r);return r.indexOf(n)}function _e(e,t,r){const n=e/2,l=O([0,50],[0,n]);return(n-l(t)*r)*r}function De(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function Te(e,t){if(t>0){const r=De(e);return Math.min(...r)>=t}return!0}function O(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Ce(e){return(String(e).split(".")[1]||"").length}function Ee(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var Me=J,Ae=ne,Ve=re,je=oe;const ke="_root_1ke9p_5",Ie="_thumb_1ke9p_17",Ke="_track_1ke9p_21",Be="_range_1ke9p_28",k={root:ke,thumb:Ie,track:Ke,range:Be},Ne=({value:e,defaultValue:t=[0],onChange:r,onCommit:n,"data-test-id":s="fondue-slider",...l},o)=>{const a=u.useRef(null);return m.jsxs(Me,{ref:o,className:k.root,value:e,defaultValue:t,onValueChange:r,onValueCommit:n,"data-test-id":s,...l,children:[m.jsx(Ae,{onPointerDown:()=>{a.current&&(a.current.dataset.showFocusRing="false")},className:k.track,children:m.jsx(Ve,{className:k.range})}),(e||t).map((c,f)=>m.jsx(je,{ref:a,className:k.thumb,onPointerDown:h=>{h.currentTarget.dataset.showFocusRing="false"},onBlur:h=>{h.currentTarget.dataset.showFocusRing="true"}},f))]})},ae=u.forwardRef(Ne);ae.displayName="Slider";ae.__docgenInfo={description:"",methods:[],displayName:"Slider",props:{id:{required:!1,tsType:{name:"string"},description:""},name:{required:!1,tsType:{name:"string"},description:""},defaultValue:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:`The default value of the slider
Used for uncontrolled components
@default [0]`,defaultValue:{value:"[0]",computed:!1}},value:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:`The controlled value of the slider
@default [0]`},min:{required:!1,tsType:{name:"number"},description:`Minimum value of the slider
@default 0`},max:{required:!1,tsType:{name:"number"},description:`Maximum value of the slider
@default 100`},step:{required:!1,tsType:{name:"number"},description:`The granularity with which the slider can step through values
@default 1`},minStepsBetweenThumbs:{required:!1,tsType:{name:"number"},description:`The minimum steps between thumbs in a range slider
@default 0`},disabled:{required:!1,tsType:{name:"boolean"},description:`Disable the slider
@default false`},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"number"}],raw:"number[]"},name:"value"}],return:{name:"void"}}},description:""},onCommit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"number"}],raw:"number[]"},name:"value"}],return:{name:"void"}}},description:""},"data-test-id":{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'fondue-slider'",computed:!1}}}};export{ae as S};
