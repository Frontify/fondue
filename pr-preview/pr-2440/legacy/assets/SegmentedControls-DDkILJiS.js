import{j as p}from"./jsx-runtime-DF2Pcvd1.js";import{a as W,m as U,$ as K,l as z}from"./useFocusRing-azhR_Ghs.js";import{a as q,b as H,$ as D,c as L}from"./useFocusable-CNNIQcyt.js";import{$ as Y,a as J,b as Q}from"./useFormValidationState-D6GFbEEW.js";import{$ as X}from"./chain-BGXswv_L.js";import{b as Z}from"./FocusScope-CeJN43e3.js";import{$ as ee}from"./useField-UIQ9cPAw.js";import{$ as te}from"./context-SUFcdgyy.js";import{$ as E}from"./VisuallyHidden-DoRSb4T_.js";import{$ as ae}from"./useControlledState-CmdEzstM.js";import{r as $}from"./index-B2-qRKKC.js";import{u as ie}from"./useMemoizedId-BB39KVn8.js";import{F as re}from"./focusStyle-BtNTXUM4.js";import{m as F}from"./merge-DI-veSMP.js";import{m as le}from"./motion-bD4j9jgw.js";const B=new WeakMap;function ne(e,t,s){let{value:a,children:f,"aria-label":c,"aria-labelledby":g,onPressStart:o,onPressEnd:m,onPressChange:b,onPress:u,onPressUp:l,onClick:x}=e;const v=e.isDisabled||t.isDisabled;let h=f!=null,y=c!=null||g!=null,P=t.selectedValue===a,I=R=>{R.stopPropagation(),t.setSelectedValue(a)},{pressProps:S,isPressed:V}=q({onPressStart:o,onPressEnd:m,onPressChange:b,onPress:u,onPressUp:l,onClick:x,isDisabled:v}),{pressProps:C,isPressed:r}=q({onPressStart:o,onPressEnd:m,onPressChange:b,onPressUp:l,onClick:x,isDisabled:v,onPress(R){var M;u==null||u(R),t.setSelectedValue(a),(M=s.current)===null||M===void 0||M.focus()}}),{focusableProps:i}=H(D(e,{onFocus:()=>t.setLastFocusedValue(a)}),s),d=D(S,i),n=L(e,{labelable:!0}),w=-1;t.selectedValue!=null?t.selectedValue===a&&(w=0):(t.lastFocusedValue===a||t.lastFocusedValue==null)&&(w=0),v&&(w=void 0);let{name:k,form:N,descriptionId:O,errorMessageId:G,validationBehavior:T}=B.get(t);return Y(s,t.defaultSelectedValue,t.setSelectedValue),J({validationBehavior:T},t,s),{labelProps:D(C,{onClick:R=>R.preventDefault()}),inputProps:D(n,{...d,type:"radio",name:k,form:N,tabIndex:w,disabled:v,required:t.isRequired&&T==="native",checked:P,value:a,onChange:I,"aria-describedby":[e["aria-describedby"],t.isInvalid?G:null,O].filter(Boolean).join(" ")||void 0}),isDisabled:v,isSelected:P,isPressed:V||r}}function se(e,t){let{name:s,form:a,isReadOnly:f,isRequired:c,isDisabled:g,orientation:o="vertical",validationBehavior:m="aria"}=e,{direction:b}=te(),{isInvalid:u,validationErrors:l,validationDetails:x}=t.displayValidation,{labelProps:v,fieldProps:h,descriptionProps:y,errorMessageProps:P}=ee({...e,labelElementType:"span",isInvalid:t.isInvalid,errorMessage:e.errorMessage||l}),I=L(e,{labelable:!0}),{focusWithinProps:S}=W({onBlurWithin(r){var i;(i=e.onBlur)===null||i===void 0||i.call(e,r),t.selectedValue||t.setLastFocusedValue(null)},onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange}),V=r=>{let i;switch(r.key){case"ArrowRight":b==="rtl"&&o!=="vertical"?i="prev":i="next";break;case"ArrowLeft":b==="rtl"&&o!=="vertical"?i="next":i="prev";break;case"ArrowDown":i="next";break;case"ArrowUp":i="prev";break;default:return}r.preventDefault();let d=Z(r.currentTarget,{from:r.target,accept:w=>w instanceof U(w).HTMLInputElement&&w.type==="radio"}),n;i==="next"?(n=d.nextNode(),n||(d.currentNode=r.currentTarget,n=d.firstChild())):(n=d.previousNode(),n||(d.currentNode=r.currentTarget,n=d.lastChild())),n&&(n.focus(),t.setSelectedValue(n.value))},C=X(s);return B.set(t,{name:C,form:a,descriptionId:y.id,errorMessageId:P.id,validationBehavior:m}),{radioGroupProps:D(I,{role:"radiogroup",onKeyDown:V,"aria-invalid":t.isInvalid||void 0,"aria-errormessage":e["aria-errormessage"],"aria-readonly":f||void 0,"aria-required":c||void 0,"aria-disabled":g||void 0,"aria-orientation":o,...h,...S}),labelProps:v,descriptionProps:y,errorMessageProps:P,isInvalid:u,validationErrors:l,validationDetails:x}}let oe=Math.round(Math.random()*1e10),de=0;function ce(e){let t=$.useMemo(()=>e.name||`radio-group-${oe}-${++de}`,[e.name]);var s;let[a,f]=ae(e.value,(s=e.defaultValue)!==null&&s!==void 0?s:null,e.onChange),[c]=$.useState(a),[g,o]=$.useState(null),m=Q({...e,value:a}),b=x=>{!e.isReadOnly&&!e.isDisabled&&(f(x),m.commitValidation())},u=m.displayValidation.isInvalid;var l;return{...m,name:t,selectedValue:a,defaultSelectedValue:e.value!==void 0?c:(l=e.defaultValue)!==null&&l!==void 0?l:null,setSelectedValue:b,lastFocusedValue:g,setLastFocusedValue:o,isDisabled:e.isDisabled||!1,isReadOnly:e.isReadOnly||!1,isRequired:e.isRequired||!1,validationState:e.validationState||(u?"invalid":null),isInvalid:u}}const j=e=>e.icon!==void 0,A=$.forwardRef((e,t)=>{const{id:s,item:a,disabled:f,radioGroupState:c,size:g}=e,o=$.useRef(null),m=a.id===c.selectedValue,{inputProps:b}=ne({value:a.id,"aria-label":j(a)?a.ariaLabel:a.value.toString(),isDisabled:f,id:m?s:void 0},c,o),{isFocusVisible:u,focusProps:l}=K(),x=()=>{var h;f||(c.setSelectedValue(a.id),(h=o.current)==null||h.focus(),z("pointer"))},v=()=>{switch(!0){case j(a):return"fondue-segmented-controls-item-icon";case typeof a.value=="string":return"fondue-segmented-controls-item-text";default:return"fondue-segmented-controls-item-number"}};return p.jsxs("div",{ref:t,className:F(["tw-relative",u&&re]),children:[p.jsx(E,{children:p.jsx("input",{...b,...l,"data-test-id":"fondue-segmented-controls-input",ref:o})}),p.jsx("div",{onClick:x,role:"none","data-test-id":v(),className:F(["tw-relative tw-w-full tw-py-1.5 tw-inline-flex tw-justify-center tw-items-center tw-font-sans tw-font-normal tw-h-full tw-text-center",g==="small"?"tw-px-2":"tw-px-4",m&&!f?"tw-transition tw-ease-in-out tw-delay-300 tw-text-text tw-bg-base":"tw-text-text-weak",f?"tw-text-box-disabled-inverse tw-bg-box-disabled tw-h-[2.15rem] tw-rounded hover:tw-cursor-not-allowed tw-border-line-x-strong":"hover:tw-text-text hover:tw-cursor-pointer"]),children:p.jsxs("span",{className:"tw-overflow-hidden tw-text-ellipsis tw-whitespace-nowrap tw-flex tw-items-center",children:[j(a)?p.jsx("span",{className:"tw-leading-3",children:a.icon}):null,a.value?p.jsx("span",{className:j(a)?"tw-ml-2":"",children:a.value.toString()}):null]})})]},a.id)});A.displayName="SegmentedControlsItem";const _=({id:e,items:t,activeItemId:s,onChange:a,ariaLabel:f="SegmentedControls",disabled:c=!1,hugWidth:g=!1,size:o})=>{const m=$.useMemo(()=>t.some(r=>!r.disabled),[t]),b=ie(e),u={onChange:a,value:s,label:f,isDisabled:c},l=ce(u),{radioGroupProps:x,labelProps:v}=se(u,l),h=$.useRef([]),y=$.useRef(null),[P,I]=$.useState(null),S=$.useMemo(()=>t.map((r,i)=>p.jsx(A,{id:b,item:r,disabled:r.disabled??c,radioGroupState:l,ref:d=>h.current[i]=d,size:o},`fondue-segmented-controls-${b}-item-${r.id}`)),[t,b,c,l,o]),V=m?t.findIndex((r,i)=>{const d=r.id===l.selectedValue;if(r.disabled&&d)if(i>0){const n=i-1;l.setSelectedValue(t[n].id)}else{const n=i+1;l.setSelectedValue(t[n].id)}return d}):-1,C=g?"tw-flex":"tw-grid tw-grid-flow-col tw-auto-cols-fr tw-justify-evenly";return $.useLayoutEffect(()=>{const r=h.current[V];if(r&&y.current){const i=y.current.getBoundingClientRect(),d=r.getBoundingClientRect();let n=d.left-i.left,w=d.width;V===0?(n-=1,w+=2):w+=1;const k=w/i.width*100,N=n/i.width*100;I({width:`${k}%`,left:`${N}%`})}},[s,V,o]),p.jsxs("div",{className:F([g?"tw-inline-flex":"tw-flex","tw-relative"]),children:[p.jsx("fieldset",{...x,"data-test-id":"fondue-segmented-controls",className:F(["tw-relative tw-divide-x tw-divide-line-strong tw-w-full tw-h-9 tw-p-0 tw-border tw-border-solid tw-border-line-strong tw-m-0 tw-bg-base-alt tw-rounded tw-font-sans tw-text-sm tw-select-none",C]),ref:y,children:S}),p.jsx(E,{children:p.jsx("span",{...v,children:f})}),s&&P&&p.jsx(le.div,{"aria-hidden":"true",animate:P,initial:!1,transition:{type:"tween",duration:.3},className:F(["tw-absolute tw-h-9 tw-box-border tw-border tw-rounded tw-pointer-events-none tw-top-0",c?"tw-border-line-x-strong hover:tw-cursor-not-allowed":"tw-border-line-xx-strong tw-bg-transparent"])})]})};_.displayName="FondueSegmentedControls";_.__docgenInfo={description:"@deprecated Use `SegmentedControl` from `@frontify/fondue/components` instead. Also check {@link https://github.com/Frontify/fondue/blob/main/packages/components/MIGRATING.md#segmented-control the migration guide}.",methods:[],displayName:"FondueSegmentedControls",props:{id:{required:!1,tsType:{name:"string"},description:""},items:{required:!0,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(TextOrNumberItem | IconItem)[]"},description:""},activeItemId:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},ariaLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'SegmentedControls'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hugWidth:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},size:{required:!1,tsType:{name:"union",raw:"'small' | 'medium'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'medium'"}]},description:""}}};export{_ as S};
