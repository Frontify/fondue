import{$ as b,a as s}from"./useEffectEvent-sx_rQw4H.js";import{r as c,R as f}from"./index-ClcD9ViR.js";function x(n){let[e,a]=c.useState(n),t=c.useRef(null),r=b(()=>{if(!t.current)return;let u=t.current.next();if(u.done){t.current=null;return}e===u.value?r():a(u.value)});s(()=>{t.current&&r()});let o=b(u=>{t.current=u(e),r()});return[e,o]}const $={prefix:String(Math.round(Math.random()*1e10)),current:0},p=f.createContext($),v=f.createContext(!1);let m=!!(typeof window<"u"&&window.document&&window.document.createElement),i=new WeakMap;function w(n=!1){let e=c.useContext(p),a=c.useRef(null);if(a.current===null&&!n){var t,r;let o=(r=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(t=r.ReactCurrentOwner)===null||t===void 0?void 0:t.current;if(o){let u=i.get(o);u==null?i.set(o,{id:e.current,state:o.memoizedState}):o.memoizedState!==u.state&&(e.current=u.id,i.delete(o))}a.current=++e.current}return a.current}function S(n){let e=c.useContext(p);e===$&&!m&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let a=w(!!n),t=`react-aria${e.prefix}`;return n||`${t}-${a}`}function g(n){let e=f.useId(),[a]=c.useState(I()),t=a?"react-aria":`react-aria${$.prefix}`;return n||`${t}-${e}`}const y=typeof f.useId=="function"?g:S;function h(){return!1}function C(){return!0}function M(n){return()=>{}}function I(){return typeof f.useSyncExternalStore=="function"?f.useSyncExternalStore(M,h,C):c.useContext(v)}let z=!!(typeof window<"u"&&window.document&&window.document.createElement),l=new Map,d;typeof FinalizationRegistry<"u"&&(d=new FinalizationRegistry(n=>{l.delete(n)}));function V(n){let[e,a]=c.useState(n),t=c.useRef(null),r=y(e),o=c.useRef(null);if(d&&d.register(o,r),z){const u=l.get(r);u&&!u.includes(t)?u.push(t):l.set(r,[t])}return s(()=>{let u=r;return()=>{d&&d.unregister(o),l.delete(u)}},[r]),c.useEffect(()=>{let u=t.current;return u&&a(u),()=>{u&&(t.current=null)}}),r}function P(n,e){if(n===e)return n;let a=l.get(n);if(a)return a.forEach(r=>r.current=e),e;let t=l.get(e);return t?(t.forEach(r=>r.current=n),n):e}function R(n=[]){let e=V(),[a,t]=x(e),r=c.useCallback(()=>{t(function*(){yield e,yield document.getElementById(e)?e:void 0})},[e,t]);return s(r,[e,r,...n]),a}function j(...n){return(...e)=>{for(let a of n)typeof a=="function"&&a(...e)}}export{j as $,V as a,R as b,I as c,P as d};
