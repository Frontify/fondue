var $=Symbol.for("immer-nothing"),B=Symbol.for("immer-draftable"),u=Symbol.for("immer-state");function y(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var g=Object.getPrototypeOf;function z(e){return!!e&&!!e[u]}function p(e){var t;return e?q(e)||Array.isArray(e)||!!e[B]||!!((t=e.constructor)!=null&&t[B])||M(e)||C(e):!1}var L=Object.prototype.constructor.toString();function q(e){if(!e||typeof e!="object")return!1;const t=g(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===L}function w(e,t){A(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function A(e){const t=e[u];return t?t.type_:Array.isArray(e)?1:M(e)?2:C(e)?3:0}function k(e,t){return A(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Q(e,t,r){const n=A(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function V(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function M(e){return e instanceof Map}function C(e){return e instanceof Set}function l(e){return e.copy_||e.base_}function N(e,t){if(M(e))return new Map(e);if(C(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=q(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[u];let o=Reflect.ownKeys(n);for(let c=0;c<o.length;c++){const a=o[c],f=n[a];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(n[a]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[a]})}return Object.create(g(e),n)}else{const n=g(e);if(n!==null&&r)return{...e};const o=Object.create(n);return Object.assign(o,e)}}function W(e,t=!1){return x(e)||z(e)||!p(e)||(A(e)>1&&(e.set=e.add=e.clear=e.delete=ee),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>W(n,!0))),e}function ee(){y(2)}function x(e){return Object.isFrozen(e)}var I={};function P(e){const t=I[e];return t||y(0,e),t}function te(e,t){I[e]||(I[e]=t)}var S;function F(){return S}function re(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function G(e,t){t&&(P("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function T(e){U(e),e.drafts_.forEach(ne),e.drafts_=null}function U(e){e===S&&(S=e.parent_)}function H(e){return S=re(S,e)}function ne(e){const t=e[u];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function J(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[u].modified_&&(T(t),y(4)),p(e)&&(e=D(t,e),t.parent_||O(t,e)),t.patches_&&P("Patches").generateReplacementPatches_(r[u].base_,e,t.patches_,t.inversePatches_)):e=D(t,r,[]),T(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==$?e:void 0}function D(e,t,r){if(x(t))return t;const n=t[u];if(!n)return w(t,(o,c)=>X(e,n,t,o,c,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return O(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const o=n.copy_;let c=o,a=!1;n.type_===3&&(c=new Set(o),o.clear(),a=!0),w(c,(f,i)=>X(e,n,o,f,i,r,a)),O(e,o,!1),r&&e.patches_&&P("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function X(e,t,r,n,o,c,a){if(z(o)){const f=c&&t&&t.type_!==3&&!k(t.assigned_,n)?c.concat(n):void 0,i=D(e,o,f);if(Q(r,n,i),z(i))e.canAutoFreeze_=!1;else return}else a&&r.add(o);if(p(o)&&!x(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;D(e,o),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&O(e,o)}}function O(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&W(t,r)}function ie(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:F(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=n,c=K;r&&(o=[n],c=b);const{revoke:a,proxy:f}=Proxy.revocable(o,c);return n.draft_=f,n.revoke_=a,f}var K={get(e,t){if(t===u)return e;const r=l(e);if(!k(r,t))return se(e,r,t);const n=r[t];return e.finalized_||!p(n)?n:n===E(e.base_,t)?(R(e),e.copy_[t]=v(n,e)):n},has(e,t){return t in l(e)},ownKeys(e){return Reflect.ownKeys(l(e))},set(e,t,r){const n=Y(l(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const o=E(l(e),t),c=o==null?void 0:o[u];if(c&&c.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(V(r,o)&&(r!==void 0||k(e.base_,t)))return!0;R(e),h(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return E(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,R(e),h(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=l(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){y(11)},getPrototypeOf(e){return g(e.base_)},setPrototypeOf(){y(12)}},b={};w(K,(e,t)=>{b[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});b.deleteProperty=function(e,t){return b.set.call(this,e,t,void 0)};b.set=function(e,t,r){return K.set.call(this,e[0],t,r,e[0])};function E(e,t){const r=e[u];return(r?l(r):e)[t]}function se(e,t,r){var o;const n=Y(t,r);return n?"value"in n?n.value:(o=n.get)==null?void 0:o.call(e.draft_):void 0}function Y(e,t){if(!(t in e))return;let r=g(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=g(r)}}function h(e){e.modified_||(e.modified_=!0,e.parent_&&h(e.parent_))}function R(e){e.copy_||(e.copy_=N(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var oe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const c=r;r=t;const a=this;return function(i=c,...s){return a.produce(i,_=>r.call(this,_,...s))}}typeof r!="function"&&y(6),n!==void 0&&typeof n!="function"&&y(7);let o;if(p(t)){const c=H(this),a=v(t,void 0);let f=!0;try{o=r(a),f=!1}finally{f?T(c):U(c)}return G(c,n),J(o,c)}else if(!t||typeof t!="object"){if(o=r(t),o===void 0&&(o=t),o===$&&(o=void 0),this.autoFreeze_&&W(o,!0),n){const c=[],a=[];P("Patches").generateReplacementPatches_(t,o,c,a),n(c,a)}return o}else y(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(a,...f)=>this.produceWithPatches(a,i=>t(i,...f));let n,o;return[this.produce(t,r,(a,f)=>{n=a,o=f}),n,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){p(e)||y(8),z(e)&&(e=fe(e));const t=H(this),r=v(e,void 0);return r[u].isManual_=!0,U(t),r}finishDraft(e,t){const r=e&&e[u];(!r||!r.isManual_)&&y(9);const{scope_:n}=r;return G(n,t),J(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const o=t[r];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}r>-1&&(t=t.slice(r+1));const n=P("Patches").applyPatches_;return z(e)?n(e,t):this.produce(e,o=>n(o,t))}};function v(e,t){const r=M(e)?P("MapSet").proxyMap_(e,t):C(e)?P("MapSet").proxySet_(e,t):ie(e,t);return(t?t.scope_:F()).drafts_.push(r),r}function fe(e){return z(e)||y(10,e),Z(e)}function Z(e){if(!p(e)||x(e))return e;const t=e[u];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=N(e,t.scope_.immer_.useStrictShallowCopy_)}else r=N(e,!0);return w(r,(n,o)=>{Q(r,n,Z(o))}),t&&(t.finalized_=!1),r}function ae(){class e extends Map{constructor(i,s){super(),this[u]={type_:2,parent_:s,scope_:s?s.scope_:F(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:i,draft_:this,isManual_:!1,revoked_:!1}}get size(){return l(this[u]).size}has(i){return l(this[u]).has(i)}set(i,s){const _=this[u];return a(_),(!l(_).has(i)||l(_).get(i)!==s)&&(r(_),h(_),_.assigned_.set(i,!0),_.copy_.set(i,s),_.assigned_.set(i,!0)),this}delete(i){if(!this.has(i))return!1;const s=this[u];return a(s),r(s),h(s),s.base_.has(i)?s.assigned_.set(i,!1):s.assigned_.delete(i),s.copy_.delete(i),!0}clear(){const i=this[u];a(i),l(i).size&&(r(i),h(i),i.assigned_=new Map,w(i.base_,s=>{i.assigned_.set(s,!1)}),i.copy_.clear())}forEach(i,s){const _=this[u];l(_).forEach((m,j,ce)=>{i.call(s,this.get(j),j,this)})}get(i){const s=this[u];a(s);const _=l(s).get(i);if(s.finalized_||!p(_)||_!==s.base_.get(i))return _;const m=v(_,s);return r(s),s.copy_.set(i,m),m}keys(){return l(this[u]).keys()}values(){const i=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const s=i.next();return s.done?s:{done:!1,value:this.get(s.value)}}}}entries(){const i=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const s=i.next();if(s.done)return s;const _=this.get(s.value);return{done:!1,value:[s.value,_]}}}}[Symbol.iterator](){return this.entries()}}function t(f,i){return new e(f,i)}function r(f){f.copy_||(f.assigned_=new Map,f.copy_=new Map(f.base_))}class n extends Set{constructor(i,s){super(),this[u]={type_:3,parent_:s,scope_:s?s.scope_:F(),modified_:!1,finalized_:!1,copy_:void 0,base_:i,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return l(this[u]).size}has(i){const s=this[u];return a(s),s.copy_?!!(s.copy_.has(i)||s.drafts_.has(i)&&s.copy_.has(s.drafts_.get(i))):s.base_.has(i)}add(i){const s=this[u];return a(s),this.has(i)||(c(s),h(s),s.copy_.add(i)),this}delete(i){if(!this.has(i))return!1;const s=this[u];return a(s),c(s),h(s),s.copy_.delete(i)||(s.drafts_.has(i)?s.copy_.delete(s.drafts_.get(i)):!1)}clear(){const i=this[u];a(i),l(i).size&&(c(i),h(i),i.copy_.clear())}values(){const i=this[u];return a(i),c(i),i.copy_.values()}entries(){const i=this[u];return a(i),c(i),i.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(i,s){const _=this.values();let m=_.next();for(;!m.done;)i.call(s,m.value,m.value,this),m=_.next()}}function o(f,i){return new n(f,i)}function c(f){f.copy_||(f.copy_=new Set,f.base_.forEach(i=>{if(p(i)){const s=v(i,f);f.drafts_.set(i,s),f.copy_.add(s)}else f.copy_.add(i)}))}function a(f){f.revoked_&&y(3,JSON.stringify(l(f)))}te("MapSet",{proxyMap_:t,proxySet_:o})}var d=new oe,ue=d.produce;d.produceWithPatches.bind(d);var _e=d.setAutoFreeze.bind(d);d.setUseStrictShallowCopy.bind(d);d.applyPatches.bind(d);var le=d.createDraft.bind(d),de=d.finishDraft.bind(d);export{le as c,ae as e,de as f,z as i,ue as p,_e as s};
