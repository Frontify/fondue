import{$}from"./useLayoutEffect-DrUzsR4Z.js";import{r as a,a as l}from"./iframe-1RlXDx_P.js";function x(t){let[e,u]=a.useState(t),r=a.useRef(e),n=a.useRef(null),f=a.useRef(()=>{if(!n.current)return;let d=n.current.next();if(d.done){n.current=null;return}r.current===d.value?f.current():u(d.value)});$(()=>{r.current=e,n.current&&f.current()});let c=a.useCallback(d=>{n.current=d(r.current),f.current()},[f]);return[e,c]}const b={prefix:String(Math.round(Math.random()*1e10)),current:0},p=l.createContext(b),v=l.createContext(!1);let s=new WeakMap;function S(t=!1){let e=a.useContext(p),u=a.useRef(null);if(u.current===null&&!t){var r,n;let f=(n=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||n===void 0||(r=n.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(f){let c=s.get(f);c==null?s.set(f,{id:e.current,state:f.memoizedState}):f.memoizedState!==c.state&&(e.current=c.id,s.delete(f))}u.current=++e.current}return u.current}function m(t){let e=a.useContext(p),u=S(!!t),r=`react-aria${e.prefix}`;return t||`${r}-${u}`}function g(t){let e=l.useId(),[u]=a.useState(M()),r=u?"react-aria":`react-aria${b.prefix}`;return t||`${r}-${e}`}const y=typeof l.useId=="function"?g:m;function w(){return!1}function h(){return!0}function C(t){return()=>{}}function M(){return typeof l.useSyncExternalStore=="function"?l.useSyncExternalStore(C,w,h):a.useContext(v)}let I=!!(typeof window<"u"&&window.document&&window.document.createElement),o=new Map,i;typeof FinalizationRegistry<"u"&&(i=new FinalizationRegistry(t=>{o.delete(t)}));function V(t){let[e,u]=a.useState(t),r=a.useRef(null),n=y(e),f=a.useRef(null);if(i&&i.register(f,n),I){const c=o.get(n);c&&!c.includes(r)?c.push(r):o.set(n,[r])}return $(()=>{let c=n;return()=>{i&&i.unregister(f),o.delete(c)}},[n]),a.useEffect(()=>{let c=r.current;return c&&u(c),()=>{c&&(r.current=null)}}),n}function q(t,e){if(t===e)return t;let u=o.get(t);if(u)return u.forEach(n=>n.current=e),e;let r=o.get(e);return r?(r.forEach(n=>n.current=t),t):e}function R(t=[]){let e=V(),[u,r]=x(e),n=a.useCallback(()=>{r(function*(){yield e,yield document.getElementById(e)?e:void 0})},[e,r]);return $(n,[e,n,...t]),u}function j(...t){return(...e)=>{for(let u of t)typeof u=="function"&&u(...e)}}export{R as $,V as a,j as b,M as c,q as d};
