import{r as l,j as f}from"./iframe-D8yZl62t.js";import{a as Ne,g as lt,u as ot,h as dt,r as it,i as ut,j as ct,d as V,f as pt,c as Te,b as mt,e as ft,I as Ce,C as gt,n as wt,E as yt,k as bt}from"./Tree-MoEQGSIm.js";import{b as Ie,P as ht}from"./focusStyle-hm6eSJHh.js";import{m as v}from"./merge-DI-veSMP.js";import{p as vt}from"./fondue-icons369-Bwuf9iyJ.js";const z=l.forwardRef(({active:a,showDragHandlerOnHoverOnly:d,activeColorStyle:i,...u},g)=>{const{selectedDragHanlderTextColor:k,dragHanlderTextColor:w}=Ne[i??"neutral"];return f.jsx("button",{type:"button","aria-label":"Draggable item",...u,ref:g,className:v([Ie,"tw-p-1 first:tw-ml-2 tw-rounded-sm hover:tw-cursor-grab group-hover:tw-opacity-100 group-focus-within:tw-opacity-100",u.disabled?"tw-invisible tw-pointer-events-none":"tw-visible",d?!a&&"tw-opacity-0":"tw-opacity-100",a?k:w]),"data-test-id":"fondue-tree-item-drag-handle",children:f.jsx(vt,{size:12})})});z.displayName="FondueDragHandle";z.__docgenInfo={description:"",methods:[],displayName:"FondueDragHandle",props:{active:{required:!1,tsType:{name:"boolean"},description:""},showDragHandlerOnHoverOnly:{required:!1,tsType:{name:"boolean"},description:""},activeColorStyle:{required:!1,tsType:{name:"union",raw:"'neutral' | 'soft' | 'none'",elements:[{name:"literal",value:"'neutral'"},{name:"literal",value:"'soft'"},{name:"literal",value:"'none'"}]},description:""}}};const xe=(a,d=10)=>{const i=l.useRef();return l.useCallback((...g)=>{clearTimeout(i.current),i.current=setTimeout(()=>a.apply(void 0,g),d)},[a,d])},Tt=a=>{const{treeState:d}=l.useContext(lt),i=d.selectedIds.has(a),u=d.expandedIds.has(a),g=d.projection;return{isSelected:i,isExpanded:u,projection:g}},Ct=({isSorting:a,wasDragging:d})=>!(a||d),qe=l.memo(l.forwardRef(({id:a,type:d,label:i,onDrop:u,accepts:g,showCaret:k,children:w,parentId:_,level:y=0,contentComponent:I,onClick:B,onSelect:W,onExpand:T,onShrink:F,registerOverlay:H,registerNodeChildren:L,unregisterNodeChildren:c,draggable:U=!0,expandable:K=!0,showDragHandlerOnHoverOnly:De=!0,dragHandlerPosition:b="left",showContentWhileDragging:E=!0,itemStyle:X,ignoreItemDoubleClick:G=!1,expandOnSelect:Se=!1,"data-test-id":ke="fondue-tree-item"},C)=>{var re,le,oe,de,ie,ue,ce,pe,me,fe,ge,we,ye,be,he;const{active:r,over:R}=ot(),{isSelected:m,isExpanded:h,projection:t}=Tt(a),J=l.useRef(),s=(r==null?void 0:r.id)===a,e=s&&t!==null&&t!==void 0?t:null,He=typeof((le=(re=R==null?void 0:R.data)==null?void 0:re.current)==null?void 0:le.accepts)=="string"?(oe=R.data.current.accepts)==null?void 0:oe.split(", "):[],Ee=typeof(e==null?void 0:e.accepts)=="string"?(de=e.accepts)==null?void 0:de.split(", "):[],q=((ie=r==null?void 0:r.data.current)==null?void 0:ie.type)||"",D=((ue=t==null?void 0:t.previousNode)==null?void 0:ue.depth)!==void 0&&(t==null?void 0:t.depth)>((ce=t==null?void 0:t.previousNode)==null?void 0:ce.depth),Re=D&&t&&t.depth-1===((pe=t==null?void 0:t.previousNode)==null?void 0:pe.depth),O=D&&((me=t==null?void 0:t.previousNode)==null?void 0:me.accepts)!==void 0&&(((fe=t==null?void 0:t.previousNode)==null?void 0:fe.accepts.includes(`${q}-deeper`))||((ge=t==null?void 0:t.previousNode)==null?void 0:ge.accepts.includes(`${q}-within`))),Ae=s&&Re&&((we=e==null?void 0:e.previousNode)==null?void 0:we.accepts)!==void 0&&((ye=e==null?void 0:e.previousNode)==null?void 0:ye.accepts.includes(`${q}-within`))||(e==null?void 0:e.isWithinParent)&&Ee.includes(`${q}-within`),S=s&&(r==null?void 0:r.data.current)&&(He.includes(q)&&!D||Ae),Q=xe(n=>{J.current===n&&(T==null||T(n))},bt);l.useEffect(()=>{var n,p,N;s&&(J.current=D?(n=e==null?void 0:e.previousNode)==null?void 0:n.id:null),s&&O&&(e!=null&&e.parentId)&&e.previousNode&&e.parentId===e.previousNode.id&&e.parentId!==((N=(p=r==null?void 0:r.data)==null?void 0:p.current)==null?void 0:N.parentId)&&Q(e==null?void 0:e.parentId)},[r==null?void 0:r.data,e==null?void 0:e.parentId,e==null?void 0:e.previousNode,Q,s,O,D]);const Me=l.useCallback(n=>{var ve;const{over:p,active:N}=n;!s||!e||N.id===(p==null?void 0:p.id)&&(e==null?void 0:e.depth)===((ve=N.data.current)==null?void 0:ve.level)||s&&p&&S&&u&&u({id:N.id,parentId:e.parentId,sort:e.position,contentComponent:I,parentType:e.type})},[s,e,S,u,I]),Ve=l.useCallback(n=>{n.active.id===a&&(H==null||H({contentComponent:I,children:w,id:a,label:i,level:y,dragHandlerPosition:b,showContentWhileDragging:E}))},[w,I,b,a,i,y,H,E]),_e=l.useCallback(n=>{n.active.id===a&&document.body.style.setProperty("cursor",S?"grabbing":"no-drop")},[S,a]);dt({onDragEnd:Me,onDragStart:Ve,onDragMove:_e});const Z=l.useCallback(n=>{n==null||n.stopPropagation(),h?F&&F(a):T&&T(a)},[a,h,T,F]),Be=xe(n=>{n.stopPropagation(),!(G&&n.detail>=2)&&(Se&&Z(),W==null||W(a),B==null||B(a))},G?300:0),P=_?(r==null?void 0:r.id)===_:!1,j=l.Children.count(w)>0,{enrichedChildren:Y,childrenIds:We}=l.useMemo(()=>{const n=it(w,{parentId:a,level:y+1});return{enrichedChildren:n,childrenIds:n.map(p=>p.props.id)}},[w,a,y]),{attributes:Fe,listeners:Le,transform:A,transition:Oe,setDraggableNodeRef:Ye,setDroppableNodeRef:$e,setActivatorNodeRef:ze}=ut({id:a,disabled:!U,data:{type:d,accepts:g,parentId:_,level:y},animateLayoutChanges:Ct,transition:null});ct(()=>{if(l.Children.count(Y)===0){c==null||c(a);return}if(s||P){c==null||c(a);return}h?L==null||L({id:a,children:Y}):c==null||c(a)},[s,h,P,Y,a]);const o=l.useMemo(()=>({spacingY:"none",contentHight:"single-line",shadow:"none",borderRadius:"small",borderWidth:"none",borderStyle:"none",activeColorStyle:"neutral",...X}),[X]),x=Ne[o.activeColorStyle??"neutral"],{liClassName:Ue,backgroundClassName:Ke}=l.useMemo(()=>({liClassName:v([Ie,"tw-box-content tw-relative tw-cursor-default tw-transition-colors tw-outline-none tw-ring-inset tw-group tw-no-underline tw-leading-5",!s&&m?x.selectedTextColor:x.textColor,pt[o.spacingY??"none"]]),backgroundClassName:v(["tw-block tw-absolute tw-inset-0 tw-transition-colors -tw-z-10",o.borderWidth!=="none"?V[o.borderRadius??"small"]:"",!s&&(!m||o.activeColorStyle!=="neutral")&&x.pressedBackgroundColor,!s&&m?x.selectedBackgroundColor:x.backgroundColor,m&&ht])}),[s,m,o,x]),Xe=E?!0:!s,Ge=v(["tw-max-w-full tw-grow tw-overflow-hidden",s&&E?"tw-opacity-75 tw-blur-sm tw-grayscale":""]),Je=h&&!s,ee=U&&!s,Qe=i!==void 0&&!s,M=!s&&K&&(k===void 0?j:k);let $="";!s&&!h&&M&&O&&((be=t==null?void 0:t.previousNode)==null?void 0:be.id)===a&&(t==null?void 0:t.depth)>((he=t==null?void 0:t.previousNode)==null?void 0:he.depth)&&($=v(["tw-border-solid tw-border-box-selected-strong",V[o.borderRadius??"small"],Te.small]));const Ze=o.borderWidth!=="none"&&$===""?v([Te[o.borderWidth??"none"],V[o.borderRadius??"small"],mt[o.borderStyle??"none"]]):"",Pe=o.contentHight==="single-line"?"tw-h-10":"tw-h-fit",je=o.contentHight==="single-line"?"tw-h-12":"tw-h-fit",et=v(["tw-relative tw-z-0 tw-transition-colors tw-flex tw-items-center tw-leading-5 tw-width-fit tw-justify-between tw-group",ft[o.shadow??"none"],s?"tw-border-dashed tw-border-2 tw-pr-0":Ze,s&&V[o.borderRadius??"small"],s?je:Pe,s&&(S?"tw-border-box-selected-strong tw-bg-box-selected-hover":"tw-bg-box-negative-hover tw-border-box-negative-strong-hover"),$]),te=e!=null&&e.depth?e.depth*Ce:void 0,ae=s?0:y*Ce,tt={paddingLeft:te??ae},at=o.borderWidth!=="none"?{}:{marginLeft:-1*(te??ae)},st={transform:gt.Transform.toString(A),transition:Oe},se={...Le,...Fe},nt=b!=="none"?se:{},ne=b!=="none"?f.jsx(z,{...nt,active:m,ref:ze,disabled:!ee,"aria-hidden":!ee,showDragHandlerOnHoverOnly:De,activeColorStyle:o.activeColorStyle??"neutral"}):null,rt=b==="none"?{...se}:{};return l.createElement("li",{...rt,id:a,key:a,tabIndex:0,role:"treeitem",style:tt,onKeyDown:wt,"aria-label":i,"aria-level":y+1,onClick:Be,className:Ue,ref:n=>{$e(n),typeof C=="function"?C(n):C!=null&&C.current&&(C.current=n)},"data-test-id":ke,"aria-selected":m,"aria-expanded":h,"data-has-children":j,"aria-owns":We.join(" ")},f.jsxs("div",{ref:Ye,className:et,style:st,children:[f.jsx("span",{className:Ke,style:at,"aria-hidden":!0}),b==="left"&&ne,K&&f.jsx(yt,{active:A!=null&&A.y?!1:m,onClick:Z,expanded:Je,disabled:!M,"aria-hidden":!M,className:M?"tw-visible":"tw-invisible tw-pointer-events-none"}),Qe&&f.jsx("span",{className:"first:tw-ml-3.5 tw-w-full tw-h-full tw-flex tw-items-center",children:i}),Xe&&f.jsx("div",{className:Ge,children:I}),b==="right"&&ne]}))}));qe.displayName="FondueTreeItem";qe.__docgenInfo={description:"",methods:[],displayName:"FondueTreeItem",props:{level:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},levelConstraint:{required:!1,tsType:{name:"Nullable",elements:[{name:"number"}],raw:"Nullable<number>"},description:""},parentId:{required:!1,tsType:{name:"string"},description:""},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:"onSelect is passed by the Tree component when cloning the TreeItem"},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:"onClick is the user defined callback to run after the onSelect"},onExpand:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},onShrink:{required:!1,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},registerOverlay:{required:!1,tsType:{name:"signature",type:"function",raw:"(overlay: Overlay) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
    id: string;
    label?: string;
    level?: number;
    children: ReactNode;
    contentComponent?: ReactNode;
    isSelected?: boolean;
    dragHandlerPosition?: DragHandlerPosition;
    showContentWhileDragging: boolean;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!1}},{key:"level",value:{name:"number",required:!1}},{key:"children",value:{name:"ReactNode",required:!0}},{key:"contentComponent",value:{name:"ReactNode",required:!1}},{key:"isSelected",value:{name:"boolean",required:!1}},{key:"dragHandlerPosition",value:{name:"union",raw:"'left' | 'right' | 'none'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'right'"},{name:"literal",value:"'none'"}],required:!1}},{key:"showContentWhileDragging",value:{name:"boolean",required:!0}}]}},name:"overlay"}],return:{name:"void"}}},description:""},unregisterNodeChildren:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: string) => void",signature:{arguments:[{type:{name:"string"},name:"payload"}],return:{name:"void"}}},description:""},registerNodeChildren:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: RegisterNodeChildrenPayload) => void",signature:{arguments:[{type:{name:"RegisterNodeChildrenPayload"},name:"payload"}],return:{name:"void"}}},description:""},draggable:{defaultValue:{value:"true",computed:!1},required:!1},expandable:{defaultValue:{value:"true",computed:!1},required:!1},showDragHandlerOnHoverOnly:{defaultValue:{value:"true",computed:!1},required:!1},dragHandlerPosition:{defaultValue:{value:"'left'",computed:!1},required:!1},showContentWhileDragging:{defaultValue:{value:"true",computed:!1},required:!1},ignoreItemDoubleClick:{defaultValue:{value:"false",computed:!1},required:!1},expandOnSelect:{defaultValue:{value:"false",computed:!1},required:!1},"data-test-id":{defaultValue:{value:"'fondue-tree-item'",computed:!1},required:!1}}};export{qe as T,Tt as u};
