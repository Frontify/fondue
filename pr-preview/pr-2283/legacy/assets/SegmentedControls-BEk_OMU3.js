import{j as u}from"./jsx-runtime-BYYWji4R.js";import{a as A,$ as E,m as _}from"./useFocusRing-CqhiwHAH.js";import{$ as j,a as O,b as C,c as k}from"./useFocusable-NpJIjJzn.js";import{$ as G,b as W,a as U}from"./useFormValidationState-CY2oi0R5.js";import{$ as K}from"./chain-zZtnTS2i.js";import{b as z}from"./FocusScope-BbG7qqtO.js";import{$ as Y}from"./useField-DK1vwUqC.js";import{$ as H}from"./context-dZDq9eSh.js";import{$ as N}from"./VisuallyHidden-BJ4JcGHV.js";import{$ as J}from"./useControlledState-CbyHarIm.js";import{r as x}from"./index-ClcD9ViR.js";import{u as Q}from"./useMemoizedId-DU5NJZZj.js";import{F as X}from"./focusStyle-CBFElZiz.js";import{m as D}from"./merge-DI-veSMP.js";import{m as Z}from"./motion-DqKuqH19.js";const M=new WeakMap;function ee(t,e,l){let{value:a,children:c,"aria-label":o,"aria-labelledby":f}=t;const n=t.isDisabled||e.isDisabled;let v=c!=null,m=o!=null||f!=null;!v&&!m&&console.warn("If you do not provide children, you must specify an aria-label for accessibility");let b=e.selectedValue===a,p=d=>{d.stopPropagation(),e.setSelectedValue(a)},{pressProps:y,isPressed:I}=j({isDisabled:n}),{pressProps:g,isPressed:h}=j({isDisabled:n,onPress(){var d;e.setSelectedValue(a),(d=l.current)===null||d===void 0||d.focus()}}),{focusableProps:P}=O(C(t,{onFocus:()=>e.setLastFocusedValue(a)}),l),V=C(y,P),S=k(t,{labelable:!0}),$=-1;e.selectedValue!=null?e.selectedValue===a&&($=0):(e.lastFocusedValue===a||e.lastFocusedValue==null)&&($=0),n&&($=void 0);let{name:w,descriptionId:i,errorMessageId:s,validationBehavior:r}=M.get(e);return G(l,e.selectedValue,e.setSelectedValue),W({validationBehavior:r},e,l),{labelProps:C(g,{onClick:d=>d.preventDefault()}),inputProps:C(S,{...V,type:"radio",name:w,tabIndex:$,disabled:n,required:e.isRequired&&r==="native",checked:b,value:a,onChange:p,"aria-describedby":[t["aria-describedby"],e.isInvalid?s:null,i].filter(Boolean).join(" ")||void 0}),isDisabled:n,isSelected:b,isPressed:I||h}}function te(t,e){let{name:l,isReadOnly:a,isRequired:c,isDisabled:o,orientation:f="vertical",validationBehavior:n="aria"}=t,{direction:v}=H(),{isInvalid:m,validationErrors:b,validationDetails:p}=e.displayValidation,{labelProps:y,fieldProps:I,descriptionProps:g,errorMessageProps:h}=Y({...t,labelElementType:"span",isInvalid:e.isInvalid,errorMessage:t.errorMessage||b}),P=k(t,{labelable:!0}),{focusWithinProps:V}=A({onBlurWithin(w){var i;(i=t.onBlur)===null||i===void 0||i.call(t,w),e.selectedValue||e.setLastFocusedValue(null)},onFocusWithin:t.onFocus,onFocusWithinChange:t.onFocusChange}),S=w=>{let i;switch(w.key){case"ArrowRight":v==="rtl"&&f!=="vertical"?i="prev":i="next";break;case"ArrowLeft":v==="rtl"&&f!=="vertical"?i="next":i="prev";break;case"ArrowDown":i="next";break;case"ArrowUp":i="prev";break;default:return}w.preventDefault();let s=z(w.currentTarget,{from:w.target}),r;i==="next"?(r=s.nextNode(),r||(s.currentNode=w.currentTarget,r=s.firstChild())):(r=s.previousNode(),r||(s.currentNode=w.currentTarget,r=s.lastChild())),r&&(r.focus(),e.setSelectedValue(r.value))},$=K(l);return M.set(e,{name:$,descriptionId:g.id,errorMessageId:h.id,validationBehavior:n}),{radioGroupProps:C(P,{role:"radiogroup",onKeyDown:S,"aria-invalid":e.isInvalid||void 0,"aria-errormessage":t["aria-errormessage"],"aria-readonly":a||void 0,"aria-required":c||void 0,"aria-disabled":o||void 0,"aria-orientation":f,...I,...V}),labelProps:y,descriptionProps:g,errorMessageProps:h,isInvalid:m,validationErrors:b,validationDetails:p}}let ae=Math.round(Math.random()*1e10),ie=0;function re(t){let e=x.useMemo(()=>t.name||`radio-group-${ae}-${++ie}`,[t.name]);var l;let[a,c]=J(t.value,(l=t.defaultValue)!==null&&l!==void 0?l:null,t.onChange),[o,f]=x.useState(null),n=U({...t,value:a}),v=b=>{!t.isReadOnly&&!t.isDisabled&&(c(b),n.commitValidation())},m=n.displayValidation.isInvalid;return{...n,name:e,selectedValue:a,setSelectedValue:v,lastFocusedValue:o,setLastFocusedValue:f,isDisabled:t.isDisabled||!1,isReadOnly:t.isReadOnly||!1,isRequired:t.isRequired||!1,validationState:t.validationState||(m?"invalid":null),isInvalid:m}}const R=t=>t.icon!==void 0,T=x.forwardRef((t,e)=>{const{id:l,item:a,disabled:c,radioGroupState:o,size:f}=t,n=x.useRef(null),v=a.id===o.selectedValue,{inputProps:m}=ee({value:a.id,"aria-label":R(a)?a.ariaLabel:a.value.toString(),isDisabled:c,id:v?l:void 0},o,n),{isFocusVisible:b,focusProps:p}=E(),y=()=>{var g;c||(o.setSelectedValue(a.id),(g=n.current)==null||g.focus(),_("pointer"))},I=()=>{switch(!0){case R(a):return"fondue-segmented-controls-item-icon";case typeof a.value=="string":return"fondue-segmented-controls-item-text";default:return"fondue-segmented-controls-item-number"}};return u.jsxs("div",{ref:e,className:D(["tw-relative",b&&X]),children:[u.jsx(N,{children:u.jsx("input",{...m,...p,"data-test-id":"fondue-segmented-controls-input",ref:n})}),u.jsx("div",{onClick:y,role:"none","data-test-id":I(),className:D(["tw-relative tw-w-full tw-py-1.5 tw-inline-flex tw-justify-center tw-items-center tw-font-sans tw-font-normal tw-h-full tw-text-center",f==="small"?"tw-px-2":"tw-px-4",v&&!c?"tw-transition tw-ease-in-out tw-delay-300 tw-text-text tw-bg-base":"tw-text-text-weak",c?"tw-text-box-disabled-inverse tw-bg-box-disabled tw-h-[2.15rem] tw-rounded hover:tw-cursor-not-allowed tw-border-line-x-strong":"hover:tw-text-text hover:tw-cursor-pointer"]),children:u.jsxs("span",{className:"tw-overflow-hidden tw-text-ellipsis tw-whitespace-nowrap tw-flex tw-items-center",children:[R(a)&&u.jsx("span",{className:"tw-leading-3",children:a.icon}),a.value&&u.jsx("span",{className:R(a)?"tw-ml-2":"",children:a.value.toString()})]})})]},a.id)});T.displayName="SegmentedControlsItem";const q=({id:t,items:e,activeItemId:l,onChange:a,ariaLabel:c="SegmentedControls",disabled:o=!1,hugWidth:f=!1,size:n})=>{const v=x.useMemo(()=>e.some(i=>!i.disabled),[e]),m=Q(t),b={onChange:a,value:l,label:c,isDisabled:o},p=re(b),{radioGroupProps:y,labelProps:I}=te(b,p),g=x.useRef([]),h=x.useRef(null),[P,V]=x.useState(null),S=x.useMemo(()=>e.map((i,s)=>u.jsx(T,{id:m,item:i,disabled:i.disabled??o,radioGroupState:p,ref:r=>g.current[s]=r,size:n},`fondue-segmented-controls-${m}-item-${i.id}`)),[e,m,o,p,n]),$=v?e.findIndex((i,s)=>{const r=i.id===p.selectedValue;if(i.disabled&&r)if(s>0){const d=s-1;p.setSelectedValue(e[d].id)}else{const d=s+1;p.setSelectedValue(e[d].id)}return r}):-1,w=f?"tw-flex":"tw-grid tw-grid-flow-col tw-auto-cols-fr tw-justify-evenly";return x.useLayoutEffect(()=>{const i=g.current[$];if(i&&h.current){const s=h.current.getBoundingClientRect(),r=i.getBoundingClientRect();let d=r.left-s.left,F=r.width;$===0?(d-=1,F+=2):F+=1;const B=F/s.width*100,L=d/s.width*100;V({width:`${B}%`,left:`${L}%`})}},[l,$,n]),u.jsxs("div",{className:D([f?"tw-inline-flex":"tw-flex","tw-relative"]),children:[u.jsx("fieldset",{...y,"data-test-id":"fondue-segmented-controls",className:D(["tw-relative tw-divide-x tw-divide-line-strong tw-w-full tw-h-9 tw-p-0 tw-border tw-border-solid tw-border-line-strong tw-m-0 tw-bg-base-alt tw-rounded tw-font-sans tw-text-sm tw-select-none",w]),ref:h,children:S}),u.jsx(N,{children:u.jsx("span",{...I,children:c})}),l&&P&&u.jsx(Z.div,{"aria-hidden":"true",animate:P,initial:!1,transition:{type:"tween",duration:.3},className:D(["tw-absolute tw-h-9 tw-box-border tw-border tw-rounded tw-pointer-events-none tw-top-0",o?"tw-border-line-x-strong hover:tw-cursor-not-allowed":"tw-border-line-xx-strong tw-bg-transparent"])})]})};q.displayName="FondueSegmentedControls";q.__docgenInfo={description:"@deprecated Use `SegmentedControl` from `@frontify/fondue/components` instead. Also check {@link https://github.com/Frontify/fondue/blob/main/packages/components/MIGRATING.md#segmented-control the migration guide}.",methods:[],displayName:"FondueSegmentedControls",props:{id:{required:!1,tsType:{name:"string"},description:""},items:{required:!0,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(TextOrNumberItem | IconItem)[]"},description:""},activeItemId:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},ariaLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'SegmentedControls'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hugWidth:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},size:{required:!1,tsType:{name:"union",raw:"'small' | 'medium'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'medium'"}]},description:""}}};export{q as S};
