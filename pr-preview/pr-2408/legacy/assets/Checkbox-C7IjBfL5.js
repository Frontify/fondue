import{j as m}from"./jsx-runtime-DF2Pcvd1.js";import{r as s}from"./index-B2-qRKKC.js";import{$ as z,a as te,b as F,c as ae}from"./useFocusable-DCA70-1P.js";import{$ as re}from"./useFormValidation-eNYIok5g.js";import{$ as ie}from"./useFormReset-BGrECoD3.js";import{$ as le}from"./useFocusRing-T6RsE8HB.js";import{$ as se}from"./useControlledState-CmdEzstM.js";import{I as ne}from"./InputLabel-WEPdRWrP.js";import{I as oe}from"./IconCheckMark-Db5JnUcj.js";import{I as de}from"./IconMinus-Bj705SiY.js";import{I as X}from"./IconSize-BcCrF_mi.js";import{u as ce}from"./useMemoizedId-BB39KVn8.js";import{F as ue}from"./focusStyle-BtNTXUM4.js";import{m as I}from"./merge-DI-veSMP.js";import{u as fe}from"./Button-DoFA_mR5.js";const Q={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},T={...Q,customError:!0,valid:!1},N={isInvalid:!1,validationDetails:Q,validationErrors:[]},ve=s.createContext({}),R="__formValidationState"+Date.now();function be(e){if(e[R]){let{realtimeValidation:t,displayValidation:r,updateValidation:a,resetValidation:o,commitValidation:i}=e[R];return{realtimeValidation:t,displayValidation:r,updateValidation:a,resetValidation:o,commitValidation:i}}return me(e)}function me(e){let{isInvalid:t,validationState:r,name:a,value:o,builtinValidation:i,validate:v,validationBehavior:c="aria"}=e;r&&(t||(t=r==="invalid"));let u=t!==void 0?{isInvalid:t,validationErrors:[],validationDetails:T}:null,h=s.useMemo(()=>{if(!v||o==null)return null;let n=we(v,o);return G(n)},[v,o]);i!=null&&i.validationDetails.valid&&(i=void 0);let w=s.useContext(ve),$=s.useMemo(()=>a?Array.isArray(a)?a.flatMap(n=>W(w[n])):W(w[a]):[],[w,a]),[S,b]=s.useState(w),[f,p]=s.useState(!1);w!==S&&(b(w),p(!1));let d=s.useMemo(()=>G(f?[]:$),[f,$]),l=s.useRef(N),[g,E]=s.useState(N),V=s.useRef(N),P=()=>{if(!k)return;x(!1);let n=h||i||l.current;q(n,V.current)||(V.current=n,E(n))},[k,x]=s.useState(!1);return s.useEffect(P),{realtimeValidation:u||d||h||i||N,displayValidation:c==="native"?u||d||g:u||d||h||i||g,updateValidation(n){c==="aria"&&!q(g,n)?E(n):l.current=n},resetValidation(){let n=N;q(n,V.current)||(V.current=n,E(n)),c==="native"&&x(!1),p(!0)},commitValidation(){c==="native"&&x(!0),p(!0)}}}function W(e){return e?Array.isArray(e)?e:[e]:[]}function we(e,t){if(typeof e=="function"){let r=e(t);if(r&&typeof r!="boolean")return W(r)}return[]}function G(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:T}:null}function q(e,t){return e===t?!0:!!e&&!!t&&e.isInvalid===t.isInvalid&&e.validationErrors.length===t.validationErrors.length&&e.validationErrors.every((r,a)=>r===t.validationErrors[a])&&Object.entries(e.validationDetails).every(([r,a])=>t.validationDetails[r]===a)}function pe(e,t,r){let{isDisabled:a=!1,isReadOnly:o=!1,value:i,name:v,form:c,children:u,"aria-label":h,"aria-labelledby":w,validationState:$="valid",isInvalid:S,onPressStart:b,onPressEnd:f,onPressChange:p,onPress:d,onPressUp:l,onClick:g}=e,E=y=>{y.stopPropagation(),t.setSelected(y.target.checked)},{pressProps:V,isPressed:P}=z({onPressStart:b,onPressEnd:f,onPressChange:p,onPress:d,onPressUp:l,onClick:g,isDisabled:a}),{pressProps:k,isPressed:x}=z({onPressStart:b,onPressEnd:f,onPressChange:p,onPressUp:l,onClick:g,onPress(y){var D;d==null||d(y),t.toggle(),(D=r.current)===null||D===void 0||D.focus()},isDisabled:a||o}),{focusableProps:_}=te(e,r),U=F(V,_),n=ae(e,{labelable:!0});return ie(r,t.defaultSelected,t.setSelected),{labelProps:F(k,{onClick:y=>y.preventDefault()}),inputProps:F(n,{"aria-invalid":S||$==="invalid"||void 0,"aria-errormessage":e["aria-errormessage"],"aria-controls":e["aria-controls"],"aria-readonly":o||void 0,onChange:E,disabled:a,...i==null?{}:{value:i},name:v,form:c,type:"checkbox",...U}),isSelected:t.isSelected,isPressed:P||x,isDisabled:a,isReadOnly:o,isInvalid:S||$==="invalid"}}function xe(e,t,r){let a=be({...e,value:t.isSelected}),{isInvalid:o,validationErrors:i,validationDetails:v}=a.displayValidation,{labelProps:c,inputProps:u,isSelected:h,isPressed:w,isDisabled:$,isReadOnly:S}=pe({...e,isInvalid:o},t,r);re(e,a,r);let{isIndeterminate:b,isRequired:f,validationBehavior:p="aria"}=e;s.useEffect(()=>{r.current&&(r.current.indeterminate=!!b)});let{pressProps:d}=z({isDisabled:$||S,onPress(){let{[R]:l}=e,{commitValidation:g}=l||a;g()}});return{labelProps:F(c,d),inputProps:{...u,checked:h,"aria-required":f&&p==="aria"||void 0,required:f&&p==="native"},isSelected:h,isPressed:w,isDisabled:$,isReadOnly:S,isInvalid:o,validationErrors:i,validationDetails:v}}function he(e={}){let{isReadOnly:t}=e,[r,a]=se(e.isSelected,e.defaultSelected||!1,e.onChange),[o]=s.useState(r);function i(u){t||a(u)}function v(){t||a(!r)}var c;return{isSelected:r,defaultSelected:(c=e.defaultSelected)!==null&&c!==void 0?c:o,setSelected:i,toggle:v}}var $e=(e=>(e.Checked="Checked",e.Unchecked="Unchecked",e.Mixed="Mixed",e))($e||{}),ge=(e=>(e.Default="Default",e.Weak="Weak",e.Strong="Strong",e))(ge||{}),Se=(e=>(e.Default="Default",e.Large="Large",e.XLarge="XLarge",e))(Se||{});const ke=e=>e==="Checked"||e==="Mixed",H="tw-bg-box-selected-strong tw-text-box-selected-strong-inverse hover:tw-bg-box-selected-strong-hover",Ve={Weak:"tw-bg-box-neutral-strong tw-text-box-neutral-strong-inverse hover:tw-bg-box-neutral-strong-hover",Default:H,Strong:H},ye={Default:"tw-h-4 tw-w-4",Large:"tw-h-5 tw-w-5",XLarge:"tw-h-8 tw-w-8"},Ee=({id:e,emphasis:t="Default",size:r="Default",disabled:a,required:o,label:i,hideLabel:v,tooltip:c,helperText:u,"aria-label":h,value:w,groupInputProps:$,onChange:S,state:b="Unchecked","data-test-id":f="checkbox"},p)=>{const d=ce(e),l=fe(p),{focusProps:g}=le(),E=he({onChange:a?void 0:S,isSelected:b==="Checked"}),[V,P]=s.useState(),k=s.useRef(null),x=s.useRef(null),[_,U]=s.useState(!1),[n,y]=s.useState(!1),D=C=>{C.key==="Tab"&&P(!0)},B=()=>{P(!1)};s.useEffect(()=>{var C,L;return(C=l==null?void 0:l.current)==null||C.addEventListener("keyup",D),(L=l==null?void 0:l.current)==null||L.addEventListener("blur",B),()=>{var O,j;(O=l==null?void 0:l.current)==null||O.removeEventListener("keyup",D),(j=l==null?void 0:l.current)==null||j.removeEventListener("blur",B)}},[]);const{inputProps:J}=xe({isDisabled:a,isRequired:o,isIndeterminate:b==="Mixed","aria-label":h,value:w},E,l),K={Checked:m.jsx(oe,{size:r==="XLarge"?X.Size24:X.Size16}),Mixed:m.jsx(de,{}),Unchecked:null},A=ke(b),Z=I(["tw-bg-box-disabled tw-pointer-events-none tw-text-box-disabled-inverse tw-border-line-strong",A&&"tw-text-box-disabled-inverse tw-border-line-strong"]),ee=A?Ve[t]:I(["tw-bg-base hover:tw-bg-box-neutral",t==="Strong"?"tw-border-2 tw-border-box-selected-strong":"tw-border tw-border-line-xx-strong"]),M=s.useCallback(()=>{var C,L,O,j;k.current&&U(((C=k.current)==null?void 0:C.scrollWidth)>((L=k.current)==null?void 0:L.clientWidth)),x.current&&y(((O=x.current)==null?void 0:O.scrollWidth)>((j=x.current)==null?void 0:j.clientWidth))},[k,x]);return s.useEffect(()=>{if(!(!i&&!u||v))return M(),window.removeEventListener("resize",M),window.addEventListener("resize",M),()=>{window.removeEventListener("resize",M)}},[i,u,v,M]),m.jsx("div",{className:"tw-gap-1 tw-transition-colors tw-w-full","data-test-id":f,children:m.jsx("div",{className:I(["tw-inline-flex tw-flex-row tw-rounded tw-w-full",V?ue:""]),children:m.jsx(ne,{id:`${d}-label`,disabled:a,clickable:!0,htmlFor:d,tooltip:c,required:o,bold:A,children:m.jsxs("span",{className:"tw-flex tw-items-center tw-whitespace-nowrap",children:[m.jsxs("span",{className:"tw-inline-flex",children:[m.jsx("input",{...F($||J,g),id:d,ref:l,className:"tw-sr-only","data-test-id":`${f}-input`,role:"checkbox","aria-checked":b==="Checked",required:o,"aria-label":h,"aria-labelledby":i?`${d}-label`:void 0}),m.jsx("span",{"data-test-id":`${f}-icon-box`,"aria-hidden":"true",className:I(["tw-leading-3 tw-relative tw-flex tw-items-center tw-justify-center tw-rounded tw-shrink-0 tw-flex-none",ye[r],a?Z:ee]),children:K[b]})]}),!v&&m.jsxs("span",{className:"tw-inline-flex tw-flex-col tw-min-w-0 tw-ml-1.5",children:[i&&m.jsx("span",{ref:k,"data-test-id":`${f}-label`,className:I(["tw-text-ellipsis tw-overflow-hidden","tw-text-xs tw-select-none hover:tw-cursor-pointer hover:tw-text-black dark:hover:tw-text-white group-hover:tw-text-black dark:group-hover:tw-text-white",A&&"tw-font-medium"]),title:_?i:void 0,children:i}),u&&m.jsx("span",{ref:x,"data-test-id":`${f}-helper-text`,className:I(["tw-text-ellipsis tw-overflow-hidden","tw-font-sans tw-text-xs tw-font-normal",a?"text-disabled":"tw-text-text-weak"]),title:n?u:void 0,children:u})]})]})})})})},Y=s.forwardRef(Ee);Y.displayName="FondueCheckbox";Y.__docgenInfo={description:"@deprecated Use `Checkbox` from `@frontify/fondue/components` instead. Also check {@link https://github.com/Frontify/fondue/blob/main/packages/components/MIGRATING.md#checkbox the migration guide}.",methods:[],displayName:"FondueCheckbox",props:{emphasis:{defaultValue:{value:"CheckboxEmphasis.Default",computed:!0},required:!1},size:{defaultValue:{value:"CheckboxSize.Default",computed:!0},required:!1},state:{defaultValue:{value:"CheckboxState.Unchecked",computed:!0},required:!1},"data-test-id":{defaultValue:{value:"'checkbox'",computed:!1},required:!1}}};export{he as $,$e as C,Se as a,ge as b,Y as c,be as d,N as e,xe as f,R as g};
