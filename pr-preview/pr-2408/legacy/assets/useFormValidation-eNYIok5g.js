import{b as $}from"./useFocusRing-T6RsE8HB.js";import{r as f}from"./index-B2-qRKKC.js";import{a as g,$ as u}from"./useEffectEvent-Bx4XsOxK.js";function I(a,e,i){let{validationBehavior:c,focus:m}=a;g(()=>{if(c==="native"&&(i!=null&&i.current)&&!i.current.disabled){let n=e.realtimeValidation.isInvalid?e.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";i.current.setCustomValidity(n),i.current.hasAttribute("title")||(i.current.title=""),e.realtimeValidation.isInvalid||e.updateValidation(b(i.current))}});let r=f.useRef(!1),l=u(()=>{r.current||e.resetValidation()}),d=u(n=>{var t;e.displayValidation.isInvalid||e.commitValidation();let o=i==null||(t=i.current)===null||t===void 0?void 0:t.form;if(!n.defaultPrevented&&i&&o&&h(o)===i.current){var s;m?m():(s=i.current)===null||s===void 0||s.focus(),$("keyboard")}n.preventDefault()}),v=u(()=>{e.commitValidation()});f.useEffect(()=>{let n=i==null?void 0:i.current;if(!n)return;let t=n.form,o=t==null?void 0:t.reset;return t&&(t.reset=()=>{r.current=!window.event||window.event.type==="message"&&window.event.target instanceof MessagePort,o==null||o.call(t),r.current=!1}),n.addEventListener("invalid",d),n.addEventListener("change",v),t==null||t.addEventListener("reset",l),()=>{n.removeEventListener("invalid",d),n.removeEventListener("change",v),t==null||t.removeEventListener("reset",l),t&&(t.reset=o)}},[i,d,v,l,c])}function p(a){let e=a.validity;return{badInput:e.badInput,customError:e.customError,patternMismatch:e.patternMismatch,rangeOverflow:e.rangeOverflow,rangeUnderflow:e.rangeUnderflow,stepMismatch:e.stepMismatch,tooLong:e.tooLong,tooShort:e.tooShort,typeMismatch:e.typeMismatch,valueMissing:e.valueMissing,valid:e.valid}}function b(a){return{isInvalid:!a.validity.valid,validationDetails:p(a),validationErrors:a.validationMessage?[a.validationMessage]:[]}}function h(a){for(let e=0;e<a.elements.length;e++){let i=a.elements[e];if(!i.validity.valid)return i}return null}export{I as $};
