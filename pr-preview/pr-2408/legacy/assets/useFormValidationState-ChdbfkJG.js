import{r as n}from"./index-B2-qRKKC.js";const I={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},A={...I,customError:!0,valid:!1},c={isInvalid:!1,validationDetails:I,validationErrors:[]},O=n.createContext({}),g="__formValidationState"+Date.now();function j(e){if(e[g]){let{realtimeValidation:a,displayValidation:t,updateValidation:i,resetValidation:s,commitValidation:l}=e[g];return{realtimeValidation:a,displayValidation:t,updateValidation:i,resetValidation:s,commitValidation:l}}return R(e)}function R(e){let{isInvalid:a,validationState:t,name:i,value:s,builtinValidation:l,validate:d,validationBehavior:o="aria"}=e;t&&(a||(a=t==="invalid"));let v=a!==void 0?{isInvalid:a,validationErrors:[],validationDetails:A}:null,$=n.useMemo(()=>{if(!d||s==null)return null;let r=B(d,s);return h(r)},[d,s]);l!=null&&l.validationDetails.valid&&(l=void 0);let u=n.useContext(O),x=n.useMemo(()=>i?Array.isArray(i)?i.flatMap(r=>S(u[r])):S(u[i]):[],[u,i]),[C,w]=n.useState(u),[D,V]=n.useState(!1);u!==C&&(w(u),V(!1));let m=n.useMemo(()=>h(D?[]:x),[D,x]),M=n.useRef(c),[b,E]=n.useState(c),f=n.useRef(c),T=()=>{if(!L)return;p(!1);let r=$||l||M.current;y(r,f.current)||(f.current=r,E(r))},[L,p]=n.useState(!1);return n.useEffect(T),{realtimeValidation:v||m||$||l||c,displayValidation:o==="native"?v||m||b:v||m||$||l||b,updateValidation(r){o==="aria"&&!y(b,r)?E(r):M.current=r},resetValidation(){let r=c;y(r,f.current)||(f.current=r,E(r)),o==="native"&&p(!1),V(!0)},commitValidation(){o==="native"&&p(!0),V(!0)}}}function S(e){return e?Array.isArray(e)?e:[e]:[]}function B(e,a){if(typeof e=="function"){let t=e(a);if(t&&typeof t!="boolean")return S(t)}return[]}function h(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:A}:null}function y(e,a){return e===a?!0:!!e&&!!a&&e.isInvalid===a.isInvalid&&e.validationErrors.length===a.validationErrors.length&&e.validationErrors.every((t,i)=>t===a.validationErrors[i])&&Object.entries(e.validationDetails).every(([t,i])=>a.validationDetails[t]===i)}function q(...e){let a=new Set,t=!1,i={...I};for(let d of e){var s,l;for(let o of d.validationErrors)a.add(o);t||(t=d.isInvalid);for(let o in i)(s=i)[l=o]||(s[l]=d.validationDetails[o])}return i.valid=!t,{isInvalid:t,validationErrors:[...a],validationDetails:i}}export{j as $,q as a};
