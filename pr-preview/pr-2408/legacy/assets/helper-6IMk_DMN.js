import{j as Ae,v as Te,e as de,c as Be,u as oe,d as Se,B as Oe,k as ye}from"./useFocusRing-BMciCUIT.js";import{r as b,R as he}from"./index-B2-qRKKC.js";import{$ as we,a as He}from"./chain-z5L_5vtA.js";import{$ as Fe,b as V,d as Ee,g as ne,i as We}from"./useFocusable-BhTWlbU3.js";import{$ as se,b as G}from"./keyboard-APSnmnkX.js";import{$ as ae,a as ce}from"./useEffectEvent-BOE4tD14.js";import{b as ze}from"./FocusScope-DT2GjNsa.js";import{r as Ue}from"./index-CFX93qP1.js";import{$ as Re}from"./context-CzRDNd1J.js";import{c as je}from"./SelectionManager-CwM1DjHu.js";import{j as ve}from"./jsx-runtime-DF2Pcvd1.js";function be(r,e){const t=b.useRef(!0),l=b.useRef(null);ae(()=>(t.current=!0,()=>{t.current=!1}),[]),ae(()=>{t.current?t.current=!1:(!l.current||e.some((i,n)=>!Object.is(i,l[n])))&&r(),l.current=e},e)}function Ge(r,e){const t=[];for(;r&&r!==document.documentElement;)se(r,e)&&t.push(r),r=r.parentElement;return t}let Ve=0;const re=new Map;function Ye(r){let[e,t]=b.useState();return ae(()=>{if(!r)return;let l=re.get(r);if(l)t(l.element.id);else{let i=`react-aria-description-${Ve++}`;t(i);let n=document.createElement("div");n.id=i,n.style.display="none",n.textContent=r,document.body.appendChild(n),l={refCount:0,element:n},re.set(r,l)}return l.refCount++,()=>{l&&--l.refCount===0&&(l.element.remove(),re.delete(r))}},[r]),{"aria-describedby":r?e:void 0}}function Y(r,e,t,l){let i=ce(t),n=t==null;b.useEffect(()=>{if(n||!r.current)return;let a=r.current;return a.addEventListener(e,i,l),()=>{a.removeEventListener(e,i,l)}},[r,e,l,n,i])}function Ce(r,e){let t=ge(r,e,"left"),l=ge(r,e,"top"),i=e.offsetWidth,n=e.offsetHeight,a=r.scrollLeft,u=r.scrollTop,{borderTopWidth:f,borderLeftWidth:h,scrollPaddingTop:w,scrollPaddingRight:g,scrollPaddingBottom:p,scrollPaddingLeft:K}=getComputedStyle(r),{scrollMarginTop:y,scrollMarginRight:m,scrollMarginBottom:D,scrollMarginLeft:E}=getComputedStyle(e),P=a+parseInt(h,10),M=u+parseInt(f,10),F=P+r.clientWidth,A=M+r.clientHeight,T=parseInt(w,10)||0,C=parseInt(p,10)||0,L=parseInt(g,10)||0,N=parseInt(K,10)||0,B=parseInt(y,10)||0,I=parseInt(D,10)||0,R=parseInt(m,10)||0,x=parseInt(E,10)||0,W=t-x,O=t+i+R,z=l-B,s=l+n+I,d=a+parseInt(h,10)+N,v=F-L,o=u+parseInt(f,10)+T,$=A-C;(W>d||O<v)&&(W<=a+N?a=W-parseInt(h,10)-N:O>F-L&&(a+=O-F+L)),(z>o||s<$)&&(z<=M+T?u=z-parseInt(f,10)-T:s>A-C&&(u+=s-A+C)),r.scrollTo({left:a,top:u})}function ge(r,e,t){const l=t==="left"?"offsetLeft":"offsetTop";let i=0;for(;e.offsetParent&&(i+=e[l],e.offsetParent!==r);){if(e.offsetParent.contains(r)){i-=r[l];break}e=e.offsetParent}return i}function $e(r,e){if(r&&document.contains(r)){let a=document.scrollingElement||document.documentElement;if(!(window.getComputedStyle(a).overflow==="hidden")&&!Ae()){var t;let{left:f,top:h}=r.getBoundingClientRect();r==null||(t=r.scrollIntoView)===null||t===void 0||t.call(r,{block:"nearest"});let{left:w,top:g}=r.getBoundingClientRect();if(Math.abs(f-w)>1||Math.abs(h-g)>1){var l,i,n;e==null||(i=e.containingElement)===null||i===void 0||(l=i.scrollIntoView)===null||l===void 0||l.call(i,{block:"center",inline:"center"}),(n=r.scrollIntoView)===null||n===void 0||n.call(r,{block:"nearest"})}}else{let f=Ge(r);for(let h of f)Ce(h,r)}}}const Xe="react-aria-clear-focus",qe="react-aria-focus";let ue=!1,X=0;function Ze(){ue=!0,setTimeout(()=>{ue=!1},50)}function me(r){r.pointerType==="touch"&&Ze()}function Je(){if(!(typeof document>"u"))return X===0&&typeof PointerEvent<"u"&&document.addEventListener("pointerup",me),X++,()=>{X--,!(X>0)&&typeof PointerEvent<"u"&&document.removeEventListener("pointerup",me)}}function Dt(r){let{onHoverStart:e,onHoverChange:t,onHoverEnd:l,isDisabled:i}=r,[n,a]=b.useState(!1),u=b.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;b.useEffect(Je,[]);let{addGlobalListener:f,removeAllGlobalListeners:h}=Te(),{hoverProps:w,triggerHoverEnd:g}=b.useMemo(()=>{let p=(m,D)=>{if(u.pointerType=D,i||D==="touch"||u.isHovered||!m.currentTarget.contains(m.target))return;u.isHovered=!0;let E=m.currentTarget;u.target=E,f(de(m.target),"pointerover",P=>{u.isHovered&&u.target&&!Be(u.target,P.target)&&K(P,P.pointerType)},{capture:!0}),e&&e({type:"hoverstart",target:E,pointerType:D}),t&&t(!0),a(!0)},K=(m,D)=>{let E=u.target;u.pointerType="",u.target=null,!(D==="touch"||!u.isHovered||!E)&&(u.isHovered=!1,h(),l&&l({type:"hoverend",target:E,pointerType:D}),t&&t(!1),a(!1))},y={};return typeof PointerEvent<"u"&&(y.onPointerEnter=m=>{ue&&m.pointerType==="mouse"||p(m,m.pointerType)},y.onPointerLeave=m=>{!i&&m.currentTarget.contains(m.target)&&K(m,m.pointerType)}),{hoverProps:y,triggerHoverEnd:K}},[e,t,l,i,u,f,h]);return b.useEffect(()=>{i&&g({currentTarget:u.target},u.pointerType)},[i]),{hoverProps:w,isHovered:n}}const Qe=500;function _e(r){let{isDisabled:e,onLongPressStart:t,onLongPressEnd:l,onLongPress:i,threshold:n=Qe,accessibilityDescription:a}=r;const u=b.useRef(void 0);let{addGlobalListener:f,removeGlobalListener:h}=Te(),{pressProps:w}=Fe({isDisabled:e,onPressStart(p){if(p.continuePropagation(),(p.pointerType==="mouse"||p.pointerType==="touch")&&(t&&t({...p,type:"longpressstart"}),u.current=setTimeout(()=>{p.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),de(p.target).activeElement!==p.target&&oe(p.target),i&&i({...p,type:"longpress"}),u.current=void 0},n),p.pointerType==="touch")){let K=y=>{y.preventDefault()};f(p.target,"contextmenu",K,{once:!0}),f(window,"pointerup",()=>{setTimeout(()=>{h(p.target,"contextmenu",K)},30)},{once:!0})}},onPressEnd(p){u.current&&clearTimeout(u.current),l&&(p.pointerType==="mouse"||p.pointerType==="touch")&&l({...p,type:"longpressend"})}}),g=Ye(i&&!e?a:void 0);return{longPressProps:V(w,g)}}function Le(r){let e=tt(de(r));e!==r&&(e&&et(e,r),r&&Ie(r,e))}function et(r,e){r.dispatchEvent(new FocusEvent("blur",{relatedTarget:e})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:e}))}function Ie(r,e){r.dispatchEvent(new FocusEvent("focus",{relatedTarget:e})),r.dispatchEvent(new FocusEvent("focusin",{bubbles:!0,relatedTarget:e}))}function tt(r){let e=Se(r),t=e==null?void 0:e.getAttribute("aria-activedescendant");return t&&r.getElementById(t)||e}let ie=new Map;function lt(r){let{locale:e}=Re(),t=e+(r?Object.entries(r).sort((i,n)=>i[0]<n[0]?-1:1).join():"");if(ie.has(t))return ie.get(t);let l=new Intl.Collator(e,r);return ie.set(t,l),l}function fe(r){return Oe()?r.altKey:r.ctrlKey}function q(r,e){var t,l;let i=`[data-key="${CSS.escape(String(e))}"]`,n=(t=r.current)===null||t===void 0?void 0:t.dataset.collection;return n&&(i=`[data-collection="${CSS.escape(n)}"]${i}`),(l=r.current)===null||l===void 0?void 0:l.querySelector(i)}const Me=new WeakMap;function rt(r){let e=we();return Me.set(r,e),e}function it(r){return Me.get(r)}const ot=1e3;function nt(r){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:l}=r,i=b.useRef({search:"",timeout:void 0}).current,n=a=>{let u=st(a.key);if(!(!u||a.ctrlKey||a.metaKey||!a.currentTarget.contains(a.target)||i.search.length===0&&u===" ")){if(u===" "&&i.search.trim().length>0&&(a.preventDefault(),"continuePropagation"in a||a.stopPropagation()),i.search+=u,e.getKeyForSearch!=null){let f=e.getKeyForSearch(i.search,t.focusedKey);f==null&&(f=e.getKeyForSearch(i.search)),f!=null&&(t.setFocusedKey(f),l&&l(f))}clearTimeout(i.timeout),i.timeout=setTimeout(()=>{i.search=""},ot)}};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?n:void 0}}}function st(r){return r.length===1||!/^[A-Z]/i.test(r)?r:""}function at(r){let{selectionManager:e,keyboardDelegate:t,ref:l,autoFocus:i=!1,shouldFocusWrap:n=!1,disallowEmptySelection:a=!1,disallowSelectAll:u=!1,escapeKeyBehavior:f="clearSelection",selectOnFocus:h=e.selectionBehavior==="replace",disallowTypeAhead:w=!1,shouldUseVirtualFocus:g,allowsTabNavigation:p=!1,isVirtualized:K,scrollRef:y=l,linkBehavior:m="action"}=r,{direction:D}=Re(),E=Ee(),P=s=>{var d;if(s.altKey&&s.key==="Tab"&&s.preventDefault(),!(!((d=l.current)===null||d===void 0)&&d.contains(s.target)))return;const v=(c,U)=>{if(c!=null){if(e.isLink(c)&&m==="selection"&&h&&!fe(s)){Ue.flushSync(()=>{e.setFocusedKey(c,U)});let j=q(l,c),pe=e.getItemProps(c);j&&E.open(j,s,pe.href,pe.routerOptions);return}if(e.setFocusedKey(c,U),e.isLink(c)&&m==="override")return;s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(c):h&&!fe(s)&&e.replaceSelection(c)}};switch(s.key){case"ArrowDown":if(t.getKeyBelow){var o,$,S;let c=e.focusedKey!=null?(o=t.getKeyBelow)===null||o===void 0?void 0:o.call(t,e.focusedKey):($=t.getFirstKey)===null||$===void 0?void 0:$.call(t);c==null&&n&&(c=(S=t.getFirstKey)===null||S===void 0?void 0:S.call(t,e.focusedKey)),c!=null&&(s.preventDefault(),v(c))}break;case"ArrowUp":if(t.getKeyAbove){var k,H,Z;let c=e.focusedKey!=null?(k=t.getKeyAbove)===null||k===void 0?void 0:k.call(t,e.focusedKey):(H=t.getLastKey)===null||H===void 0?void 0:H.call(t);c==null&&n&&(c=(Z=t.getLastKey)===null||Z===void 0?void 0:Z.call(t,e.focusedKey)),c!=null&&(s.preventDefault(),v(c))}break;case"ArrowLeft":if(t.getKeyLeftOf){var J,Q,_;let c=e.focusedKey!=null?(J=t.getKeyLeftOf)===null||J===void 0?void 0:J.call(t,e.focusedKey):null;c==null&&n&&(c=D==="rtl"?(Q=t.getFirstKey)===null||Q===void 0?void 0:Q.call(t,e.focusedKey):(_=t.getLastKey)===null||_===void 0?void 0:_.call(t,e.focusedKey)),c!=null&&(s.preventDefault(),v(c,D==="rtl"?"first":"last"))}break;case"ArrowRight":if(t.getKeyRightOf){var ee,te,le;let c=e.focusedKey!=null?(ee=t.getKeyRightOf)===null||ee===void 0?void 0:ee.call(t,e.focusedKey):null;c==null&&n&&(c=D==="rtl"?(te=t.getLastKey)===null||te===void 0?void 0:te.call(t,e.focusedKey):(le=t.getFirstKey)===null||le===void 0?void 0:le.call(t,e.focusedKey)),c!=null&&(s.preventDefault(),v(c,D==="rtl"?"last":"first"))}break;case"Home":if(t.getFirstKey){if(e.focusedKey===null&&s.shiftKey)return;s.preventDefault();let c=t.getFirstKey(e.focusedKey,G(s));e.setFocusedKey(c),c!=null&&(G(s)&&s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(c):h&&e.replaceSelection(c))}break;case"End":if(t.getLastKey){if(e.focusedKey===null&&s.shiftKey)return;s.preventDefault();let c=t.getLastKey(e.focusedKey,G(s));e.setFocusedKey(c),c!=null&&(G(s)&&s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(c):h&&e.replaceSelection(c))}break;case"PageDown":if(t.getKeyPageBelow&&e.focusedKey!=null){let c=t.getKeyPageBelow(e.focusedKey);c!=null&&(s.preventDefault(),v(c))}break;case"PageUp":if(t.getKeyPageAbove&&e.focusedKey!=null){let c=t.getKeyPageAbove(e.focusedKey);c!=null&&(s.preventDefault(),v(c))}break;case"a":G(s)&&e.selectionMode==="multiple"&&u!==!0&&(s.preventDefault(),e.selectAll());break;case"Escape":f==="clearSelection"&&!a&&e.selectedKeys.size!==0&&(s.stopPropagation(),s.preventDefault(),e.clearSelection());break;case"Tab":if(!p){if(s.shiftKey)l.current.focus();else{let c=ze(l.current,{tabbable:!0}),U,j;do j=c.lastChild(),j&&(U=j);while(j);U&&!U.contains(document.activeElement)&&oe(U)}break}}},M=b.useRef({top:0,left:0});Y(y,"scroll",K?void 0:()=>{var s,d,v,o;M.current={top:(v=(s=y.current)===null||s===void 0?void 0:s.scrollTop)!==null&&v!==void 0?v:0,left:(o=(d=y.current)===null||d===void 0?void 0:d.scrollLeft)!==null&&o!==void 0?o:0}});let F=s=>{if(e.isFocused){s.currentTarget.contains(s.target)||e.setFocused(!1);return}if(s.currentTarget.contains(s.target)){if(e.setFocused(!0),e.focusedKey==null){var d,v;let S=H=>{H!=null&&(e.setFocusedKey(H),h&&!e.isSelected(H)&&e.replaceSelection(H))},k=s.relatedTarget;var o,$;k&&s.currentTarget.compareDocumentPosition(k)&Node.DOCUMENT_POSITION_FOLLOWING?S((o=e.lastSelectedKey)!==null&&o!==void 0?o:(d=t.getLastKey)===null||d===void 0?void 0:d.call(t)):S(($=e.firstSelectedKey)!==null&&$!==void 0?$:(v=t.getFirstKey)===null||v===void 0?void 0:v.call(t))}else!K&&y.current&&(y.current.scrollTop=M.current.top,y.current.scrollLeft=M.current.left);if(e.focusedKey!=null&&y.current){let S=q(l,e.focusedKey);S instanceof HTMLElement&&(!S.contains(document.activeElement)&&!g&&oe(S),ye()==="keyboard"&&$e(S,{containingElement:l.current}))}}},A=s=>{s.currentTarget.contains(s.relatedTarget)||e.setFocused(!1)},T=b.useRef(!1);Y(l,qe,g?s=>{let{detail:d}=s;s.stopPropagation(),e.setFocused(!0),(d==null?void 0:d.focusStrategy)==="first"&&(T.current=!0)}:void 0);let C=ce(()=>{var s,d;let v=(d=(s=t.getFirstKey)===null||s===void 0?void 0:s.call(t))!==null&&d!==void 0?d:null;if(v==null){let o=Se();Le(l.current),Ie(o,null),e.collection.size>0&&(T.current=!1)}else e.setFocusedKey(v),T.current=!1});be(()=>{T.current&&C()},[e.collection,C]);let L=ce(()=>{e.collection.size>0&&(T.current=!1)});be(()=>{L()},[e.focusedKey,L]),Y(l,Xe,g?s=>{var d;s.stopPropagation(),e.setFocused(!1),!((d=s.detail)===null||d===void 0)&&d.clearFocusKey&&e.setFocusedKey(null)}:void 0);const N=b.useRef(i),B=b.useRef(!1);b.useEffect(()=>{if(N.current){var s,d;let $=null;var v;i==="first"&&($=(v=(s=t.getFirstKey)===null||s===void 0?void 0:s.call(t))!==null&&v!==void 0?v:null);var o;i==="last"&&($=(o=(d=t.getLastKey)===null||d===void 0?void 0:d.call(t))!==null&&o!==void 0?o:null);let S=e.selectedKeys;if(S.size){for(let k of S)if(e.canSelectItem(k)){$=k;break}}e.setFocused(!0),e.setFocusedKey($),$==null&&!g&&l.current&&ne(l.current),e.collection.size>0&&(N.current=!1,B.current=!0)}});let I=b.useRef(e.focusedKey),R=b.useRef(null);b.useEffect(()=>{if(e.isFocused&&e.focusedKey!=null&&(e.focusedKey!==I.current||B.current)&&y.current&&l.current){let s=ye(),d=q(l,e.focusedKey);if(!(d instanceof HTMLElement))return;(s==="keyboard"||B.current)&&(R.current&&cancelAnimationFrame(R.current),R.current=requestAnimationFrame(()=>{y.current&&(Ce(y.current,d),s!=="virtual"&&$e(d,{containingElement:l.current}))}))}!g&&e.isFocused&&e.focusedKey==null&&I.current!=null&&l.current&&ne(l.current),I.current=e.focusedKey,B.current=!1}),b.useEffect(()=>()=>{R.current&&cancelAnimationFrame(R.current)},[]),Y(l,"react-aria-focus-scope-restore",s=>{s.preventDefault(),e.setFocused(!0)});let x={onKeyDown:P,onFocus:F,onBlur:A,onMouseDown(s){y.current===s.target&&s.preventDefault()}},{typeSelectProps:W}=nt({keyboardDelegate:t,selectionManager:e});w||(x=V(W,x));let O;g||(O=e.focusedKey==null?0:-1);let z=rt(e.collection);return{collectionProps:V(x,{tabIndex:O,"data-collection":z})}}function Tt(r){let{id:e,selectionManager:t,key:l,ref:i,shouldSelectOnPressUp:n,shouldUseVirtualFocus:a,focus:u,isDisabled:f,onAction:h,allowsDifferentPressOrigin:w,linkBehavior:g="action"}=r,p=Ee();e=we(e);let K=o=>{if(o.pointerType==="keyboard"&&fe(o))t.toggleSelection(l);else{if(t.selectionMode==="none")return;if(t.isLink(l)){if(g==="selection"&&i.current){let $=t.getItemProps(l);p.open(i.current,o,$.href,$.routerOptions),t.setSelectedKeys(t.selectedKeys);return}else if(g==="override"||g==="none")return}t.selectionMode==="single"?t.isSelected(l)&&!t.disallowEmptySelection?t.toggleSelection(l):t.replaceSelection(l):o&&o.shiftKey?t.extendSelection(l):t.selectionBehavior==="toggle"||o&&(G(o)||o.pointerType==="touch"||o.pointerType==="virtual")?t.toggleSelection(l):t.replaceSelection(l)}};b.useEffect(()=>{l===t.focusedKey&&t.isFocused&&(a?Le(i.current):u?u():document.activeElement!==i.current&&i.current&&ne(i.current))},[i,l,t.focusedKey,t.childFocusStrategy,t.isFocused,a]),f=f||t.isDisabled(l);let y={};!a&&!f?y={tabIndex:l===t.focusedKey?0:-1,onFocus(o){o.target===i.current&&t.setFocusedKey(l)}}:f&&(y.onMouseDown=o=>{o.preventDefault()});let m=t.isLink(l)&&g==="override",D=h&&r.UNSTABLE_itemBehavior==="action",E=t.isLink(l)&&g!=="selection"&&g!=="none",P=!f&&t.canSelectItem(l)&&!m&&!D,M=(h||E)&&!f,F=M&&(t.selectionBehavior==="replace"?!P:!P||t.isEmpty),A=M&&P&&t.selectionBehavior==="replace",T=F||A,C=b.useRef(null),L=T&&P,N=b.useRef(!1),B=b.useRef(!1),I=t.getItemProps(l),R=o=>{if(h){var $;h(),($=i.current)===null||$===void 0||$.dispatchEvent(new CustomEvent("react-aria-item-action",{bubbles:!0}))}E&&i.current&&p.open(i.current,o,I.href,I.routerOptions)},x={ref:i};if(n?(x.onPressStart=o=>{C.current=o.pointerType,N.current=L,o.pointerType==="keyboard"&&(!T||Pe())&&K(o)},w?(x.onPressUp=F?void 0:o=>{o.pointerType==="mouse"&&P&&K(o)},x.onPress=F?R:o=>{o.pointerType!=="keyboard"&&o.pointerType!=="mouse"&&P&&K(o)}):x.onPress=o=>{if(F||A&&o.pointerType!=="mouse"){if(o.pointerType==="keyboard"&&!Ke())return;R(o)}else o.pointerType!=="keyboard"&&P&&K(o)}):(x.onPressStart=o=>{C.current=o.pointerType,N.current=L,B.current=F,P&&(o.pointerType==="mouse"&&!F||o.pointerType==="keyboard"&&(!M||Pe()))&&K(o)},x.onPress=o=>{(o.pointerType==="touch"||o.pointerType==="pen"||o.pointerType==="virtual"||o.pointerType==="keyboard"&&T&&Ke()||o.pointerType==="mouse"&&B.current)&&(T?R(o):P&&K(o))}),y["data-collection"]=it(t.collection),y["data-key"]=l,x.preventFocusOnPress=a,a&&(x=V(x,{onPressStart(o){o.pointerType!=="touch"&&(t.setFocused(!0),t.setFocusedKey(l))},onPress(o){o.pointerType==="touch"&&(t.setFocused(!0),t.setFocusedKey(l))}})),I)for(let o of["onPressStart","onPressEnd","onPressChange","onPress","onPressUp","onClick"])I[o]&&(x[o]=He(x[o],I[o]));let{pressProps:W,isPressed:O}=Fe(x),z=A?o=>{C.current==="mouse"&&(o.stopPropagation(),o.preventDefault(),R(o))}:void 0,{longPressProps:s}=_e({isDisabled:!L,onLongPress(o){o.pointerType==="touch"&&(K(o),t.setSelectionBehavior("toggle"))}}),d=o=>{C.current==="touch"&&N.current&&o.preventDefault()},v=g!=="none"&&t.isLink(l)?o=>{We.isOpening||o.preventDefault()}:void 0;return{itemProps:V(y,P||F||a&&!f?W:{},L?s:{},{onDoubleClick:z,onDragStartCapture:d,onClick:v,id:e},a?{onMouseDown:o=>o.preventDefault()}:void 0),isPressed:O,isSelected:t.isSelected(l),isFocused:t.isFocused&&t.focusedKey===l,isDisabled:f,allowsSelection:P,hasAction:T}}function Ke(){let r=window.event;return(r==null?void 0:r.key)==="Enter"}function Pe(){let r=window.event;return(r==null?void 0:r.key)===" "||(r==null?void 0:r.code)==="Space"}class xe{getItemRect(e){let t=this.ref.current;if(!t)return null;let l=e!=null?q(this.ref,e):null;if(!l)return null;let i=t.getBoundingClientRect(),n=l.getBoundingClientRect();return{x:n.left-i.left-t.clientLeft+t.scrollLeft,y:n.top-i.top-t.clientTop+t.scrollTop,width:n.width,height:n.height}}getContentSize(){let e=this.ref.current;var t,l;return{width:(t=e==null?void 0:e.scrollWidth)!==null&&t!==void 0?t:0,height:(l=e==null?void 0:e.scrollHeight)!==null&&l!==void 0?l:0}}getVisibleRect(){let e=this.ref.current;var t,l,i,n;return{x:(t=e==null?void 0:e.scrollLeft)!==null&&t!==void 0?t:0,y:(l=e==null?void 0:e.scrollTop)!==null&&l!==void 0?l:0,width:(i=e==null?void 0:e.clientWidth)!==null&&i!==void 0?i:0,height:(n=e==null?void 0:e.clientHeight)!==null&&n!==void 0?n:0}}constructor(e){this.ref=e}}class ct{isDisabled(e){var t;return this.disabledBehavior==="all"&&(((t=e.props)===null||t===void 0?void 0:t.isDisabled)||this.disabledKeys.has(e.key))}findNextNonDisabled(e,t){let l=e;for(;l!=null;){let i=this.collection.getItem(l);if((i==null?void 0:i.type)==="item"&&!this.isDisabled(i))return l;l=t(l)}return null}getNextKey(e){let t=e;return t=this.collection.getKeyAfter(t),this.findNextNonDisabled(t,l=>this.collection.getKeyAfter(l))}getPreviousKey(e){let t=e;return t=this.collection.getKeyBefore(t),this.findNextNonDisabled(t,l=>this.collection.getKeyBefore(l))}findKey(e,t,l){let i=e,n=this.layoutDelegate.getItemRect(i);if(!n||i==null)return null;let a=n;do{if(i=t(i),i==null)break;n=this.layoutDelegate.getItemRect(i)}while(n&&l(a,n)&&i!=null);return i}isSameRow(e,t){return e.y===t.y||e.x!==t.x}isSameColumn(e,t){return e.x===t.x||e.y!==t.y}getKeyBelow(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getNextKey(t),this.isSameRow):this.getNextKey(e)}getKeyAbove(e){return this.layout==="grid"&&this.orientation==="vertical"?this.findKey(e,t=>this.getPreviousKey(t),this.isSameRow):this.getPreviousKey(e)}getNextColumn(e,t){return t?this.getPreviousKey(e):this.getNextKey(e)}getKeyRightOf(e){let t=this.direction==="ltr"?"getKeyRightOf":"getKeyLeftOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,l=>this.layoutDelegate[t](l))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="rtl"):this.findKey(e,l=>this.getNextColumn(l,this.direction==="rtl"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="rtl"):null}getKeyLeftOf(e){let t=this.direction==="ltr"?"getKeyLeftOf":"getKeyRightOf";return this.layoutDelegate[t]?(e=this.layoutDelegate[t](e),this.findNextNonDisabled(e,l=>this.layoutDelegate[t](l))):this.layout==="grid"?this.orientation==="vertical"?this.getNextColumn(e,this.direction==="ltr"):this.findKey(e,l=>this.getNextColumn(l,this.direction==="ltr"),this.isSameColumn):this.orientation==="horizontal"?this.getNextColumn(e,this.direction==="ltr"):null}getFirstKey(){let e=this.collection.getFirstKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyAfter(t))}getLastKey(){let e=this.collection.getLastKey();return this.findNextNonDisabled(e,t=>this.collection.getKeyBefore(t))}getKeyPageAbove(e){let t=this.ref.current,l=this.layoutDelegate.getItemRect(e);if(!l)return null;if(t&&!se(t))return this.getFirstKey();let i=e;if(this.orientation==="horizontal"){let n=Math.max(0,l.x+l.width-this.layoutDelegate.getVisibleRect().width);for(;l&&l.x>n&&i!=null;)i=this.getKeyAbove(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}else{let n=Math.max(0,l.y+l.height-this.layoutDelegate.getVisibleRect().height);for(;l&&l.y>n&&i!=null;)i=this.getKeyAbove(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}return i??this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,l=this.layoutDelegate.getItemRect(e);if(!l)return null;if(t&&!se(t))return this.getLastKey();let i=e;if(this.orientation==="horizontal"){let n=Math.min(this.layoutDelegate.getContentSize().width,l.y-l.width+this.layoutDelegate.getVisibleRect().width);for(;l&&l.x<n&&i!=null;)i=this.getKeyBelow(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}else{let n=Math.min(this.layoutDelegate.getContentSize().height,l.y-l.height+this.layoutDelegate.getVisibleRect().height);for(;l&&l.y<n&&i!=null;)i=this.getKeyBelow(i),l=i==null?null:this.layoutDelegate.getItemRect(i)}return i??this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let l=this.collection,i=t||this.getFirstKey();for(;i!=null;){let n=l.getItem(i);if(!n)return null;let a=n.textValue.slice(0,e.length);if(n.textValue&&this.collator.compare(a,e)===0)return i;i=this.getNextKey(i)}return null}constructor(...e){if(e.length===1){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.collator=t.collator,this.disabledKeys=t.disabledKeys||new Set,this.disabledBehavior=t.disabledBehavior||"all",this.orientation=t.orientation||"vertical",this.direction=t.direction,this.layout=t.layout||"stack",this.layoutDelegate=t.layoutDelegate||new xe(t.ref)}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3],this.layout="stack",this.orientation="vertical",this.disabledBehavior="all",this.layoutDelegate=new xe(this.ref);this.layout==="stack"&&this.orientation==="vertical"&&(this.getKeyLeftOf=void 0,this.getKeyRightOf=void 0)}}function St(r){let{selectionManager:e,collection:t,disabledKeys:l,ref:i,keyboardDelegate:n,layoutDelegate:a}=r,u=lt({usage:"search",sensitivity:"base"}),f=e.disabledBehavior,h=b.useMemo(()=>n||new ct({collection:t,disabledKeys:l,disabledBehavior:f,ref:i,collator:u,layoutDelegate:a}),[n,a,t,l,i,u,f]),{collectionProps:w}=at({...r,ref:i,selectionManager:e,keyboardDelegate:h});return{listProps:w}}function Ne(r){return null}Ne.getCollectionNode=function*(e,t){let{childItems:l,title:i,children:n}=e,a=e.title||e.children,u=e.textValue||(typeof a=="string"?a:"")||e["aria-label"]||"";!u&&(t!=null&&t.suppressTextValueWarning),yield{type:"item",props:e,rendered:a,textValue:u,"aria-label":e["aria-label"],hasChildNodes:ut(e),*childNodes(){if(l)for(let f of l)yield{type:"item",value:f};else if(i){let f=[];he.Children.forEach(n,h=>{f.push({type:"item",element:h})}),yield*f}}}};function ut(r){return r.hasChildItems!=null?r.hasChildItems:!!(r.childItems||r.title&&he.Children.count(r.children)>0)}let ft=Ne;function ke(r){return null}ke.getCollectionNode=function*(e){let{children:t,title:l,items:i}=e;yield{type:"section",props:e,hasChildNodes:!0,rendered:l,"aria-label":e["aria-label"],*childNodes(){if(typeof t=="function"){if(!i)throw new Error("props.children was a function but props.items is missing");for(let n of i)yield{type:"item",value:n,renderer:t}}else{let n=[];he.Children.forEach(t,a=>{n.push({type:"item",element:a})}),yield*n}}}};let dt=ke;const De=new WeakMap;function wt(r){let e=De.get(r);if(e!=null)return e;let t=0,l=i=>{for(let n of i)n.type==="section"?l(je(n,r)):n.type==="item"&&t++};return l(r),De.set(r,t),t}const Ft=(r,e)=>({"aria-label":r,children:e.map(({id:t,menuItems:l,ariaLabel:i})=>ve.jsx(dt,{title:t,"aria-label":i,children:l.map(n=>ve.jsx(ft,{children:n.title},n.id))},t))}),Et=r=>r.flatMap(({menuItems:e})=>e),Rt=r=>r.reduce((e,t)=>({...e,[t.id]:t}),{}),Ct=r=>new Set(r.reduce((e,t)=>[...e,t.disabled?t.id:""],[]).filter(e=>e!=="").map(e=>e.toString()));export{St as $,Tt as a,ft as b,wt as c,Dt as d,Rt as e,Ct as f,Et as g,lt as h,ct as i,nt as j,_e as k,Ft as m};
