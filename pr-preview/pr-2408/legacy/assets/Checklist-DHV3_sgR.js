import{j as y}from"./jsx-runtime-DF2Pcvd1.js";import{c as I,b as w}from"./useFocusable-DCA70-1P.js";import{$ as P}from"./useField-BZj96zT2.js";import{a as q}from"./useFocusRing-T6RsE8HB.js";import{$ as R,d as S,e as T,f as D,g as E,C as h,c as L}from"./Checkbox-C7IjBfL5.js";import{r as b}from"./index-B2-qRKKC.js";import{$ as M,a as O}from"./useFormValidationState-ChdbfkJG.js";import{$ as A}from"./useControlledState-CmdEzstM.js";import{m as B}from"./merge-DI-veSMP.js";const $=new WeakMap;function H(e,a){let{isDisabled:r,name:o,form:m,validationBehavior:p="aria"}=e,{isInvalid:u,validationErrors:f,validationDetails:l}=a.displayValidation,{labelProps:d,fieldProps:v,descriptionProps:i,errorMessageProps:t}=P({...e,labelElementType:"span",isInvalid:u,errorMessage:e.errorMessage||f});$.set(a,{name:o,form:m,descriptionId:i.id,errorMessageId:t.id,validationBehavior:p});let n=I(e,{labelable:!0}),{focusWithinProps:g}=q({onBlurWithin:e.onBlur,onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange});return{groupProps:w(n,{role:"group","aria-disabled":r||void 0,...v,...g}),labelProps:d,descriptionProps:i,errorMessageProps:t,isInvalid:u,validationErrors:f,validationDetails:l}}function z(e,a,r){const o=R({isReadOnly:e.isReadOnly||a.isReadOnly,isSelected:a.isSelected(e.value),defaultSelected:a.defaultValue.includes(e.value),onChange(s){s?a.addValue(e.value):a.removeValue(e.value),e.onChange&&e.onChange(s)}});let{name:m,form:p,descriptionId:u,errorMessageId:f,validationBehavior:l}=$.get(a);var d;l=(d=e.validationBehavior)!==null&&d!==void 0?d:l;let{realtimeValidation:v}=S({...e,value:o.isSelected,name:void 0,validationBehavior:"aria"}),i=b.useRef(T),t=()=>{a.setInvalid(e.value,v.isInvalid?v:i.current)};b.useEffect(t);let n=a.realtimeValidation.isInvalid?a.realtimeValidation:v,g=l==="native"?a.displayValidation:n;var c;let k=D({...e,isReadOnly:e.isReadOnly||a.isReadOnly,isDisabled:e.isDisabled||a.isDisabled,name:e.name||m,form:e.form||p,isRequired:(c=e.isRequired)!==null&&c!==void 0?c:a.isRequired,validationBehavior:l,[E]:{realtimeValidation:n,displayValidation:g,resetValidation:a.resetValidation,commitValidation:a.commitValidation,updateValidation(s){i.current=s,t()}}},o,r);return{...k,inputProps:{...k.inputProps,"aria-describedby":[e["aria-describedby"],a.isInvalid?f:null,u].filter(Boolean).join(" ")||void 0}}}function _(e={}){let[a,r]=A(e.value,e.defaultValue||[],e.onChange),[o]=b.useState(a),m=!!e.isRequired&&a.length===0,p=b.useRef(new Map),u=M({...e,value:a}),f=u.displayValidation.isInvalid;var l,d;return{...u,value:a,defaultValue:(l=e.defaultValue)!==null&&l!==void 0?l:o,setValue(i){e.isReadOnly||e.isDisabled||r(i)},isDisabled:e.isDisabled||!1,isReadOnly:e.isReadOnly||!1,isSelected(i){return a.includes(i)},addValue(i){e.isReadOnly||e.isDisabled||a.includes(i)||(a=a.concat(i),r(a))},removeValue(i){e.isReadOnly||e.isDisabled||a.includes(i)&&r(a.filter(t=>t!==i))},toggleValue(i){e.isReadOnly||e.isDisabled||(a.includes(i)?r(a.filter(t=>t!==i)):r(a.concat(i)))},setInvalid(i,t){let n=new Map(p.current);t.isInvalid?n.set(i,t):n.delete(i),p.current=n,u.updateValidation(O(...n.values()))},validationState:(d=e.validationState)!==null&&d!==void 0?d:f?"invalid":null,isInvalid:f,isRequired:m}}var j=(e=>(e.Horizontal="Horizontal",e.Vertical="Vertical",e))(j||{});const W={1:"tw-grid-cols-1",2:"tw-grid-cols-2",3:"tw-grid-cols-3",4:"tw-grid-cols-4"},F=({checkbox:e,state:a,forwardedRef:r})=>{const o=b.useRef(null),{value:m,disabled:p,label:u,"aria-label":f,state:l}=e,[d,v]=b.useState(l),i=a.isSelected(m),{inputProps:t}=z({value:m,isDisabled:p,"aria-label":f||u},a,o);return b.useEffect(()=>{d===h.Mixed&&!i?v(h.Mixed):v(i?h.Checked:h.Unchecked)},[d,i]),b.useEffect(()=>{r&&o.current&&r(o.current)},[r,i]),y.jsx(L,{...e,state:d,groupInputProps:t,ref:o})},N=(e,a)=>{if(a<=1)return"";const r="auto / span",o=e.length%a;return o===0?"":`${r} ${a-o+1}`},V=({checkboxes:e,setActiveValues:a,ariaLabel:r="Checklist",activeValues:o=[],direction:m="Horizontal","data-test-id":p="checklist",...u})=>{const f=b.useRef(Array.from({length:e.length})),l=b.useRef(null),d=_({value:o,onChange:a}),{groupProps:v}=H({"aria-label":r},d),i="columns"in u&&u.columns||1;return b.useLayoutEffect(()=>{const t=g=>{const c=f.current.filter(C=>C!==null);let s=c.indexOf(document.activeElement);if(g.key==="ArrowDown"||g.key==="ArrowRight")s++,s===c.length&&(s=0),c[s].disabled&&s++;else if(g.key==="ArrowUp"||g.key==="ArrowLeft")s--,s===-1&&(s=c.length-1),c[s].disabled&&s--;else return;c[s].focus();const x=new KeyboardEvent("keyup",{key:"Tab",code:"Tab",keyCode:9,bubbles:!0});c[s].dispatchEvent(x)},n=l.current;return n==null||n.addEventListener("keydown",t),()=>{n==null||n.removeEventListener("keydown",t)}},[e.length]),y.jsx("div",{...v,"data-test-id":p,className:B([m==="Horizontal"?"tw-flex tw-flex-row tw-gap-12":`tw-grid tw-gap-4 ${W[i]}`]),ref:l,children:e.map((t,n)=>{var g;return y.jsx("div",{style:{maxWidth:(g=l==null?void 0:l.current)==null?void 0:g.getBoundingClientRect().width,gridColumn:n===e.length-1&&m==="Vertical"?N(e,i):void 0},children:y.jsx(F,{checkbox:t,state:d,forwardedRef:c=>f.current[n]=c})},t.value)})})};V.displayName="FondueChecklist";V.__docgenInfo={description:"",methods:[],displayName:"FondueChecklist",props:{checkboxes:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:"Omit<CheckboxProps, 'onChange' | 'groupInputProps' | 'value'> & { value: string }",elements:[{name:"Omit",elements:[{name:"signature",type:"object",raw:`{
    id?: string;
    state?: CheckboxState;
    emphasis?: CheckboxEmphasis;
    size?: CheckboxSize;
    disabled?: boolean;
    required?: boolean;
    value?: string;
    onChange?: (isChecked: boolean) => void;
    label?: string;
    hideLabel?: boolean;
    tooltip?: InputLabelTooltipProps;
    helperText?: string;
    'aria-label'?: string;
    groupInputProps?: HTMLAttributes<HTMLElement>;
    'data-test-id'?: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!1}},{key:"state",value:{name:"CheckboxState",required:!1}},{key:"emphasis",value:{name:"CheckboxEmphasis",required:!1}},{key:"size",value:{name:"CheckboxSize",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"required",value:{name:"boolean",required:!1}},{key:"value",value:{name:"string",required:!1}},{key:"onChange",value:{name:"signature",type:"function",raw:"(isChecked: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isChecked"}],return:{name:"void"}},required:!1}},{key:"label",value:{name:"string",required:!1}},{key:"hideLabel",value:{name:"boolean",required:!1}},{key:"tooltip",value:{name:"union",raw:`| (LegacyTooltipProps & Pick<TooltipIconProps, 'triggerStyle' | 'triggerIcon'>)
| (LegacyTooltipProps & Pick<TooltipIconProps, 'triggerStyle' | 'triggerIcon'>)[]`,elements:[{name:"unknown"},{name:"Array",elements:[{name:"unknown"}],raw:"(LegacyTooltipProps & Pick<TooltipIconProps, 'triggerStyle' | 'triggerIcon'>)[]"}],required:!1}},{key:"helperText",value:{name:"string",required:!1}},{key:"aria-label",value:{name:"string",required:!1}},{key:"groupInputProps",value:{name:"HTMLAttributes",elements:[{name:"HTMLElement"}],raw:"HTMLAttributes<HTMLElement>",required:!1}},{key:"data-test-id",value:{name:"string",required:!1}}]}},{name:"union",raw:"'onChange' | 'groupInputProps' | 'value'",elements:[{name:"literal",value:"'onChange'"},{name:"literal",value:"'groupInputProps'"},{name:"literal",value:"'value'"}]}],raw:"Omit<CheckboxProps, 'onChange' | 'groupInputProps' | 'value'>"},{name:"signature",type:"object",raw:"{ value: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}}]}}]}],raw:"CheckboxValue[]"},description:""},setActiveValues:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"value"}],return:{name:"void"}}},description:""},activeValues:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},ariaLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Checklist'",computed:!1}},"data-test-id":{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'checklist'",computed:!1}},direction:{required:!1,tsType:{name:"union",raw:"ChecklistDirection.Vertical | ChecklistDirection.Horizontal",elements:[{name:"ChecklistDirection.Vertical"},{name:"ChecklistDirection.Horizontal"}]},description:"",defaultValue:{value:"ChecklistDirection.Horizontal",computed:!0}},columns:{required:!1,tsType:{name:"union",raw:"1 | 2 | 3 | 4",elements:[{name:"literal",value:"1"},{name:"literal",value:"2"},{name:"literal",value:"3"},{name:"literal",value:"4"}]},description:""}}};export{j as C,V as a};
