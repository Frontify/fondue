import{r as s,j as h}from"./iframe-DLd4WZJZ.js";import{u as te,v as ae}from"./fondue-icons369-GDrmXGJE.js";import{g as U,b as _,d as ie,$ as j,a as re}from"./usePopper-BYrUHtW_.js";import{f as ne,$ as le}from"./useFocusRing-C3R0V8mE.js";import{$ as se}from"./useLayoutEffect--7U9ZmH-.js";import{$ as oe}from"./useControlledState-BYgXI4eT.js";import{I as de}from"./InputLabel-CjO9BBgF.js";import{u as ce}from"./useMemoizedId-D0dchfWt.js";import{F as ue}from"./focusStyle-hm6eSJHh.js";import{m as L}from"./merge-DI-veSMP.js";import{u as ve}from"./LegacyTooltip-C3aoYE4F.js";function fe(e,t,a){let i=U(()=>{a&&a(t)});s.useEffect(()=>{var l;let r=e==null||(l=e.current)===null||l===void 0?void 0:l.form;return r==null||r.addEventListener("reset",i),()=>{r==null||r.removeEventListener("reset",i)}},[e])}const B={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},Q={...B,customError:!0,valid:!1},O={isInvalid:!1,validationDetails:B,validationErrors:[]},me=s.createContext({}),W="__formValidationState"+Date.now();function be(e){if(e[W]){let{realtimeValidation:t,displayValidation:a,updateValidation:i,resetValidation:l,commitValidation:r}=e[W];return{realtimeValidation:t,displayValidation:a,updateValidation:i,resetValidation:l,commitValidation:r}}return pe(e)}function pe(e){let{isInvalid:t,validationState:a,name:i,value:l,builtinValidation:r,validate:u,validationBehavior:d="aria"}=e;a&&(t||(t=a==="invalid"));let m=t!==void 0?{isInvalid:t,validationErrors:[],validationDetails:Q}:null,c=s.useMemo(()=>{if(!u||l==null)return null;let v=we(u,l);return X(v)},[u,l]);r!=null&&r.validationDetails.valid&&(r=void 0);let n=s.useContext(me),f=s.useMemo(()=>i?Array.isArray(i)?i.flatMap(v=>z(n[v])):z(n[i]):[],[n,i]),[w,g]=s.useState(n),[p,$]=s.useState(!1);n!==w&&(g(n),$(!1));let b=s.useMemo(()=>X(p?[]:f),[p,f]),o=s.useRef(O),[y,k]=s.useState(O),V=s.useRef(O),I=()=>{if(!E)return;x(!1);let v=c||r||o.current;R(v,V.current)||(V.current=v,k(v))},[E,x]=s.useState(!1);return s.useEffect(I),{realtimeValidation:m||b||c||r||O,displayValidation:d==="native"?m||b||y:m||b||c||r||y,updateValidation(v){d==="aria"&&!R(y,v)?k(v):o.current=v},resetValidation(){let v=O;R(v,V.current)||(V.current=v,k(v)),d==="native"&&x(!1),$(!0)},commitValidation(){d==="native"&&x(!0),$(!0)}}}function z(e){return e?Array.isArray(e)?e:[e]:[]}function we(e,t){if(typeof e=="function"){let a=e(t);if(a&&typeof a!="boolean")return z(a)}return[]}function X(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:Q}:null}function R(e,t){return e===t?!0:!!e&&!!t&&e.isInvalid===t.isInvalid&&e.validationErrors.length===t.validationErrors.length&&e.validationErrors.every((a,i)=>a===t.validationErrors[i])&&Object.entries(e.validationDetails).every(([a,i])=>t.validationDetails[a]===i)}function We(...e){let t=new Set,a=!1,i={...B};for(let u of e){var l,r;for(let d of u.validationErrors)t.add(d);a||(a=u.isInvalid);for(let d in i)(l=i)[r=d]||(l[r]=u.validationDetails[d])}return i.valid=!a,{isInvalid:a,validationErrors:[...t],validationDetails:i}}function ge(e,t,a){let{validationBehavior:i,focus:l}=e;se(()=>{if(i==="native"&&(a!=null&&a.current)&&!a.current.disabled){let c=t.realtimeValidation.isInvalid?t.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";a.current.setCustomValidity(c),a.current.hasAttribute("title")||(a.current.title=""),t.realtimeValidation.isInvalid||t.updateValidation($e(a.current))}});let r=s.useRef(!1),u=U(()=>{r.current||t.resetValidation()}),d=U(c=>{var n;t.displayValidation.isInvalid||t.commitValidation();let f=a==null||(n=a.current)===null||n===void 0?void 0:n.form;if(!c.defaultPrevented&&a&&f&&xe(f)===a.current){var w;l?l():(w=a.current)===null||w===void 0||w.focus(),ne("keyboard")}c.preventDefault()}),m=U(()=>{t.commitValidation()});s.useEffect(()=>{let c=a==null?void 0:a.current;if(!c)return;let n=c.form,f=n==null?void 0:n.reset;return n&&(n.reset=()=>{r.current=!window.event||window.event.type==="message"&&window.event.target instanceof MessagePort,f==null||f.call(n),r.current=!1}),c.addEventListener("invalid",d),c.addEventListener("change",m),n==null||n.addEventListener("reset",u),()=>{c.removeEventListener("invalid",d),c.removeEventListener("change",m),n==null||n.removeEventListener("reset",u),n&&(n.reset=f)}},[a,i])}function he(e){let t=e.validity;return{badInput:t.badInput,customError:t.customError,patternMismatch:t.patternMismatch,rangeOverflow:t.rangeOverflow,rangeUnderflow:t.rangeUnderflow,stepMismatch:t.stepMismatch,tooLong:t.tooLong,tooShort:t.tooShort,typeMismatch:t.typeMismatch,valueMissing:t.valueMissing,valid:t.valid}}function $e(e){return{isInvalid:!e.validity.valid,validationDetails:he(e),validationErrors:e.validationMessage?[e.validationMessage]:[]}}function xe(e){for(let t=0;t<e.elements.length;t++){let a=e.elements[t];if(!a.validity.valid)return a}return null}function ye(e,t,a){let{isDisabled:i=!1,isReadOnly:l=!1,value:r,name:u,form:d,children:m,"aria-label":c,"aria-labelledby":n,validationState:f="valid",isInvalid:w,onPressStart:g,onPressEnd:p,onPressChange:$,onPress:b,onPressUp:o,onClick:y}=e,k=S=>{S.stopPropagation(),t.setSelected(S.target.checked)},{pressProps:V,isPressed:I}=_({onPressStart:g,onPressEnd:p,onPressChange:$,onPress:b,onPressUp:o,onClick:y,isDisabled:i}),{pressProps:E,isPressed:x}=_({onPressStart:g,onPressEnd:p,onPressChange:$,onPressUp:o,onClick:y,onPress(S){var M;b==null||b(S),t.toggle(),(M=a.current)===null||M===void 0||M.focus()},isDisabled:i||l}),{focusableProps:N}=ie(e,a),A=j(V,N),v=re(e,{labelable:!0});return fe(a,t.defaultSelected,t.setSelected),{labelProps:j(E,{onClick:S=>S.preventDefault()}),inputProps:j(v,{"aria-invalid":w||f==="invalid"||void 0,"aria-errormessage":e["aria-errormessage"],"aria-controls":e["aria-controls"],"aria-readonly":l||void 0,onChange:k,disabled:i,...r==null?{}:{value:r},name:u,form:d,type:"checkbox",...A}),isSelected:t.isSelected,isPressed:I||x,isDisabled:i,isReadOnly:l,isInvalid:w||f==="invalid"}}function Ee(e,t,a){let i=be({...e,value:t.isSelected}),{isInvalid:l,validationErrors:r,validationDetails:u}=i.displayValidation,{labelProps:d,inputProps:m,isSelected:c,isPressed:n,isDisabled:f,isReadOnly:w}=ye({...e,isInvalid:l},t,a);ge(e,i,a);let{isIndeterminate:g,isRequired:p,validationBehavior:$="aria"}=e;s.useEffect(()=>{a.current&&(a.current.indeterminate=!!g)});let{pressProps:b}=_({isDisabled:f||w,onPress(){let{[W]:o}=e,{commitValidation:y}=o||i;y()}});return{labelProps:j(d,b,s.useMemo(()=>({onMouseDown:o=>o.preventDefault()}),[])),inputProps:{...m,checked:c,"aria-required":p&&$==="aria"||void 0,required:p&&$==="native"},isSelected:c,isPressed:n,isDisabled:f,isReadOnly:w,isInvalid:l,validationErrors:r,validationDetails:u}}function Ve(e={}){let{isReadOnly:t}=e,[a,i]=oe(e.isSelected,e.defaultSelected||!1,e.onChange),[l]=s.useState(a);function r(m){t||i(m)}function u(){t||i(!a)}var d;return{isSelected:a,defaultSelected:(d=e.defaultSelected)!==null&&d!==void 0?d:l,setSelected:r,toggle:u}}var Se=(e=>(e.Checked="Checked",e.Unchecked="Unchecked",e.Mixed="Mixed",e))(Se||{}),ke=(e=>(e.Default="Default",e.Weak="Weak",e.Strong="Strong",e))(ke||{}),Ce=(e=>(e.Default="Default",e.Large="Large",e.XLarge="XLarge",e))(Ce||{});const Ie=e=>e==="Checked"||e==="Mixed",G="tw-bg-box-selected-strong tw-text-box-selected-strong-inverse hover:tw-bg-box-selected-strong-hover",Me={Weak:"tw-bg-box-neutral-strong tw-text-box-neutral-strong-inverse hover:tw-bg-box-neutral-strong-hover",Default:G,Strong:G},Le={Default:"tw-h-4 tw-w-4",Large:"tw-h-5 tw-w-5",XLarge:"tw-h-8 tw-w-8"},De=({id:e,emphasis:t="Default",size:a="Default",disabled:i,required:l,label:r,hideLabel:u,tooltip:d,helperText:m,"aria-label":c,value:n,groupInputProps:f,onChange:w,state:g="Unchecked","data-test-id":p="checkbox"},$)=>{const b=ce(e),o=ve($),{focusProps:y}=le(),k=Ve({onChange:i?void 0:w,isSelected:g==="Checked"}),[V,I]=s.useState(),E=s.useRef(null),x=s.useRef(null),[N,A]=s.useState(!1),[v,S]=s.useState(!1),M=C=>{C.key==="Tab"&&I(!0)},H=()=>{I(!1)};s.useEffect(()=>{var C,P;return(C=o==null?void 0:o.current)==null||C.addEventListener("keyup",M),(P=o==null?void 0:o.current)==null||P.addEventListener("blur",H),()=>{var T,q;(T=o==null?void 0:o.current)==null||T.removeEventListener("keyup",M),(q=o==null?void 0:o.current)==null||q.removeEventListener("blur",H)}},[]);const{inputProps:J}=Ee({isDisabled:i,isRequired:l,isIndeterminate:g==="Mixed","aria-label":c,value:n},k,o),K={Checked:h.jsx(ae,{size:a==="XLarge"?24:16}),Mixed:h.jsx(te,{}),Unchecked:null},F=Ie(g),Z=L(["tw-bg-box-disabled tw-pointer-events-none tw-text-box-disabled-inverse tw-border-line-strong",F&&"tw-text-box-disabled-inverse tw-border-line-strong"]),ee=F?Me[t]:L(["tw-bg-base hover:tw-bg-box-neutral",t==="Strong"?"tw-border-2 tw-border-box-selected-strong":"tw-border tw-border-line-xx-strong"]),D=s.useCallback(()=>{var C,P,T,q;E.current&&A(((C=E.current)==null?void 0:C.scrollWidth)>((P=E.current)==null?void 0:P.clientWidth)),x.current&&S(((T=x.current)==null?void 0:T.scrollWidth)>((q=x.current)==null?void 0:q.clientWidth))},[E,x]);return s.useEffect(()=>{if(!(!r&&!m||u))return D(),window.removeEventListener("resize",D),window.addEventListener("resize",D),()=>{window.removeEventListener("resize",D)}},[r,m,u,D]),h.jsx("div",{className:"tw-gap-1 tw-transition-colors tw-w-full","data-test-id":p,children:h.jsx("div",{className:L(["tw-inline-flex tw-flex-row tw-rounded tw-w-full",V?ue:""]),children:h.jsx(de,{id:`${b}-label`,disabled:i,clickable:!0,htmlFor:b,tooltip:d,required:l,bold:F,children:h.jsxs("span",{className:"tw-flex tw-items-center tw-whitespace-nowrap",children:[h.jsxs("span",{className:"tw-inline-flex",children:[h.jsx("input",{...j(f||J,y),id:b,ref:o,className:"tw-sr-only","data-test-id":`${p}-input`,role:"checkbox","aria-checked":g==="Checked",required:l,"aria-label":c,"aria-labelledby":r?`${b}-label`:void 0}),h.jsx("span",{"data-test-id":`${p}-icon-box`,"aria-hidden":"true",className:L(["tw-leading-3 tw-relative tw-flex tw-items-center tw-justify-center tw-rounded tw-shrink-0 tw-flex-none",Le[a],i?Z:ee]),children:K[g]})]}),!u&&h.jsxs("span",{className:"tw-inline-flex tw-flex-col tw-min-w-0 tw-ml-1.5",children:[r&&h.jsx("span",{ref:E,"data-test-id":`${p}-label`,className:L(["tw-text-ellipsis tw-overflow-hidden","tw-text-xs tw-select-none hover:tw-cursor-pointer hover:tw-text-black dark:hover:tw-text-white group-hover:tw-text-black dark:group-hover:tw-text-white",F&&"tw-font-medium"]),title:N?r:void 0,children:r}),m&&h.jsx("span",{ref:x,"data-test-id":`${p}-helper-text`,className:L(["tw-text-ellipsis tw-overflow-hidden","tw-font-sans tw-text-xs tw-font-normal",i?"text-disabled":"tw-text-text-weak"]),title:v?m:void 0,children:m})]})]})})})})},Y=s.forwardRef(De);Y.displayName="FondueCheckbox";Y.__docgenInfo={description:"@deprecated Use `Checkbox` from `@frontify/fondue/components` instead. Also check {@link https://github.com/Frontify/fondue/blob/main/packages/components/MIGRATING.md#checkbox the migration guide}.",methods:[],displayName:"FondueCheckbox",props:{id:{required:!1,tsType:{name:"string"},description:""},state:{required:!1,tsType:{name:"CheckboxState"},description:"",defaultValue:{value:"CheckboxState.Unchecked",computed:!0}},emphasis:{required:!1,tsType:{name:"CheckboxEmphasis"},description:"",defaultValue:{value:"CheckboxEmphasis.Default",computed:!0}},size:{required:!1,tsType:{name:"CheckboxSize"},description:"",defaultValue:{value:"CheckboxSize.Default",computed:!0}},disabled:{required:!1,tsType:{name:"boolean"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(isChecked: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isChecked"}],return:{name:"void"}}},description:""},label:{required:!1,tsType:{name:"string"},description:""},hideLabel:{required:!1,tsType:{name:"boolean"},description:""},tooltip:{required:!1,tsType:{name:"InputLabelTooltipProps"},description:""},helperText:{required:!1,tsType:{name:"string"},description:""},"aria-label":{required:!1,tsType:{name:"string"},description:""},groupInputProps:{required:!1,tsType:{name:"HTMLAttributes",elements:[{name:"HTMLElement"}],raw:"HTMLAttributes<HTMLElement>"},description:""},"data-test-id":{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'checkbox'",computed:!1}}}};export{fe as $,Se as C,Y as a,Ce as b,ke as c,ge as d,be as e,Ve as f,O as g,Ee as h,W as i,We as j};
