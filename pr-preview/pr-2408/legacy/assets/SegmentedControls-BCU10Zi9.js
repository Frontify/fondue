import{j as $}from"./jsx-runtime-DF2Pcvd1.js";import{a as K,n as Y,$ as J,b as Q}from"./useFocusRing-T6RsE8HB.js";import{$ as E,a as X,b as L,c as _}from"./useFocusable-DCA70-1P.js";import{$ as Z}from"./useFormReset-BGrECoD3.js";import{$ as ee}from"./useFormValidation-eNYIok5g.js";import{c as te,$ as ae}from"./chain-DrsK4odg.js";import{b as ne}from"./FocusScope-B39fRxFN.js";import{$ as re}from"./useField-BZj96zT2.js";import{r as f,R as ie}from"./index-B2-qRKKC.js";import{$ as B}from"./VisuallyHidden-CzhTb-YE.js";import{$ as le}from"./useFormValidationState-ChdbfkJG.js";import{$ as oe}from"./useControlledState-CmdEzstM.js";import{u as se}from"./useMemoizedId-BB39KVn8.js";import{F as de}from"./focusStyle-BtNTXUM4.js";import{m as D}from"./merge-DI-veSMP.js";import{m as ce}from"./motion-bD4j9jgw.js";const O=new WeakMap;function ue(e,t,n){let{value:a,children:m,"aria-label":c,"aria-labelledby":g,onPressStart:s,onPressEnd:b,onPressChange:p,onPress:u,onPressUp:l,onClick:x}=e;const w=e.isDisabled||t.isDisabled;let h=m!=null,y=c!=null||g!=null,S=t.selectedValue===a,P=C=>{C.stopPropagation(),t.setSelectedValue(a)},{pressProps:V,isPressed:I}=E({onPressStart:s,onPressEnd:b,onPressChange:p,onPress:u,onPressUp:l,onClick:x,isDisabled:w}),{pressProps:R,isPressed:i}=E({onPressStart:s,onPressEnd:b,onPressChange:p,onPressUp:l,onClick:x,isDisabled:w,onPress(C){var M;u==null||u(C),t.setSelectedValue(a),(M=n.current)===null||M===void 0||M.focus()}}),{focusableProps:r}=X(L(e,{onFocus:()=>t.setLastFocusedValue(a)}),n),d=L(V,r),o=_(e,{labelable:!0}),v=-1;t.selectedValue!=null?t.selectedValue===a&&(v=0):(t.lastFocusedValue===a||t.lastFocusedValue==null)&&(v=0),w&&(v=void 0);let{name:F,form:N,descriptionId:z,errorMessageId:H,validationBehavior:q}=O.get(t);return Z(n,t.defaultSelectedValue,t.setSelectedValue),ee({validationBehavior:q},t,n),{labelProps:L(R,{onClick:C=>C.preventDefault()}),inputProps:L(o,{...d,type:"radio",name:F,form:N,tabIndex:v,disabled:w,required:t.isRequired&&q==="native",checked:S,value:a,onChange:P,"aria-describedby":[e["aria-describedby"],t.isInvalid?H:null,z].filter(Boolean).join(" ")||void 0}),isDisabled:w,isSelected:S,isPressed:I||i}}const fe=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),me=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function be(e){if(Intl.Locale){let n=new Intl.Locale(e).maximize(),a=typeof n.getTextInfo=="function"?n.getTextInfo():n.textInfo;if(a)return a.direction==="rtl";if(n.script)return fe.has(n.script)}let t=e.split("-")[0];return me.has(t)}const pe=Symbol.for("react-aria.i18n.locale");function G(){let e=typeof window<"u"&&window[pe]||typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:be(e)?"rtl":"ltr"}}let j=G(),T=new Set;function A(){j=G();for(let e of T)e(j)}function $e(){let e=te(),[t,n]=f.useState(j);return f.useEffect(()=>(T.size===0&&window.addEventListener("languagechange",A),T.add(n),()=>{T.delete(n),T.size===0&&window.removeEventListener("languagechange",A)}),[]),e?{locale:"en-US",direction:"ltr"}:t}const ve=ie.createContext(null);function we(){let e=$e();return f.useContext(ve)||e}function ge(e,t){let{name:n,form:a,isReadOnly:m,isRequired:c,isDisabled:g,orientation:s="vertical",validationBehavior:b="aria"}=e,{direction:p}=we(),{isInvalid:u,validationErrors:l,validationDetails:x}=t.displayValidation,{labelProps:w,fieldProps:h,descriptionProps:y,errorMessageProps:S}=re({...e,labelElementType:"span",isInvalid:t.isInvalid,errorMessage:e.errorMessage||l}),P=_(e,{labelable:!0}),{focusWithinProps:V}=K({onBlurWithin(i){var r;(r=e.onBlur)===null||r===void 0||r.call(e,i),t.selectedValue||t.setLastFocusedValue(null)},onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange}),I=i=>{let r;switch(i.key){case"ArrowRight":p==="rtl"&&s!=="vertical"?r="prev":r="next";break;case"ArrowLeft":p==="rtl"&&s!=="vertical"?r="next":r="prev";break;case"ArrowDown":r="next";break;case"ArrowUp":r="prev";break;default:return}i.preventDefault();let d=ne(i.currentTarget,{from:i.target,accept:v=>v instanceof Y(v).HTMLInputElement&&v.type==="radio"}),o;r==="next"?(o=d.nextNode(),o||(d.currentNode=i.currentTarget,o=d.firstChild())):(o=d.previousNode(),o||(d.currentNode=i.currentTarget,o=d.lastChild())),o&&(o.focus(),t.setSelectedValue(o.value))},R=ae(n);return O.set(t,{name:R,form:a,descriptionId:y.id,errorMessageId:S.id,validationBehavior:b}),{radioGroupProps:L(P,{role:"radiogroup",onKeyDown:I,"aria-invalid":t.isInvalid||void 0,"aria-errormessage":e["aria-errormessage"],"aria-readonly":m||void 0,"aria-required":c||void 0,"aria-disabled":g||void 0,"aria-orientation":s,...h,...V}),labelProps:w,descriptionProps:y,errorMessageProps:S,isInvalid:u,validationErrors:l,validationDetails:x}}let xe=Math.round(Math.random()*1e10),he=0;function ye(e){let t=f.useMemo(()=>e.name||`radio-group-${xe}-${++he}`,[e.name]);var n;let[a,m]=oe(e.value,(n=e.defaultValue)!==null&&n!==void 0?n:null,e.onChange),[c]=f.useState(a),[g,s]=f.useState(null),b=le({...e,value:a}),p=x=>{!e.isReadOnly&&!e.isDisabled&&(m(x),b.commitValidation())},u=b.displayValidation.isInvalid;var l;return{...b,name:t,selectedValue:a,defaultSelectedValue:e.value!==void 0?c:(l=e.defaultValue)!==null&&l!==void 0?l:null,setSelectedValue:p,lastFocusedValue:g,setLastFocusedValue:s,isDisabled:e.isDisabled||!1,isReadOnly:e.isReadOnly||!1,isRequired:e.isRequired||!1,validationState:e.validationState||(u?"invalid":null),isInvalid:u}}const k=e=>e.icon!==void 0,U=f.forwardRef((e,t)=>{const{id:n,item:a,disabled:m,radioGroupState:c,size:g}=e,s=f.useRef(null),b=a.id===c.selectedValue,{inputProps:p}=ue({value:a.id,"aria-label":k(a)?a.ariaLabel:a.value.toString(),isDisabled:m,id:b?n:void 0},c,s),{isFocusVisible:u,focusProps:l}=J(),x=()=>{var h;m||(c.setSelectedValue(a.id),(h=s.current)==null||h.focus(),Q("pointer"))},w=()=>{switch(!0){case k(a):return"fondue-segmented-controls-item-icon";case typeof a.value=="string":return"fondue-segmented-controls-item-text";default:return"fondue-segmented-controls-item-number"}};return $.jsxs("div",{ref:t,className:D(["tw-relative",u&&de]),children:[$.jsx(B,{children:$.jsx("input",{...p,...l,"data-test-id":"fondue-segmented-controls-input",ref:s})}),$.jsx("div",{onClick:x,role:"none","data-test-id":w(),className:D(["tw-relative tw-w-full tw-py-1.5 tw-inline-flex tw-justify-center tw-items-center tw-font-sans tw-font-normal tw-h-full tw-text-center",g==="small"?"tw-px-2":"tw-px-4",b&&!m?"tw-transition tw-ease-in-out tw-delay-300 tw-text-text tw-bg-base":"tw-text-text-weak",m?"tw-text-box-disabled-inverse tw-bg-box-disabled tw-h-[2.15rem] tw-rounded hover:tw-cursor-not-allowed tw-border-line-x-strong":"hover:tw-text-text hover:tw-cursor-pointer"]),children:$.jsxs("span",{className:"tw-overflow-hidden tw-text-ellipsis tw-whitespace-nowrap tw-flex tw-items-center",children:[k(a)?$.jsx("span",{className:"tw-leading-3",children:a.icon}):null,a.value?$.jsx("span",{className:k(a)?"tw-ml-2":"",children:a.value.toString()}):null]})})]},a.id)});U.displayName="SegmentedControlsItem";const W=({id:e,items:t,activeItemId:n,onChange:a,ariaLabel:m="SegmentedControls",disabled:c=!1,hugWidth:g=!1,size:s})=>{const b=f.useMemo(()=>t.some(i=>!i.disabled),[t]),p=se(e),u={onChange:a,value:n,label:m,isDisabled:c},l=ye(u),{radioGroupProps:x,labelProps:w}=ge(u,l),h=f.useRef([]),y=f.useRef(null),[S,P]=f.useState(null),V=f.useMemo(()=>t.map((i,r)=>$.jsx(U,{id:p,item:i,disabled:i.disabled??c,radioGroupState:l,ref:d=>h.current[r]=d,size:s},`fondue-segmented-controls-${p}-item-${i.id}`)),[t,p,c,l,s]),I=b?t.findIndex((i,r)=>{const d=i.id===l.selectedValue;if(i.disabled&&d)if(r>0){const o=r-1;l.setSelectedValue(t[o].id)}else{const o=r+1;l.setSelectedValue(t[o].id)}return d}):-1,R=g?"tw-flex":"tw-grid tw-grid-flow-col tw-auto-cols-fr tw-justify-evenly";return f.useLayoutEffect(()=>{const i=h.current[I];if(i&&y.current){const r=y.current.getBoundingClientRect(),d=i.getBoundingClientRect();let o=d.left-r.left,v=d.width;I===0?(o-=1,v+=2):v+=1;const F=v/r.width*100,N=o/r.width*100;P({width:`${F}%`,left:`${N}%`})}},[n,I,s]),$.jsxs("div",{className:D([g?"tw-inline-flex":"tw-flex","tw-relative"]),children:[$.jsx("fieldset",{...x,"data-test-id":"fondue-segmented-controls",className:D(["tw-relative tw-divide-x tw-divide-line-strong tw-w-full tw-h-9 tw-p-0 tw-border tw-border-solid tw-border-line-strong tw-m-0 tw-bg-base-alt tw-rounded tw-font-sans tw-text-sm tw-select-none",R]),ref:y,children:V}),$.jsx(B,{children:$.jsx("span",{...w,children:m})}),n&&S&&$.jsx(ce.div,{"aria-hidden":"true",animate:S,initial:!1,transition:{type:"tween",duration:.3},className:D(["tw-absolute tw-h-9 tw-box-border tw-border tw-rounded tw-pointer-events-none tw-top-0",c?"tw-border-line-x-strong hover:tw-cursor-not-allowed":"tw-border-line-xx-strong tw-bg-transparent"])})]})};W.displayName="FondueSegmentedControls";W.__docgenInfo={description:"@deprecated Use `SegmentedControl` from `@frontify/fondue/components` instead. Also check {@link https://github.com/Frontify/fondue/blob/main/packages/components/MIGRATING.md#segmented-control the migration guide}.",methods:[],displayName:"FondueSegmentedControls",props:{id:{required:!1,tsType:{name:"string"},description:""},items:{required:!0,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(TextOrNumberItem | IconItem)[]"},description:""},activeItemId:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(id: string) => void",signature:{arguments:[{type:{name:"string"},name:"id"}],return:{name:"void"}}},description:""},ariaLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'SegmentedControls'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hugWidth:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},size:{required:!1,tsType:{name:"union",raw:"'small' | 'medium'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'medium'"}]},description:""}}};export{we as $,W as S};
