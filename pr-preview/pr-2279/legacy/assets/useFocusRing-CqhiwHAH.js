import{$ as z,a as Y}from"./useEffectEvent-23OTMzEQ.js";import{r as l}from"./index-ClcD9ViR.js";const m=e=>{var n;return(n=e==null?void 0:e.ownerDocument)!==null&&n!==void 0?n:document},v=e=>e&&"window"in e&&e.window===e?e:m(e).defaultView||window;function J(e){return e!==null&&typeof e=="object"&&"nodeType"in e&&typeof e.nodeType=="number"}function Q(e){return J(e)&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in e}let X=!1;function H(){return X}function Z(e,n){if(!H())return n&&e?e.contains(n):!1;if(!e||!n)return!1;let t=n;for(;t!==null;){if(t===e)return!0;t.tagName==="SLOT"&&t.assignedSlot?t=t.assignedSlot.parentNode:Q(t)?t=t.host:t=t.parentNode}return!1}const M=(e=document)=>{var n;if(!H())return e.activeElement;let t=e.activeElement;for(;t&&"shadowRoot"in t&&(!((n=t.shadowRoot)===null||n===void 0)&&n.activeElement);)t=t.shadowRoot.activeElement;return t};function _(e){return H()&&e.target.shadowRoot&&e.composedPath?e.composedPath()[0]:e.target}function O(e){if(ee())e.focus({preventScroll:!0});else{let n=te(e);e.focus(),ne(n)}}let L=null;function ee(){if(L==null){L=!1;try{document.createElement("div").focus({get preventScroll(){return L=!0,!0}})}catch{}}return L}function te(e){let n=e.parentNode,t=[],r=document.scrollingElement||document.documentElement;for(;n instanceof HTMLElement&&n!==r;)(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth)&&t.push({element:n,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft}),n=n.parentNode;return r instanceof HTMLElement&&t.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),t}function ne(e){for(let{element:n,scrollTop:t,scrollLeft:r}of e)n.scrollTop=t,n.scrollLeft=r}function y(e){var n;return typeof window>"u"||window.navigator==null?!1:((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.brands.some(t=>e.test(t.brand)))||e.test(window.navigator.userAgent)}function W(e){var n;return typeof window<"u"&&window.navigator!=null?e.test(((n=window.navigator.userAgentData)===null||n===void 0?void 0:n.platform)||window.navigator.platform):!1}function $(e){let n=null;return()=>(n==null&&(n=e()),n)}const A=$(function(){return W(/^Mac/i)}),re=$(function(){return W(/^iPhone/i)}),oe=$(function(){return W(/^iPad/i)||A()&&navigator.maxTouchPoints>1}),ae=$(function(){return re()||oe()}),Le=$(function(){return A()||ae()}),Te=$(function(){return y(/AppleWebKit/i)&&!ie()}),ie=$(function(){return y(/Chrome/i)}),R=$(function(){return y(/Android/i)}),Fe=$(function(){return y(/Firefox/i)});function se(){let e=l.useRef(new Map),n=l.useCallback((o,i,s,u)=>{let a=u!=null&&u.once?(...d)=>{e.current.delete(s),s(...d)}:s;e.current.set(s,{type:i,eventTarget:o,fn:a,options:u}),o.addEventListener(i,a,u)},[]),t=l.useCallback((o,i,s,u)=>{var a;let d=((a=e.current.get(s))===null||a===void 0?void 0:a.fn)||s;o.removeEventListener(i,d,u),e.current.delete(s)},[]),r=l.useCallback(()=>{e.current.forEach((o,i)=>{t(o.eventTarget,o.type,i,o.options)})},[t]);return l.useEffect(()=>r,[r]),{addGlobalListener:n,removeGlobalListener:t,removeAllGlobalListeners:r}}function ue(e){return e.mozInputSource===0&&e.isTrusted?!0:R()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function ye(e){return!R()&&e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"}const I=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])'],ce=I.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";I.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const le=I.join(':not([hidden]):not([tabindex="-1"]),');function de(e){return e.matches(ce)}function xe(e){return e.matches(le)}class G{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(n,t){this.nativeEvent=t,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.bubbles=t.bubbles,this.cancelable=t.cancelable,this.defaultPrevented=t.defaultPrevented,this.eventPhase=t.eventPhase,this.isTrusted=t.isTrusted,this.timeStamp=t.timeStamp,this.type=n}}function K(e){let n=l.useRef({isFocused:!1,observer:null});z(()=>{const r=n.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let t=Y(r=>{e==null||e(r)});return l.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){n.current.isFocused=!0;let o=r.target,i=s=>{n.current.isFocused=!1,o.disabled&&t(new G("blur",s)),n.current.observer&&(n.current.observer.disconnect(),n.current.observer=null)};o.addEventListener("focusout",i,{once:!0}),n.current.observer=new MutationObserver(()=>{if(n.current.isFocused&&o.disabled){var s;(s=n.current.observer)===null||s===void 0||s.disconnect();let u=o===document.activeElement?null:document.activeElement;o.dispatchEvent(new FocusEvent("blur",{relatedTarget:u})),o.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:u}))}}),n.current.observer.observe(o,{attributes:!0,attributeFilter:["disabled"]})}},[t])}let T=!1;function Pe(e){for(;e&&!de(e);)e=e.parentElement;let n=v(e),t=n.document.activeElement;if(!t||t===e)return;T=!0;let r=!1,o=c=>{(c.target===t||r)&&c.stopImmediatePropagation()},i=c=>{(c.target===t||r)&&(c.stopImmediatePropagation(),!e&&!r&&(r=!0,O(t),a()))},s=c=>{(c.target===e||r)&&c.stopImmediatePropagation()},u=c=>{(c.target===e||r)&&(c.stopImmediatePropagation(),r||(r=!0,O(t),a()))};n.addEventListener("blur",o,!0),n.addEventListener("focusout",i,!0),n.addEventListener("focusin",u,!0),n.addEventListener("focus",s,!0);let a=()=>{cancelAnimationFrame(d),n.removeEventListener("blur",o,!0),n.removeEventListener("focusout",i,!0),n.removeEventListener("focusin",u,!0),n.removeEventListener("focus",s,!0),T=!1,r=!1},d=requestAnimationFrame(a);return a}let E=null,C=new Set,w=new Map,p=!1,k=!1;const fe={Tab:!0,Escape:!0};function x(e,n){for(let t of C)t(e,n)}function be(e){return!(e.metaKey||!A()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function F(e){p=!0,be(e)&&(E="keyboard",x("keyboard",e))}function b(e){E="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(p=!0,x("pointer",e))}function N(e){ue(e)&&(p=!0,E="virtual")}function V(e){e.target===window||e.target===document||T||!e.isTrusted||(!p&&!k&&(E="virtual",x("virtual",e)),p=!1,k=!1)}function j(){T||(p=!1,k=!0)}function D(e){if(typeof window>"u"||w.get(v(e)))return;const n=v(e),t=m(e);let r=n.HTMLElement.prototype.focus;n.HTMLElement.prototype.focus=function(){p=!0,r.apply(this,arguments)},t.addEventListener("keydown",F,!0),t.addEventListener("keyup",F,!0),t.addEventListener("click",N,!0),n.addEventListener("focus",V,!0),n.addEventListener("blur",j,!1),typeof PointerEvent<"u"?(t.addEventListener("pointerdown",b,!0),t.addEventListener("pointermove",b,!0),t.addEventListener("pointerup",b,!0)):(t.addEventListener("mousedown",b,!0),t.addEventListener("mousemove",b,!0),t.addEventListener("mouseup",b,!0)),n.addEventListener("beforeunload",()=>{U(e)},{once:!0}),w.set(n,{focus:r})}const U=(e,n)=>{const t=v(e),r=m(e);n&&r.removeEventListener("DOMContentLoaded",n),w.has(t)&&(t.HTMLElement.prototype.focus=w.get(t).focus,r.removeEventListener("keydown",F,!0),r.removeEventListener("keyup",F,!0),r.removeEventListener("click",N,!0),t.removeEventListener("focus",V,!0),t.removeEventListener("blur",j,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",b,!0),r.removeEventListener("pointermove",b,!0),r.removeEventListener("pointerup",b,!0)):(r.removeEventListener("mousedown",b,!0),r.removeEventListener("mousemove",b,!0),r.removeEventListener("mouseup",b,!0)),w.delete(t))};function $e(e){const n=m(e);let t;return n.readyState!=="loading"?D(e):(t=()=>{D(e)},n.addEventListener("DOMContentLoaded",t)),()=>U(e,t)}typeof document<"u"&&$e();function q(){return E!=="pointer"}function Se(){return E}function Me(e){E=e,x(e,null)}const ve=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function pe(e,n,t){let r=m(t==null?void 0:t.target);const o=typeof window<"u"?v(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,i=typeof window<"u"?v(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,s=typeof window<"u"?v(t==null?void 0:t.target).HTMLElement:HTMLElement,u=typeof window<"u"?v(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return e=e||r.activeElement instanceof o&&!ve.has(r.activeElement.type)||r.activeElement instanceof i||r.activeElement instanceof s&&r.activeElement.isContentEditable,!(e&&n==="keyboard"&&t instanceof u&&!fe[t.key])}function me(e,n,t){D(),l.useEffect(()=>{let r=(o,i)=>{pe(!!(t!=null&&t.isTextInput),o,i)&&e(q())};return C.add(r),()=>{C.delete(r)}},n)}function Ee(e){let{isDisabled:n,onFocus:t,onBlur:r,onFocusChange:o}=e;const i=l.useCallback(a=>{if(a.target===a.currentTarget)return r&&r(a),o&&o(!1),!0},[r,o]),s=K(i),u=l.useCallback(a=>{const d=m(a.target),c=d?M(d):M();a.target===a.currentTarget&&c===_(a.nativeEvent)&&(t&&t(a),o&&o(!0),s(a))},[o,t,s]);return{focusProps:{onFocus:!n&&(t||o||r)?u:void 0,onBlur:!n&&(r||o)?i:void 0}}}function he(e){let{isDisabled:n,onBlurWithin:t,onFocusWithin:r,onFocusWithinChange:o}=e,i=l.useRef({isFocusWithin:!1}),{addGlobalListener:s,removeAllGlobalListeners:u}=se(),a=l.useCallback(f=>{f.currentTarget.contains(f.target)&&i.current.isFocusWithin&&!f.currentTarget.contains(f.relatedTarget)&&(i.current.isFocusWithin=!1,u(),t&&t(f),o&&o(!1))},[t,o,i,u]),d=K(a),c=l.useCallback(f=>{if(!f.currentTarget.contains(f.target))return;const g=m(f.target),h=M(g);if(!i.current.isFocusWithin&&h===_(f.nativeEvent)){r&&r(f),o&&o(!0),i.current.isFocusWithin=!0,d(f);let P=f.currentTarget;s(g,"focus",B=>{if(i.current.isFocusWithin&&!Z(P,B.target)){let S=new G("blur",new g.defaultView.FocusEvent("blur",{relatedTarget:B.target}));S.target=P,S.currentTarget=P,a(S)}},{capture:!0})}},[r,o,d,s,a]);return n?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:c,onBlur:a}}}function Ce(e={}){let{autoFocus:n=!1,isTextInput:t,within:r}=e,o=l.useRef({isFocused:!1,isFocusVisible:n||q()}),[i,s]=l.useState(!1),[u,a]=l.useState(()=>o.current.isFocused&&o.current.isFocusVisible),d=l.useCallback(()=>a(o.current.isFocused&&o.current.isFocusVisible),[]),c=l.useCallback(h=>{o.current.isFocused=h,s(h),d()},[d]);me(h=>{o.current.isFocusVisible=h,d()},[],{isTextInput:t});let{focusProps:f}=Ee({isDisabled:r,onFocusChange:c}),{focusWithinProps:g}=he({isDisabled:!r,onFocusWithinChange:c});return{isFocused:i,isFocusVisible:u,focusProps:r?g:f}}export{Ce as $,he as a,H as b,Z as c,v as d,M as e,m as f,xe as g,de as h,_ as i,R as j,ie as k,Se as l,Me as m,q as n,Ee as o,ae as p,Te as q,A as r,Fe as s,oe as t,O as u,se as v,ye as w,Pe as x,ue as y,Le as z};
