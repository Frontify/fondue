import{r as b,j as y}from"./iframe-k-C5zOgA.js";import{a as w,$ as P}from"./useFocusable-BKbIVd9V.js";import{$ as q}from"./useField-DkgLrOUE.js";import{d as R}from"./useFocusRing-zjRx5HlW.js";import{$ as S,d as T,C as h,c as D}from"./Checkbox-BMypfSQL.js";import{b as $,d as E,c as L,e as M}from"./useFormValidationState-Dqm1PZp3.js";import{$ as O}from"./useControlledState-CCPW0AQ3.js";import{m as A}from"./merge-DI-veSMP.js";const V=new WeakMap;function B(e,a){let{isDisabled:r,name:o,form:m,validationBehavior:p="aria"}=e,{isInvalid:u,validationErrors:f,validationDetails:l}=a.displayValidation,{labelProps:d,fieldProps:v,descriptionProps:i,errorMessageProps:t}=q({...e,labelElementType:"span",isInvalid:u,errorMessage:e.errorMessage||f});V.set(a,{name:o,form:m,descriptionId:i.id,errorMessageId:t.id,validationBehavior:p});let n=w(e,{labelable:!0}),{focusWithinProps:g}=R({onBlurWithin:e.onBlur,onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange});return{groupProps:P(n,{role:"group","aria-disabled":r||void 0,...v,...g}),labelProps:d,descriptionProps:i,errorMessageProps:t,isInvalid:u,validationErrors:f,validationDetails:l}}function H(e,a,r){const o=S({isReadOnly:e.isReadOnly||a.isReadOnly,isSelected:a.isSelected(e.value),defaultSelected:a.defaultValue.includes(e.value),onChange(s){s?a.addValue(e.value):a.removeValue(e.value),e.onChange&&e.onChange(s)}});let{name:m,form:p,descriptionId:u,errorMessageId:f,validationBehavior:l}=V.get(a);var d;l=(d=e.validationBehavior)!==null&&d!==void 0?d:l;let{realtimeValidation:v}=$({...e,value:o.isSelected,name:void 0,validationBehavior:"aria"}),i=b.useRef(E),t=()=>{a.setInvalid(e.value,v.isInvalid?v:i.current)};b.useEffect(t);let n=a.realtimeValidation.isInvalid?a.realtimeValidation:v,g=l==="native"?a.displayValidation:n;var c;let k=T({...e,isReadOnly:e.isReadOnly||a.isReadOnly,isDisabled:e.isDisabled||a.isDisabled,name:e.name||m,form:e.form||p,isRequired:(c=e.isRequired)!==null&&c!==void 0?c:a.isRequired,validationBehavior:l,[L]:{realtimeValidation:n,displayValidation:g,resetValidation:a.resetValidation,commitValidation:a.commitValidation,updateValidation(s){i.current=s,t()}}},o,r);return{...k,inputProps:{...k.inputProps,"aria-describedby":[e["aria-describedby"],a.isInvalid?f:null,u].filter(Boolean).join(" ")||void 0}}}function z(e={}){let[a,r]=O(e.value,e.defaultValue||[],e.onChange),[o]=b.useState(a),m=!!e.isRequired&&a.length===0,p=b.useRef(new Map),u=$({...e,value:a}),f=u.displayValidation.isInvalid;var l,d;return{...u,value:a,defaultValue:(l=e.defaultValue)!==null&&l!==void 0?l:o,setValue(i){e.isReadOnly||e.isDisabled||r(i)},isDisabled:e.isDisabled||!1,isReadOnly:e.isReadOnly||!1,isSelected(i){return a.includes(i)},addValue(i){e.isReadOnly||e.isDisabled||a.includes(i)||(a=a.concat(i),r(a))},removeValue(i){e.isReadOnly||e.isDisabled||a.includes(i)&&r(a.filter(t=>t!==i))},toggleValue(i){e.isReadOnly||e.isDisabled||(a.includes(i)?r(a.filter(t=>t!==i)):r(a.concat(i)))},setInvalid(i,t){let n=new Map(p.current);t.isInvalid?n.set(i,t):n.delete(i),p.current=n,u.updateValidation(M(...n.values()))},validationState:(d=e.validationState)!==null&&d!==void 0?d:f?"invalid":null,isInvalid:f,isRequired:m}}var _=(e=>(e.Horizontal="Horizontal",e.Vertical="Vertical",e))(_||{});const j={1:"tw-grid-cols-1",2:"tw-grid-cols-2",3:"tw-grid-cols-3",4:"tw-grid-cols-4"},W=({checkbox:e,state:a,forwardedRef:r})=>{const o=b.useRef(null),{value:m,disabled:p,label:u,"aria-label":f,state:l}=e,[d,v]=b.useState(l),i=a.isSelected(m),{inputProps:t}=H({value:m,isDisabled:p,"aria-label":f||u},a,o);return b.useEffect(()=>{d===h.Mixed&&!i?v(h.Mixed):v(i?h.Checked:h.Unchecked)},[d,i]),b.useEffect(()=>{r&&o.current&&r(o.current)},[r,i]),y.jsx(D,{...e,state:d,groupInputProps:t,ref:o})},F=(e,a)=>{if(a<=1)return"";const r="auto / span",o=e.length%a;return o===0?"":`${r} ${a-o+1}`},C=({checkboxes:e,setActiveValues:a,ariaLabel:r="Checklist",activeValues:o=[],direction:m="Horizontal","data-test-id":p="checklist",...u})=>{const f=b.useRef(Array.from({length:e.length})),l=b.useRef(null),d=z({value:o,onChange:a}),{groupProps:v}=B({"aria-label":r},d),i="columns"in u&&u.columns||1;return b.useLayoutEffect(()=>{const t=g=>{const c=f.current.filter(I=>I!==null);let s=c.indexOf(document.activeElement);if(g.key==="ArrowDown"||g.key==="ArrowRight")s++,s===c.length&&(s=0),c[s].disabled&&s++;else if(g.key==="ArrowUp"||g.key==="ArrowLeft")s--,s===-1&&(s=c.length-1),c[s].disabled&&s--;else return;c[s].focus();const x=new KeyboardEvent("keyup",{key:"Tab",code:"Tab",keyCode:9,bubbles:!0});c[s].dispatchEvent(x)},n=l.current;return n==null||n.addEventListener("keydown",t),()=>{n==null||n.removeEventListener("keydown",t)}},[e.length]),y.jsx("div",{...v,"data-test-id":p,className:A([m==="Horizontal"?"tw-flex tw-flex-row tw-gap-12":`tw-grid tw-gap-4 ${j[i]}`]),ref:l,children:e.map((t,n)=>{var g;return y.jsx("div",{style:{maxWidth:(g=l==null?void 0:l.current)==null?void 0:g.getBoundingClientRect().width,gridColumn:n===e.length-1&&m==="Vertical"?F(e,i):void 0},children:y.jsx(W,{checkbox:t,state:d,forwardedRef:c=>f.current[n]=c})},t.value)})})};C.displayName="FondueChecklist";C.__docgenInfo={description:"",methods:[],displayName:"FondueChecklist",props:{checkboxes:{required:!0,tsType:{name:"Array",elements:[{name:"intersection",raw:"Omit<CheckboxProps, 'onChange' | 'groupInputProps' | 'value'> & { value: string }",elements:[{name:"Omit",elements:[{name:"signature",type:"object",raw:`{
    id?: string;
    state?: CheckboxState;
    emphasis?: CheckboxEmphasis;
    size?: CheckboxSize;
    disabled?: boolean;
    required?: boolean;
    value?: string;
    onChange?: (isChecked: boolean) => void;
    label?: string;
    hideLabel?: boolean;
    tooltip?: InputLabelTooltipProps;
    helperText?: string;
    'aria-label'?: string;
    groupInputProps?: HTMLAttributes<HTMLElement>;
    'data-test-id'?: string;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!1}},{key:"state",value:{name:"CheckboxState",required:!1}},{key:"emphasis",value:{name:"CheckboxEmphasis",required:!1}},{key:"size",value:{name:"CheckboxSize",required:!1}},{key:"disabled",value:{name:"boolean",required:!1}},{key:"required",value:{name:"boolean",required:!1}},{key:"value",value:{name:"string",required:!1}},{key:"onChange",value:{name:"signature",type:"function",raw:"(isChecked: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isChecked"}],return:{name:"void"}},required:!1}},{key:"label",value:{name:"string",required:!1}},{key:"hideLabel",value:{name:"boolean",required:!1}},{key:"tooltip",value:{name:"union",raw:`| (LegacyTooltipProps & Pick<TooltipIconProps, 'triggerStyle' | 'triggerIcon'>)
| (LegacyTooltipProps & Pick<TooltipIconProps, 'triggerStyle' | 'triggerIcon'>)[]`,elements:[{name:"unknown"},{name:"Array",elements:[{name:"unknown"}],raw:"(LegacyTooltipProps & Pick<TooltipIconProps, 'triggerStyle' | 'triggerIcon'>)[]"}],required:!1}},{key:"helperText",value:{name:"string",required:!1}},{key:"aria-label",value:{name:"string",required:!1}},{key:"groupInputProps",value:{name:"HTMLAttributes",elements:[{name:"HTMLElement"}],raw:"HTMLAttributes<HTMLElement>",required:!1}},{key:"data-test-id",value:{name:"string",required:!1}}]}},{name:"union",raw:"'onChange' | 'groupInputProps' | 'value'",elements:[{name:"literal",value:"'onChange'"},{name:"literal",value:"'groupInputProps'"},{name:"literal",value:"'value'"}]}],raw:"Omit<CheckboxProps, 'onChange' | 'groupInputProps' | 'value'>"},{name:"signature",type:"object",raw:"{ value: string }",signature:{properties:[{key:"value",value:{name:"string",required:!0}}]}}]}],raw:"CheckboxValue[]"},description:""},setActiveValues:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"value"}],return:{name:"void"}}},description:""},activeValues:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},ariaLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Checklist'",computed:!1}},"data-test-id":{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'checklist'",computed:!1}},direction:{required:!1,tsType:{name:"union",raw:"ChecklistDirection.Vertical | ChecklistDirection.Horizontal",elements:[{name:"ChecklistDirection.Vertical"},{name:"ChecklistDirection.Horizontal"}]},description:"",defaultValue:{value:"ChecklistDirection.Horizontal",computed:!0}},columns:{required:!1,tsType:{name:"union",raw:"1 | 2 | 3 | 4",elements:[{name:"literal",value:"1"},{name:"literal",value:"2"},{name:"literal",value:"3"},{name:"literal",value:"4"}]},description:""}}};export{_ as C,C as a};
