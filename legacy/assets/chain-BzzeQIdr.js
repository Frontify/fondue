import{a as s,$ as i}from"./useEffectEvent-DAfYCsqI.js";import{r as c,R as o}from"./iframe-CbGYZ4d2.js";function x(r){let[e,u]=c.useState(r),t=c.useRef(null),n=s(()=>{if(!t.current)return;let a=t.current.next();if(a.done){t.current=null;return}e===a.value?n():u(a.value)});i(()=>{t.current&&n()});let f=s(a=>{t.current=a(e),n()});return[e,f]}const b={prefix:String(Math.round(Math.random()*1e10)),current:0},p=o.createContext(b),v=o.createContext(!1);let d=new WeakMap;function S(r=!1){let e=c.useContext(p),u=c.useRef(null);if(u.current===null&&!r){var t,n;let f=(n=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||n===void 0||(t=n.ReactCurrentOwner)===null||t===void 0?void 0:t.current;if(f){let a=d.get(f);a==null?d.set(f,{id:e.current,state:f.memoizedState}):f.memoizedState!==a.state&&(e.current=a.id,d.delete(f))}u.current=++e.current}return u.current}function m(r){let e=c.useContext(p),u=S(!!r),t=`react-aria${e.prefix}`;return r||`${t}-${u}`}function g(r){let e=o.useId(),[u]=c.useState(M()),t=u?"react-aria":`react-aria${b.prefix}`;return r||`${t}-${e}`}const y=typeof o.useId=="function"?g:m;function w(){return!1}function h(){return!0}function C(r){return()=>{}}function M(){return typeof o.useSyncExternalStore=="function"?o.useSyncExternalStore(C,w,h):c.useContext(v)}let I=!!(typeof window<"u"&&window.document&&window.document.createElement),l=new Map,$;typeof FinalizationRegistry<"u"&&($=new FinalizationRegistry(r=>{l.delete(r)}));function z(r){let[e,u]=c.useState(r),t=c.useRef(null),n=y(e),f=c.useRef(null);if($&&$.register(f,n),I){const a=l.get(n);a&&!a.includes(t)?a.push(t):l.set(n,[t])}return i(()=>{let a=n;return()=>{$&&$.unregister(f),l.delete(a)}},[n]),c.useEffect(()=>{let a=t.current;return a&&u(a),()=>{a&&(t.current=null)}}),n}function q(r,e){if(r===e)return r;let u=l.get(r);if(u)return u.forEach(n=>n.current=e),e;let t=l.get(e);return t?(t.forEach(n=>n.current=r),r):e}function j(r=[]){let e=z(),[u,t]=x(e),n=c.useCallback(()=>{t(function*(){yield e,yield document.getElementById(e)?e:void 0})},[e,t]);return i(n,[e,n,...r]),u}function G(...r){return(...e)=>{for(let u of r)typeof u=="function"&&u(...e)}}export{z as $,j as a,G as b,q as c,M as d};
