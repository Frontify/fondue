import{r,j as o}from"./iframe-F6AJ6PHx.js";import{c as F,h as oe,$ as _,a as de}from"./usePopper-DYmUjjnM.js";import{c as ce,$ as ue}from"./useFocusRing-DzNF02No.js";import{a as z,$ as fe}from"./useEffectEvent-Bff5Hhi8.js";import{$ as ve}from"./useControlledState-DA-rVEkf.js";import{I as me}from"./InputLabel-G1P9BzBb.js";import{I as pe}from"./useLink-U7o-puXz.js";import{I as C}from"./IconSize-BcCrF_mi.js";import{u as he}from"./IconExclamationMarkTriangle16-D3m_VwEy.js";import{F as we}from"./focusStyle-6rwBDk7H.js";import{m as L}from"./merge-DI-veSMP.js";import{u as be}from"./Portal-L-St82sC.js";function ge(e,t,i){let a=z(()=>{i&&i(t)});r.useEffect(()=>{var l;let n=e==null||(l=e.current)===null||l===void 0?void 0:l.form;return n==null||n.addEventListener("reset",a),()=>{n==null||n.removeEventListener("reset",a)}},[e,a])}const B={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},J={...B,customError:!0,valid:!1},R={isInvalid:!1,validationDetails:B,validationErrors:[]},xe=r.createContext({}),H="__formValidationState"+Date.now();function $e(e){if(e[H]){let{realtimeValidation:t,displayValidation:i,updateValidation:a,resetValidation:l,commitValidation:n}=e[H];return{realtimeValidation:t,displayValidation:i,updateValidation:a,resetValidation:l,commitValidation:n}}return ye(e)}function ye(e){let{isInvalid:t,validationState:i,name:a,value:l,builtinValidation:n,validate:f,validationBehavior:c="aria"}=e;i&&(t||(t=i==="invalid"));let m=t!==void 0?{isInvalid:t,validationErrors:[],validationDetails:J}:null,u=r.useMemo(()=>{if(!f||l==null)return null;let v=Ie(f,l);return Q(v)},[f,l]);n!=null&&n.validationDetails.valid&&(n=void 0);let s=r.useContext(xe),p=r.useMemo(()=>a?Array.isArray(a)?a.flatMap(v=>W(s[v])):W(s[a]):[],[s,a]),[b,g]=r.useState(s),[w,x]=r.useState(!1);s!==b&&(g(s),x(!1));let h=r.useMemo(()=>Q(w?[]:p),[w,p]),d=r.useRef(R),[y,E]=r.useState(R),M=r.useRef(R),k=()=>{if(!I)return;$(!1);let v=u||n||d.current;A(v,M.current)||(M.current=v,E(v))},[I,$]=r.useState(!1);return r.useEffect(k),{realtimeValidation:m||h||u||n||R,displayValidation:c==="native"?m||h||y:m||h||u||n||y,updateValidation(v){c==="aria"&&!A(y,v)?E(v):d.current=v},resetValidation(){let v=R;A(v,M.current)||(M.current=v,E(v)),c==="native"&&$(!1),x(!0)},commitValidation(){c==="native"&&$(!0),x(!0)}}}function W(e){return e?Array.isArray(e)?e:[e]:[]}function Ie(e,t){if(typeof e=="function"){let i=e(t);if(i&&typeof i!="boolean")return W(i)}return[]}function Q(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:J}:null}function A(e,t){return e===t?!0:!!e&&!!t&&e.isInvalid===t.isInvalid&&e.validationErrors.length===t.validationErrors.length&&e.validationErrors.every((i,a)=>i===t.validationErrors[a])&&Object.entries(e.validationDetails).every(([i,a])=>t.validationDetails[i]===a)}function it(...e){let t=new Set,i=!1,a={...B};for(let f of e){var l,n;for(let c of f.validationErrors)t.add(c);i||(i=f.isInvalid);for(let c in a)(l=a)[n=c]||(l[n]=f.validationDetails[c])}return a.valid=!i,{isInvalid:i,validationErrors:[...t],validationDetails:a}}function Me(e,t,i){let{validationBehavior:a,focus:l}=e;fe(()=>{if(a==="native"&&(i!=null&&i.current)&&!i.current.disabled){let u=t.realtimeValidation.isInvalid?t.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";i.current.setCustomValidity(u),i.current.hasAttribute("title")||(i.current.title=""),t.realtimeValidation.isInvalid||t.updateValidation(Ce(i.current))}});let n=r.useRef(!1),f=z(()=>{n.current||t.resetValidation()}),c=z(u=>{var s;t.displayValidation.isInvalid||t.commitValidation();let p=i==null||(s=i.current)===null||s===void 0?void 0:s.form;if(!u.defaultPrevented&&i&&p&&Ee(p)===i.current){var b;l?l():(b=i.current)===null||b===void 0||b.focus(),ce("keyboard")}u.preventDefault()}),m=z(()=>{t.commitValidation()});r.useEffect(()=>{let u=i==null?void 0:i.current;if(!u)return;let s=u.form,p=s==null?void 0:s.reset;return s&&(s.reset=()=>{n.current=!window.event||window.event.type==="message"&&window.event.target instanceof MessagePort,p==null||p.call(s),n.current=!1}),u.addEventListener("invalid",c),u.addEventListener("change",m),s==null||s.addEventListener("reset",f),()=>{u.removeEventListener("invalid",c),u.removeEventListener("change",m),s==null||s.removeEventListener("reset",f),s&&(s.reset=p)}},[i,c,m,f,a])}function Se(e){let t=e.validity;return{badInput:t.badInput,customError:t.customError,patternMismatch:t.patternMismatch,rangeOverflow:t.rangeOverflow,rangeUnderflow:t.rangeUnderflow,stepMismatch:t.stepMismatch,tooLong:t.tooLong,tooShort:t.tooShort,typeMismatch:t.typeMismatch,valueMissing:t.valueMissing,valid:t.valid}}function Ce(e){return{isInvalid:!e.validity.valid,validationDetails:Se(e),validationErrors:e.validationMessage?[e.validationMessage]:[]}}function Ee(e){for(let t=0;t<e.elements.length;t++){let i=e.elements[t];if(!i.validity.valid)return i}return null}function Ve(e,t,i){let{isDisabled:a=!1,isReadOnly:l=!1,value:n,name:f,form:c,children:m,"aria-label":u,"aria-labelledby":s,validationState:p="valid",isInvalid:b,onPressStart:g,onPressEnd:w,onPressChange:x,onPress:h,onPressUp:d,onClick:y}=e,E=S=>{S.stopPropagation(),t.setSelected(S.target.checked)},{pressProps:M,isPressed:k}=F({onPressStart:g,onPressEnd:w,onPressChange:x,onPress:h,onPressUp:d,onClick:y,isDisabled:a}),{pressProps:I,isPressed:$}=F({onPressStart:g,onPressEnd:w,onPressChange:x,onPressUp:d,onClick:y,onPress(S){var j;h==null||h(S),t.toggle(),(j=i.current)===null||j===void 0||j.focus()},isDisabled:a||l}),{focusableProps:q}=oe(e,i),O=_(M,q),v=de(e,{labelable:!0});return ge(i,t.defaultSelected,t.setSelected),{labelProps:_(I,{onClick:S=>S.preventDefault()}),inputProps:_(v,{"aria-invalid":b||p==="invalid"||void 0,"aria-errormessage":e["aria-errormessage"],"aria-controls":e["aria-controls"],"aria-readonly":l||void 0,onChange:E,disabled:a,...n==null?{}:{value:n},name:f,form:c,type:"checkbox",...O}),isSelected:t.isSelected,isPressed:k||$,isDisabled:a,isReadOnly:l,isInvalid:b||p==="invalid"}}function ke(e,t,i){let a=$e({...e,value:t.isSelected}),{isInvalid:l,validationErrors:n,validationDetails:f}=a.displayValidation,{labelProps:c,inputProps:m,isSelected:u,isPressed:s,isDisabled:p,isReadOnly:b}=Ve({...e,isInvalid:l},t,i);Me(e,a,i);let{isIndeterminate:g,isRequired:w,validationBehavior:x="aria"}=e;r.useEffect(()=>{i.current&&(i.current.indeterminate=!!g)});let{pressProps:h}=F({isDisabled:p||b,onPress(){let{[H]:d}=e,{commitValidation:y}=d||a;y()}});return{labelProps:_(c,h,r.useMemo(()=>({onMouseDown:d=>d.preventDefault()}),[])),inputProps:{...m,checked:u,"aria-required":w&&x==="aria"||void 0,required:w&&x==="native"},isSelected:u,isPressed:s,isDisabled:p,isReadOnly:b,isInvalid:l,validationErrors:n,validationDetails:f}}function je(e={}){let{isReadOnly:t}=e,[i,a]=ve(e.isSelected,e.defaultSelected||!1,e.onChange),[l]=r.useState(i);function n(m){t||a(m)}function f(){t||a(!i)}var c;return{isSelected:i,defaultSelected:(c=e.defaultSelected)!==null&&c!==void 0?c:l,setSelected:n,toggle:f}}function K(e){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:12,height:12,className:"tw-flex tw-items-center tw-justify-center tw-fill-current",name:"IconMinus12","aria-hidden":"true",...e,children:o.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.5 6h-7a.5.5 0 1 1 0-1h7a.5.5 0 0 1 0 1",clipRule:"evenodd"})})}const Le=r.memo(K);K.__docgenInfo={description:"@deprecated Use icons from `@frontify/fondue/icons` instead.",methods:[],displayName:"IconMinus12"};function Z(e){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,className:"tw-flex tw-items-center tw-justify-center tw-fill-current",name:"IconMinus16","aria-hidden":"true",...e,children:o.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 8H4a.5.5 0 1 1 0-1h8a.5.5 0 0 1 0 1",clipRule:"evenodd"})})}const De=r.memo(Z);Z.__docgenInfo={description:"@deprecated Use icons from `@frontify/fondue/icons` instead.",methods:[],displayName:"IconMinus16"};function ee(e){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,className:"tw-flex tw-items-center tw-justify-center tw-fill-current",name:"IconMinus20","aria-hidden":"true",...e,children:o.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M4 9.75A.75.75 0 0 1 4.75 9h10.5a.75.75 0 0 1 0 1.5H4.75A.75.75 0 0 1 4 9.75",clipRule:"evenodd"})})}const Pe=r.memo(ee);ee.__docgenInfo={description:"@deprecated Use icons from `@frontify/fondue/icons` instead.",methods:[],displayName:"IconMinus20"};function te(e){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,className:"tw-flex tw-items-center tw-justify-center tw-fill-current",name:"IconMinus24","aria-hidden":"true",...e,children:o.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M5 11.75a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5H5.75a.75.75 0 0 1-.75-.75",clipRule:"evenodd"})})}const Ne=r.memo(te);te.__docgenInfo={description:"@deprecated Use icons from `@frontify/fondue/icons` instead.",methods:[],displayName:"IconMinus24"};function ie(e){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,className:"tw-flex tw-items-center tw-justify-center tw-fill-current",name:"IconMinus32","aria-hidden":"true",...e,children:o.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M7.04 16.05a1 1 0 0 1 1-1h16a1 1 0 0 1 0 2h-16a1 1 0 0 1-1-1",clipRule:"evenodd"})})}const Te=r.memo(ie);ie.__docgenInfo={description:"@deprecated Use icons from `@frontify/fondue/icons` instead.",methods:[],displayName:"IconMinus32"};const X=e=>{const t=e.size||C.Size16;return o.jsxs("span",{children:[t===C.Size12&&!e.filled&&o.jsx(Le,{...e}),t===C.Size16&&!e.filled&&o.jsx(De,{...e}),t===C.Size20&&!e.filled&&o.jsx(Pe,{...e}),t===C.Size24&&!e.filled&&o.jsx(Ne,{...e}),t===C.Size32&&!e.filled&&o.jsx(Te,{...e})]})};X.displayName="FondueIconMinus";const Re=r.memo(X);X.__docgenInfo={description:"@deprecated Use icons from `@frontify/fondue/icons` instead.",methods:[],displayName:"FondueIconMinus"};var _e=(e=>(e.Checked="Checked",e.Unchecked="Unchecked",e.Mixed="Mixed",e))(_e||{}),qe=(e=>(e.Default="Default",e.Weak="Weak",e.Strong="Strong",e))(qe||{}),Oe=(e=>(e.Default="Default",e.Large="Large",e.XLarge="XLarge",e))(Oe||{});const Ue=e=>e==="Checked"||e==="Mixed",Y="tw-bg-box-selected-strong tw-text-box-selected-strong-inverse hover:tw-bg-box-selected-strong-hover",ze={Weak:"tw-bg-box-neutral-strong tw-text-box-neutral-strong-inverse hover:tw-bg-box-neutral-strong-hover",Default:Y,Strong:Y},Ae={Default:"tw-h-4 tw-w-4",Large:"tw-h-5 tw-w-5",XLarge:"tw-h-8 tw-w-8"},Fe=({id:e,emphasis:t="Default",size:i="Default",disabled:a,required:l,label:n,hideLabel:f,tooltip:c,helperText:m,"aria-label":u,value:s,groupInputProps:p,onChange:b,state:g="Unchecked","data-test-id":w="checkbox"},x)=>{const h=he(e),d=be(x),{focusProps:y}=ue(),E=je({onChange:a?void 0:b,isSelected:g==="Checked"}),[M,k]=r.useState(),I=r.useRef(null),$=r.useRef(null),[q,O]=r.useState(!1),[v,S]=r.useState(!1),j=V=>{V.key==="Tab"&&k(!0)},G=()=>{k(!1)};r.useEffect(()=>{var V,P;return(V=d==null?void 0:d.current)==null||V.addEventListener("keyup",j),(P=d==null?void 0:d.current)==null||P.addEventListener("blur",G),()=>{var N,T;(N=d==null?void 0:d.current)==null||N.removeEventListener("keyup",j),(T=d==null?void 0:d.current)==null||T.removeEventListener("blur",G)}},[]);const{inputProps:ne}=ke({isDisabled:a,isRequired:l,isIndeterminate:g==="Mixed","aria-label":u,value:s},E,d),re={Checked:o.jsx(pe,{size:i==="XLarge"?C.Size24:C.Size16}),Mixed:o.jsx(Re,{}),Unchecked:null},U=Ue(g),se=L(["tw-bg-box-disabled tw-pointer-events-none tw-text-box-disabled-inverse tw-border-line-strong",U&&"tw-text-box-disabled-inverse tw-border-line-strong"]),le=U?ze[t]:L(["tw-bg-base hover:tw-bg-box-neutral",t==="Strong"?"tw-border-2 tw-border-box-selected-strong":"tw-border tw-border-line-xx-strong"]),D=r.useCallback(()=>{var V,P,N,T;I.current&&O(((V=I.current)==null?void 0:V.scrollWidth)>((P=I.current)==null?void 0:P.clientWidth)),$.current&&S(((N=$.current)==null?void 0:N.scrollWidth)>((T=$.current)==null?void 0:T.clientWidth))},[I,$]);return r.useEffect(()=>{if(!(!n&&!m||f))return D(),window.removeEventListener("resize",D),window.addEventListener("resize",D),()=>{window.removeEventListener("resize",D)}},[n,m,f,D]),o.jsx("div",{className:"tw-gap-1 tw-transition-colors tw-w-full","data-test-id":w,children:o.jsx("div",{className:L(["tw-inline-flex tw-flex-row tw-rounded tw-w-full",M?we:""]),children:o.jsx(me,{id:`${h}-label`,disabled:a,clickable:!0,htmlFor:h,tooltip:c,required:l,bold:U,children:o.jsxs("span",{className:"tw-flex tw-items-center tw-whitespace-nowrap",children:[o.jsxs("span",{className:"tw-inline-flex",children:[o.jsx("input",{..._(p||ne,y),id:h,ref:d,className:"tw-sr-only","data-test-id":`${w}-input`,role:"checkbox","aria-checked":g==="Checked",required:l,"aria-label":u,"aria-labelledby":n?`${h}-label`:void 0}),o.jsx("span",{"data-test-id":`${w}-icon-box`,"aria-hidden":"true",className:L(["tw-leading-3 tw-relative tw-flex tw-items-center tw-justify-center tw-rounded tw-shrink-0 tw-flex-none",Ae[i],a?se:le]),children:re[g]})]}),!f&&o.jsxs("span",{className:"tw-inline-flex tw-flex-col tw-min-w-0 tw-ml-1.5",children:[n&&o.jsx("span",{ref:I,"data-test-id":`${w}-label`,className:L(["tw-text-ellipsis tw-overflow-hidden","tw-text-xs tw-select-none hover:tw-cursor-pointer hover:tw-text-black dark:hover:tw-text-white group-hover:tw-text-black dark:group-hover:tw-text-white",U&&"tw-font-medium"]),title:q?n:void 0,children:n}),m&&o.jsx("span",{ref:$,"data-test-id":`${w}-helper-text`,className:L(["tw-text-ellipsis tw-overflow-hidden","tw-font-sans tw-text-xs tw-font-normal",a?"text-disabled":"tw-text-text-weak"]),title:v?m:void 0,children:m})]})]})})})})},ae=r.forwardRef(Fe);ae.displayName="FondueCheckbox";ae.__docgenInfo={description:"@deprecated Use `Checkbox` from `@frontify/fondue/components` instead. Also check {@link https://github.com/Frontify/fondue/blob/main/packages/components/MIGRATING.md#checkbox the migration guide}.",methods:[],displayName:"FondueCheckbox",props:{id:{required:!1,tsType:{name:"string"},description:""},state:{required:!1,tsType:{name:"CheckboxState"},description:"",defaultValue:{value:"CheckboxState.Unchecked",computed:!0}},emphasis:{required:!1,tsType:{name:"CheckboxEmphasis"},description:"",defaultValue:{value:"CheckboxEmphasis.Default",computed:!0}},size:{required:!1,tsType:{name:"CheckboxSize"},description:"",defaultValue:{value:"CheckboxSize.Default",computed:!0}},disabled:{required:!1,tsType:{name:"boolean"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(isChecked: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"isChecked"}],return:{name:"void"}}},description:""},label:{required:!1,tsType:{name:"string"},description:""},hideLabel:{required:!1,tsType:{name:"boolean"},description:""},tooltip:{required:!1,tsType:{name:"InputLabelTooltipProps"},description:""},helperText:{required:!1,tsType:{name:"string"},description:""},"aria-label":{required:!1,tsType:{name:"string"},description:""},groupInputProps:{required:!1,tsType:{name:"HTMLAttributes",elements:[{name:"HTMLElement"}],raw:"HTMLAttributes<HTMLElement>"},description:""},"data-test-id":{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'checkbox'",computed:!1}}}};export{ge as $,_e as C,Me as a,$e as b,je as c,R as d,ke as e,H as f,it as g,ae as h,Oe as i,qe as j};
