import{R as D,r as g,j as h}from"./iframe-CO3PhRFY.js";import{c as xe,a as z,h as Te,B as ne,L as Le}from"./Legend-B0ILe1CY.js";import{G as oe}from"./Group-Bth8V8FE.js";import{a as we,p as Me}from"./D3ShapeFactories-Ch-vNTVa.js";import{g as _,T as Se}from"./createTheme-CNuazKWs.js";import"./preload-helper-CYn9QbHj.js";import"./pie-DtVSWFrF.js";var Ae=["className","top","left","data","centroid","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","pieSort","pieSortValues","pieValue","children","fill"];function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},W.apply(this,arguments)}function De(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,a;for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Ie(e){var t=e.className,n=e.top,i=e.left,r=e.data,a=r===void 0?[]:r,s=e.centroid,o=e.innerRadius,l=o===void 0?0:o,c=e.outerRadius,u=e.cornerRadius,d=e.startAngle,p=e.endAngle,v=e.padAngle,L=e.padRadius,b=e.pieSort,y=e.pieSortValues,w=e.pieValue,m=e.children,P=e.fill,f=P===void 0?"":P,M=De(e,Ae),S=we({innerRadius:l,outerRadius:c,cornerRadius:u,padRadius:L}),C=Me({startAngle:d,endAngle:p,padAngle:v,value:w,sort:b,sortValues:y}),R=C(a);return m?D.createElement(D.Fragment,null,m({arcs:R,path:S,pie:C})):D.createElement(oe,{className:"visx-pie-arcs-group",top:n,left:i},R.map(function(x,V){return D.createElement("g",{key:"pie-arc-"+V},D.createElement("path",W({className:xe("visx-pie-arc",t),d:S(x)||"",fill:f==null||typeof f=="string"?f:f(x)},M)),s==null?void 0:s(S.centroid(x),x))}))}const k={top:0,right:0,bottom:0,left:0},Ee=(e,t,n)=>{const[i,r]=g.useState("label"),[a,s]=g.useState(e),o=a/2,l=i==="label"?n:k,c=[l.left+o,l.top+o],u=a+l.left+l.right,d=a+l.top+l.bottom;return g.useEffect(()=>{const p=()=>{const v=e+n.left+n.right;t.current&&(t.current.clientWidth<v?(r("legend"),s(Math.min(t.current.clientWidth,e))):(s(e),r("label")))};return p(),window.addEventListener("resize",p),()=>{window.removeEventListener("resize",p)}},[e,n,t]),{radius:o,center:c,width:u,height:d,labelStyle:i}},qe="var(--fc-base-color)",Ce="2px",ie=({arcDatum:e,path:t,onMouseEnter:n,onMouseLeave:i})=>{const r=z(e.index),a=Te(e.index),[s,o]=g.useState(r),l=()=>{o(a),n()},c=()=>{o(r),i()};return h.jsx("path",{d:t(e)||"",fill:s,stroke:qe,strokeWidth:Ce,onMouseEnter:l,onMouseLeave:c,tabIndex:0,"aria-label":`${e.data.label} ${e.data.value}`})};ie.__docgenInfo={description:"",methods:[],displayName:"ArcPath",props:{arcDatum:{required:!0,tsType:{name:"PieArcDatum",elements:[{name:"PieChartDatum"}],raw:"PieArcDatum<PieChartDatum>"},description:""},path:{required:!0,tsType:{name:"Arc",elements:[{name:"void"},{name:"PieArcDatum",elements:[{name:"PieChartDatum"}],raw:"PieArcDatum<PieChartDatum>"}],raw:"Arc<void, PieArcDatum<PieChartDatum>>"},description:""},onMouseEnter:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onMouseLeave:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const B="--body-size-large",le={fontSize:`var(${B})`,fontWeight:"var(--typography-font-weight-bold)",fontFamily:`var(${ne})`,fill:"var(--fc-font-color-default)"},G={fontSize:`var(${B})`,fontWeight:"var(--typography-font-weight-regular)",fontFamily:`var(${ne})`,fill:"var(--fc-font-color-default)"},ue={...G,fill:"var(--fc-font-color-weak)"},T=10,Re=4,Ve=30,F=15,je=(e,t,n,i)=>{const[r,a]=t,s=n/2+Re,o=s+Ve;let l,c,u,d,p;return e<=Math.PI/2||i?(l=r+Math.sin(e)*s,c=a-Math.cos(e)*s,u=r+Math.sin(e)*o,d=a-Math.cos(e)*o,p=u+F):e>Math.PI/2&&e<=Math.PI?(l=r+Math.cos(e-Math.PI/2)*s,c=a+Math.sin(e-Math.PI/2)*s,u=r+Math.cos(e-Math.PI/2)*o,d=a+Math.sin(e-Math.PI/2)*o,p=u+F):e>Math.PI&&e<Math.PI*1.5?(l=r-Math.sin(e-Math.PI)*s,c=a+Math.cos(e-Math.PI)*s,u=r-Math.sin(e-Math.PI)*o,d=a+Math.cos(e-Math.PI)*o,p=u-F):(l=r-Math.cos(e-Math.PI*1.5)*s,c=a-Math.sin(e-Math.PI*1.5)*s,u=r-Math.cos(e-Math.PI*1.5)*o,d=a-Math.sin(e-Math.PI*1.5)*o,p=u-F),{x1:l,y1:c,x2:u,y2:d,x3:p}},Fe=(e,t,n,i,r,a)=>{const[s,o]=i;let l=0,c=0,u=0,d=0;return e<Math.PI/2?(c=s+n+T-t,l=Math.abs(o)-t+r):e===Math.PI/2?c=Math.abs(s)+n+T-t:e>Math.PI/2&&e<Math.PI?(d=o-t+a,c=s+n+T-t):e===Math.PI?d=o-t+a:e>Math.PI&&e<Math.PI*1.5?(d=Math.abs(o)-t+a,u=Math.abs(s)-t+T):(e===Math.PI*1.5||(l=Math.abs(o)-t+r),u=Math.abs(s)-t+T),{paddingTop:l,paddingRight:c,paddingLeft:u,paddingBottom:d}},Ne=(e,t,n,i)=>{const[r,a]=n;let s;return e<=Math.PI||i?s=r+T:s=r-t-T,{textAnchorX:s,textAnchorY:a}},Oe=(e,t,n)=>{const i=getComputedStyle(document.body).getPropertyValue("font-size"),r=getComputedStyle(document.documentElement).getPropertyValue(B)??"0",a=parseFloat(r)*parseFloat(i);return{textTopOffset:a,textBottomOffset:e&&(t||n)?a:0}},$e=(e,t,n)=>{const[i,r]=g.useState({labelWidth:0,valueWidth:0,percentageWidth:0});return g.useEffect(()=>{const a=_(e,le).width??0,s=_(t,G).width??0,o=_(n,ue).width??0;r({labelWidth:a,valueWidth:s,percentageWidth:o})},[e,t,n]),i},de=({centroid:e,centroidAngle:t,prevCentroidAngle:n,arcDatum:i,radius:r,showLabelTitle:a,showLabelValue:s,showLabelPercentage:o,setPadding:l,labelsShownOnHover:c,hideLabel:u,valueFormatter:d})=>{const{data:p,startAngle:v,endAngle:L,index:b}=i,y=a||s||o,w=((L-v)/(Math.PI*2)*100).toFixed(1),m=(d==null?void 0:d(p.value))??p.value,P=a?p.label:"",f=`${s?m:""}`,M=o?`(${w}%)`:"",{labelWidth:S,valueWidth:C,percentageWidth:R}=$e(P,f,M),x=Math.max(S,C+R),V=!c&&t-n<Math.PI*.15,{x1:me,y1:he,x2:fe,y2:X,x3:N}=je(t,e,r,V),{textAnchorX:A,textAnchorY:O}=Ne(t,x,[N,X],V),{textTopOffset:K,textBottomOffset:$}=Oe(a,s,o),be=A<N?x-S:0;return g.useEffect(()=>{if(y){const{paddingTop:ge,paddingRight:ve,paddingBottom:ye,paddingLeft:Pe}=Fe(t,r,x,[A,O],K,$*1.5);l(j=>({top:Math.max(j.top,ge),right:Math.max(j.right,ve),bottom:Math.max(j.bottom,ye),left:Math.max(j.left,Pe)}))}else l(k)},[t,x,r,A,O,K,$,y,l]),y&&!u?h.jsxs("g",{children:[h.jsx("path",{d:`M ${me} ${he} L ${fe} ${X} H ${N}`,stroke:z(b),strokeWidth:"2px",fill:"none"}),h.jsxs("text",{x:A,y:O,...Se,children:[a&&h.jsx("tspan",{dx:be,...le,children:P}),h.jsxs("tspan",{x:A,dy:$*1.25,...G,children:[f," ",h.jsx("tspan",{...ue,children:M})]})]})]}):null};de.__docgenInfo={description:"",methods:[],displayName:"Label",props:{centroid:{required:!0,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:""},centroidAngle:{required:!0,tsType:{name:"number"},description:""},prevCentroidAngle:{required:!0,tsType:{name:"number"},description:""},arcDatum:{required:!0,tsType:{name:"PieArcDatum",elements:[{name:"PieChartDatum"}],raw:"PieArcDatum<PieChartDatum>"},description:""},radius:{required:!0,tsType:{name:"number"},description:""},showLabelTitle:{required:!0,tsType:{name:"boolean"},description:""},showLabelValue:{required:!0,tsType:{name:"boolean"},description:""},showLabelPercentage:{required:!0,tsType:{name:"boolean"},description:""},setPadding:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Padding"}],raw:"SetStateAction<Padding>"}],raw:"Dispatch<SetStateAction<Padding>>"},description:""},labelsShownOnHover:{required:!0,tsType:{name:"boolean"},description:""},hideLabel:{required:!0,tsType:{name:"boolean"},description:""},valueFormatter:{required:!1,tsType:{name:"ValueFormatter"},description:""}}};const _e=(e,t)=>({...e,startAngle:e.startAngle===e.endAngle?e.index*(2*Math.PI/t):e.startAngle,endAngle:e.startAngle===e.endAngle?(e.index+1)*(2*Math.PI/t):e.endAngle}),ce=({arc:e,previousArc:t,numberOfArcs:n,radius:i,isLabelHidden:r,showLabelValue:a,showLabelPercentage:s,showLabelTitle:o,path:l,setPaddingForLabels:c,valueFormatter:u})=>{const d=n>3,[p,v]=g.useState(!1),L=r||d&&!p,b=_e(e,n),y=(b.startAngle+b.endAngle)/2,w=t?(t.startAngle+t.endAngle)/2:0,m=l.centroid(b);return h.jsxs(g.Fragment,{children:[h.jsx(ie,{arcDatum:b,path:l,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)}),h.jsx(de,{centroid:m,centroidAngle:y,prevCentroidAngle:w,arcDatum:b,radius:i,showLabelTitle:o,showLabelValue:a,showLabelPercentage:s,setPadding:c,valueFormatter:u,labelsShownOnHover:d,hideLabel:L})]},`fondue-charts-pie-arc-${e.index}`)};ce.__docgenInfo={description:"",methods:[],displayName:"Arc",props:{arc:{required:!0,tsType:{name:"PieArcDatum",elements:[{name:"PieChartDatum"}],raw:"PieArcDatum<PieChartDatum>"},description:""},previousArc:{required:!1,tsType:{name:"PieArcDatum",elements:[{name:"PieChartDatum"}],raw:"PieArcDatum<PieChartDatum>"},description:""},path:{required:!0,tsType:{name:"ArcType",elements:[{name:"void"},{name:"PieArcDatum",elements:[{name:"PieChartDatum"}],raw:"PieArcDatum<PieChartDatum>"}],raw:"ArcType<void, PieArcDatum<PieChartDatum>>"},description:""},numberOfArcs:{required:!0,tsType:{name:"number"},description:""},radius:{required:!0,tsType:{name:"number"},description:""},isLabelHidden:{required:!0,tsType:{name:"boolean"},description:""},showLabelTitle:{required:!0,tsType:{name:"boolean"},description:""},showLabelValue:{required:!0,tsType:{name:"boolean"},description:""},showLabelPercentage:{required:!0,tsType:{name:"boolean"},description:""},setPaddingForLabels:{required:!0,tsType:{name:"Dispatch",elements:[{name:"SetStateAction",elements:[{name:"Padding"}],raw:"SetStateAction<Padding>"}],raw:"Dispatch<SetStateAction<Padding>>"},description:""},valueFormatter:{required:!1,tsType:{name:"ValueFormatter"},description:""}}};const H=({size:e,data:t,valueFormatter:n,showLabelTitle:i=!1,showLabelValue:r=!1,showLabelPercentage:a=!1,shouldSortData:s=!1})=>{const[o,l]=g.useState(k),c=g.useRef(null),{radius:u,labelStyle:d,center:p,width:v,height:L}=Ee(e,c,o),b=t.filter(m=>m.value>0),y=b.length>0?b:t,w=s?y.sort((m,P)=>P.value-m.value):y;return h.jsxs("div",{ref:c,className:"tw-w-full tw-h-full tw-flex tw-flex-col tw-items-center tw-gap-8 md:tw-gap-6",children:[h.jsx("svg",{width:v,height:L,children:h.jsx(oe,{top:p[1],left:p[0],children:h.jsx(Ie,{data:w,pieValue:m=>m.value,outerRadius:u,pieSort:null,pieSortValues:null,children:({arcs:m,path:P})=>h.jsx("g",{children:m.map((f,M)=>h.jsx(ce,{arc:f,previousArc:m[M-1],numberOfArcs:m.length,radius:u,isLabelHidden:d==="legend",showLabelValue:r,showLabelPercentage:a,showLabelTitle:i,path:P,setPaddingForLabels:l,valueFormatter:n},`${f.startAngle}-${f.index}-${f.value}-${f.data.label}`))})})})}),d==="legend"&&h.jsx(Le,{names:t.map(m=>m.label),style:"circle",colorAccessor:z})]})};H.__docgenInfo={description:"",methods:[],displayName:"PieChart",props:{size:{required:!0,tsType:{name:"number"},description:""},data:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    value: number;
    label: string;
}`,signature:{properties:[{key:"value",value:{name:"number",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"PieChartDatum[]"},description:""},valueFormatter:{required:!1,tsType:{name:"ValueFormatter"},description:""},showLabelTitle:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},showLabelValue:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},showLabelPercentage:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},shouldSortData:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const Ke={title:"Charts/Pie Chart",component:H,parameters:{status:{type:"released"}},argTypes:{data:{name:"data",type:{name:"other",value:"PieChartDatum[]",required:!0},description:"An array of data points to be displayed in the chart."},size:{name:"size",type:{name:"number",required:!0},description:"The diameter of the pie in pixels."},valueFormatter:{name:"valueFormatter",type:{name:"other",value:"(value: number) => string",required:!1},description:"An optional function to format the displayed values (for example for adding units).",table:{type:{summary:"ValueFormatter"},defaultValue:{summary:"value => String(value)"}}},showLabelTitle:{name:"showLabelTitle",type:{name:"boolean",value:!1,required:!1},description:"Shows the slice's title in label if set to true."},showLabelValue:{name:"showLabelValue",type:{name:"boolean",value:!1,required:!1},description:"Shows the slice's value in label if set to true."},showLabelPercentage:{name:"showLabelPercentage",type:{name:"boolean",value:!1,required:!1},description:"Shows the slice's percentage in label if set to true."},shouldSortData:{name:"shouldSortData",type:{name:"boolean",value:!1,required:!1},description:"Sorts the data by value if set to true."}}},We=[{label:"Google Chrome",value:88},{label:"Firefox",value:12},{label:"Safari",value:3}],pe=[{label:"Japan",value:5},{label:"Switzerland",value:3},{label:"China",value:1},{label:"Germany",value:35},{label:"France",value:15},{label:"Italy",value:15},{label:"Spain",value:10},{label:"UK",value:5},{label:"Sweden",value:23},{label:"Norway",value:5},{label:"Denmark",value:12},{label:"Finland",value:19},{label:"Austria",value:8}],Y=e=>h.jsx(H,{...e}),I=Y.bind({});I.args={data:We,size:400,valueFormatter:e=>`${e} users`,showLabelTitle:!0,showLabelValue:!0,showLabelPercentage:!0};const E=Y.bind({});E.args={data:pe.slice(0,10),size:400,valueFormatter:e=>`${e} users`,showLabelTitle:!0,showLabelValue:!0,showLabelPercentage:!0};const q=Y.bind({});q.args={data:pe,size:400,valueFormatter:e=>`${e} users`,showLabelTitle:!0,showLabelValue:!0,showLabelPercentage:!0};var Z,U,J;I.parameters={...I.parameters,docs:{...(Z=I.parameters)==null?void 0:Z.docs,source:{originalSource:"args => <PieChart {...args} />",...(J=(U=I.parameters)==null?void 0:U.docs)==null?void 0:J.source}}};var Q,ee,te;E.parameters={...E.parameters,docs:{...(Q=E.parameters)==null?void 0:Q.docs,source:{originalSource:"args => <PieChart {...args} />",...(te=(ee=E.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};var ae,re,se;q.parameters={...q.parameters,docs:{...(ae=q.parameters)==null?void 0:ae.docs,source:{originalSource:"args => <PieChart {...args} />",...(se=(re=q.parameters)==null?void 0:re.docs)==null?void 0:se.source}}};const Ze=["ThreeDataPoints","TenDataPoints","MoreThanTenDataPoints"];export{q as MoreThanTenDataPoints,E as TenDataPoints,I as ThreeDataPoints,Ze as __namedExportsOrder,Ke as default};
